{"ast":null,"code":"import { defineComponent, shallowRef, ref, computed } from \"vue\";\nimport { p as pick } from \"../../../vendor-2b2dbafd.mjs\";\nimport { a as useAccordionItem } from \"../va-accordion/hooks/useAccordion-9e91d65a.mjs\";\nimport { g as generateUniqueId } from \"../../utils/uuid-7d2e5892.mjs\";\nimport { V as VaIcon } from \"../va-icon/index-e46b09d5.mjs\";\nimport { u as useSelectableEmits } from \"../../composables/useSelectable-57750b55.mjs\";\nimport { u as useResizeObserver } from \"../../composables/useResizeObserver-97916f85.mjs\";\nimport { u as useComponentPresetProp } from \"../../composables/useComponentPreset-0dfbd395.mjs\";\nimport { a as useStatefulProps, b as useStateful } from \"../../composables/useStateful-78f75564.mjs\";\nimport { u as useColors } from \"../../composables/useColors-b582f249.mjs\";\nimport { u as useTextColor } from \"../../composables/useTextColor-48b60d5c.mjs\";\nimport { u as useBem } from \"../../composables/useBem-33d80128.mjs\";\nimport { i as isColorTransparent } from \"../../services/color/utils-711878eb.mjs\";\nconst _sfc_main = defineComponent({\n  name: \"VaCollapse\",\n  components: {\n    VaIcon\n  },\n  props: {\n    ...useComponentPresetProp,\n    ...useStatefulProps,\n    modelValue: {\n      type: Boolean,\n      default: false\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    header: {\n      type: String,\n      default: \"\"\n    },\n    icon: {\n      type: String,\n      default: \"\"\n    },\n    color: {\n      type: String,\n      default: void 0\n    },\n    bodyColor: {\n      type: String,\n      default: void 0\n    },\n    textColor: {\n      type: String,\n      default: \"\"\n    },\n    iconColor: {\n      type: String,\n      default: \"secondary\"\n    },\n    colorAll: {\n      type: Boolean,\n      default: false\n    },\n    stateful: {\n      type: Boolean,\n      default: true\n    }\n  },\n  emits: [\"update:modelValue\", ...useSelectableEmits],\n  setup(props, {\n    emit\n  }) {\n    const body = shallowRef();\n    const {\n      valueComputed\n    } = useStateful(props, emit, \"modelValue\");\n    const {\n      getColor,\n      setHSLAColor\n    } = useColors();\n    const {\n      accordionProps,\n      valueProxy: computedModelValue = valueComputed\n    } = useAccordionItem();\n    const {\n      textColorComputed\n    } = useTextColor();\n    const bodyHeight = ref();\n    useResizeObserver([body], () => {\n      var _a;\n      bodyHeight.value = ((_a = body.value) == null ? void 0 : _a.clientHeight) ?? 0;\n    });\n    const height = computed(() => computedModelValue.value ? bodyHeight.value : 0);\n    const getTransition = () => {\n      const duration = height.value / 1e3 * 0.2;\n      return `${duration > 0.2 ? duration : 0.2}s`;\n    };\n    const contentBackground = computed(() => {\n      if (props.bodyColor) {\n        return getColor(props.bodyColor);\n      }\n      return props.color && props.colorAll ? setHSLAColor(getColor(props.color), {\n        a: 0.07\n      }) : \"\";\n    });\n    const headerBackground = computed(() => {\n      return props.color ? getColor(props.color) : \"\";\n    });\n    const uniqueId = computed(generateUniqueId);\n    const headerIdComputed = computed(() => `header-${uniqueId.value}`);\n    const panelIdComputed = computed(() => `panel-${uniqueId.value}`);\n    const tabIndexComputed = computed(() => props.disabled ? -1 : 0);\n    const headerAttributes = computed(() => ({\n      id: headerIdComputed.value,\n      tabindex: tabIndexComputed.value,\n      \"aria-controls\": panelIdComputed.value,\n      \"aria-expanded\": computedModelValue.value,\n      \"aria-disabled\": props.disabled,\n      role: \"button\"\n    }));\n    const computedClasses = useBem(\"va-collapse\", () => ({\n      ...pick(props, [\"disabled\"]),\n      expanded: computedModelValue.value,\n      active: computedModelValue.value,\n      popout: !!(accordionProps.value.popout && computedModelValue.value),\n      inset: !!(accordionProps.value.inset && computedModelValue.value),\n      \"colored-body\": Boolean(contentBackground.value),\n      \"colored-header\": Boolean(headerBackground.value)\n    }));\n    const iconColorComputed = computed(() => {\n      if (!props.color || isColorTransparent(getColor(props.color))) {\n        return props.iconColor;\n      }\n      return textColorComputed.value;\n    });\n    const toggle = () => {\n      if (props.disabled) {\n        return;\n      }\n      computedModelValue.value = !computedModelValue.value;\n    };\n    return {\n      body,\n      height,\n      iconColorComputed,\n      toggle,\n      computedModelValue,\n      headerIdComputed,\n      headerAttributes,\n      panelIdComputed,\n      tabIndexComputed,\n      textColorComputed,\n      computedClasses,\n      headerStyle: computed(() => ({\n        color: textColorComputed.value,\n        backgroundColor: headerBackground.value\n      })),\n      contentStyle: computed(() => {\n        return {\n          visibility: bodyHeight.value > 0 ? \"visible\" : \"hidden\",\n          height: `${height.value}px`,\n          transitionDuration: getTransition(),\n          background: computedModelValue.value ? contentBackground.value : \"\"\n        };\n      })\n    };\n  }\n});\nexport { _sfc_main as _ };","map":{"version":3,"names":["_sfc_main","defineComponent","name","components","VaIcon","props","useComponentPresetProp","useStatefulProps","modelValue","type","Boolean","default","disabled","header","String","icon","color","bodyColor","textColor","iconColor","colorAll","stateful","emits","useSelectableEmits","setup","emit","body","shallowRef","valueComputed","useStateful","getColor","setHSLAColor","useColors","accordionProps","valueProxy","computedModelValue","useAccordionItem","textColorComputed","useTextColor","bodyHeight","ref","useResizeObserver","value","_a","clientHeight","height","computed","getTransition","duration","contentBackground","a","headerBackground","uniqueId","generateUniqueId","headerIdComputed","panelIdComputed","tabIndexComputed","headerAttributes","id","tabindex","role","computedClasses","useBem","pick","expanded","active","popout","inset","iconColorComputed","isColorTransparent","toggle","headerStyle","backgroundColor","contentStyle","visibility","transitionDuration","background"],"sources":["../../../../../src/components/va-collapse/VaCollapse.vue"],"sourcesContent":["<template>\n  <div class=\"va-collapse\" :class=\"computedClasses\">\n    <div\n      class=\"va-collapse__header-wrapper\"\n      role=\"heading\"\n      @click=\"toggle\"\n      @keydown.enter=\"toggle\"\n      @keydown.space=\"toggle\"\n    >\n      <slot\n        name=\"header\"\n        v-bind=\"{\n          value: computedModelValue,\n          bind: headerAttributes,\n          attributes: headerAttributes,\n          attrs: headerAttributes,\n          iconAttrs: {\n            color: iconColorComputed,\n            class: [\n              'va-collapse__expand-icon',\n              computedModelValue ? 'a-collapse__expand-icon--expanded' : 'a-collapse__expand-icon--collapsed'\n            ]\n          },\n          text: header,\n        }\"\n      >\n        <div\n          v-bind=\"headerAttributes\"\n          class=\"va-collapse__header\"\n          :style=\"headerStyle\"\n        >\n          <va-icon\n            v-if=\"icon\"\n            class=\"va-collapse__header__icon\"\n            :name=\"icon\"\n            :color=\"textColorComputed\"\n          />\n          <slot\n            name=\"header-content\"\n            v-bind=\"{ header }\"\n          >\n            <div class=\"va-collapse__header__text\">\n              {{ header }}\n            </div>\n          </slot>\n          <slot name=\"expand-icon\">\n            <va-icon\n              class=\"va-collapse__expand-icon\"\n              name=\"va-arrow-down\"\n              :class=\"computedModelValue ? 'va-collapse__expand-icon--expanded' : 'va-collapse__expand-icon--collapsed'\"\n              :color=\"iconColorComputed\"\n            />\n          </slot>\n        </div>\n      </slot>\n    </div>\n    <div\n      class=\"va-collapse__body-wrapper\"\n      :class=\"{\n        'va-collapse__body-wrapper--bordered': !$slots.body && !$slots.header,\n      }\"\n      :style=\"contentStyle\"\n    >\n      <div\n        class=\"va-collapse__body\"\n        ref=\"body\"\n        role=\"region\"\n        :id=\"panelIdComputed\"\n        :aria-labelledby=\"headerIdComputed\"\n      >\n        <slot name=\"body\">\n          <div class=\"va-collapse__content\">\n            <slot name=\"default\">\n              <slot name=\"content\" />\n            </slot>\n          </div>\n        </slot>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, ref, shallowRef } from 'vue'\nimport pick from 'lodash/pick.js'\n\nimport {\n  useColors, useTextColor,\n  useBem,\n  useResizeObserver,\n  useComponentPresetProp,\n  isColorTransparent,\n  useStateful,\n  useStatefulProps,\n  useSelectableEmits,\n} from '../../composables'\nimport { useAccordionItem } from '../va-accordion/hooks/useAccordion'\n\nimport { generateUniqueId } from '../../utils/uuid'\n\nimport { VaIcon } from '../va-icon'\n\nexport default defineComponent({\n  name: 'VaCollapse',\n  components: {\n    VaIcon,\n  },\n  props: {\n    ...useComponentPresetProp,\n    ...useStatefulProps,\n    modelValue: { type: Boolean, default: false },\n    disabled: { type: Boolean, default: false },\n    header: { type: String, default: '' },\n    icon: { type: String, default: '' },\n    color: { type: String, default: undefined },\n    bodyColor: { type: String, default: undefined },\n    textColor: { type: String, default: '' },\n    iconColor: { type: String, default: 'secondary' },\n    colorAll: { type: Boolean, default: false },\n    stateful: { type: Boolean, default: true },\n  },\n  emits: ['update:modelValue', ...useSelectableEmits],\n\n  setup (props, { emit }) {\n    const body = shallowRef<HTMLElement>()\n\n    const { valueComputed } = useStateful(props, emit, 'modelValue')\n\n    const { getColor, setHSLAColor } = useColors()\n    const { accordionProps, valueProxy: computedModelValue = valueComputed } = useAccordionItem()\n\n    const { textColorComputed } = useTextColor()\n\n    const bodyHeight = ref()\n    useResizeObserver([body], () => {\n      bodyHeight.value = body.value?.clientHeight ?? 0\n    })\n\n    const height = computed(() => computedModelValue.value ? bodyHeight.value : 0)\n\n    const getTransition = () => {\n      const duration = height.value / 1000 * 0.2\n      return `${duration > 0.2 ? duration : 0.2}s`\n    }\n\n    const contentBackground = computed(() => {\n      if (props.bodyColor) {\n        return getColor(props.bodyColor)\n      }\n\n      return props.color && props.colorAll\n        ? setHSLAColor(getColor(props.color), { a: 0.07 })\n        : ''\n    })\n\n    const headerBackground = computed(() => {\n      return props.color ? getColor(props.color) : ''\n    })\n\n    const uniqueId = computed(generateUniqueId)\n    const headerIdComputed = computed(() => `header-${uniqueId.value}`)\n    const panelIdComputed = computed(() => `panel-${uniqueId.value}`)\n    const tabIndexComputed = computed(() => props.disabled ? -1 : 0)\n\n    const headerAttributes = computed(() => ({\n      id: headerIdComputed.value,\n      tabindex: tabIndexComputed.value,\n      'aria-controls': panelIdComputed.value,\n      'aria-expanded': computedModelValue.value,\n      'aria-disabled': props.disabled,\n      role: 'button',\n    }))\n\n    const computedClasses = useBem('va-collapse', () => ({\n      ...pick(props, ['disabled']),\n      expanded: computedModelValue.value,\n      active: computedModelValue.value,\n      popout: !!(accordionProps.value.popout && computedModelValue.value),\n      inset: !!(accordionProps.value.inset && computedModelValue.value),\n      'colored-body': Boolean(contentBackground.value),\n      'colored-header': Boolean(headerBackground.value),\n    }))\n\n    const iconColorComputed = computed(() => {\n      if (!props.color || isColorTransparent(getColor(props.color))) { return props.iconColor }\n\n      return textColorComputed.value\n    })\n\n    const toggle = () => {\n      if (props.disabled) { return }\n      computedModelValue.value = !computedModelValue.value\n    }\n\n    return {\n      body,\n      height,\n      iconColorComputed,\n\n      toggle,\n      computedModelValue,\n\n      headerIdComputed,\n      headerAttributes,\n      panelIdComputed,\n      tabIndexComputed,\n\n      textColorComputed,\n      computedClasses,\n\n      headerStyle: computed(() => ({\n        color: textColorComputed.value,\n        backgroundColor: headerBackground.value,\n      })),\n\n      contentStyle: computed(() => {\n        return {\n          visibility: bodyHeight.value > 0 ? 'visible' as const : 'hidden' as const,\n          height: `${height.value}px`,\n          transitionDuration: getTransition(),\n          background: computedModelValue.value ? contentBackground.value : '',\n        }\n      }),\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import \"variables\";\n\n.va-collapse {\n  transition: var(--va-collapse-transition, var(--va-swing-transition));\n  font-family: var(--va-font-family);\n\n  &__body-wrapper {\n    transition: var(--va-collapse-body-wrapper-transition);\n    overflow: hidden;\n\n    &--bordered {\n      border-bottom: 1px solid var(--va-background-border);\n\n      .va-collapse--colored-header:not(.va-collapse--expanded) & {\n        border-bottom: none;\n      }\n\n      .va-collapse--colored-body.va-collapse--expanded & {\n        border-bottom: none;\n      }\n    }\n  }\n\n  &__body {\n    top: 0;\n    left: 0;\n    width: var(--va-collapse-body-width);\n    transition: var(--va-collapse-body-transition);\n    opacity: 0;\n  }\n\n  &__content {\n    padding: var(--va-collapse-padding);\n    padding-top: calc(var(--va-collapse-padding) / 1.5);\n    box-sizing: border-box;\n\n    &:empty {\n      padding: 0;\n    }\n  }\n\n  &__header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    gap: var(--va-collapse-gap);\n    cursor: var(--va-collapse-header-content-cursor);\n    padding: var(--va-collapse-padding);\n    transition: all 0.2s ease-in-out;\n\n    &__text {\n      width: 100%;\n      font-weight: var(--va-collapse-header-content-text-font-weight);\n    }\n\n    @include keyboard-focus-outline(var(--va-collapse-header-content-border-radius));\n  }\n\n  &--expanded {\n    .va-collapse {\n      &__body {\n        opacity: 1;\n      }\n    }\n  }\n\n  &__expand-icon {\n    transition: var(--va-collapse-expand-icon-transition);\n\n    &--expanded {\n      transform: rotate(180deg);\n    }\n  }\n\n  &--popout {\n    margin: var(--va-collapse-popout-margin);\n  }\n\n  &--inset {\n    margin: var(--va-collapse-inset-margin);\n  }\n\n  &--disabled {\n    @include va-disabled();\n  }\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}