{"ast":null,"code":"import axios from \"axios\";\nconst http = axios.create({\n  baseURL: \"http://127.0.0.1:8000/api/v1/\",\n  params: {}\n});\naxios.defaults.baseURL = \"http://127.0.0.1:8000/api/v1/\";\naxios.defaults.headers.common['Authorization'] = 'Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk1ODEzMDY0LCJpYXQiOjE2OTU4MTE4NjQsImp0aSI6IjllZTJlZmI0YzA3MjQ2NjU5OWFkMjgxZmRiMTA2YmQyIiwidXNlcl9pZCI6MX0.mTT5gtfxA-L9DCBelYD7WmZzxy-_yv-TsjhOCS03t6I';\nhttp.interceptors.request.use(config => {\n  const token = localStorage.getItem(\"access_token\");\n  if (token) {\n    return http.defaults.headers.common['Authorization'] = 'Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk1ODEwNzI5LCJpYXQiOjE2OTU4MDk1MjksImp0aSI6ImRkZDYyMDExZWUzYzQwNjA5ZDE3YmNjOTg3MzFmODIwIiwidXNlcl9pZCI6MX0.rbzObG5Sggo50znRM0dXbtKzBzLDYo0FViwkERGlEKE';\n  } else {\n    window.location.replace(\"/unauthorized\");\n  }\n  return config;\n});\n\n// http.interceptors.response.use(\n//     (response) => response,\n//     async (error) => {\n//       const originalRequest = error.config;\n\n//      if (error.response === 401) {\n\n//         const accessToken = await refreshAccessToken();\n//         http.defaults.headers.common[\"Authorization\"] =\n//           \"Bearer \" + accessToken;\n//         return http(originalRequest);\n//       } else {\n//         throw error;\n//       }\n//     }\n//   );\n//   const refreshAccessToken = async () => {\n//     const refreshToken = localStorage.getItem(\"refresh_token\");\n//     const data = { refresh: refreshToken };\n\n//     try {\n//       const response = await http.post('http://127.0.0.1:8000/api/v1/token/refresh/',\n//         data\n//       );\n//       const accessToken = response.data.access;\n//       localStorage.setItem(\"access_token\", accessToken);\n//       return accessToken;\n//     } catch (err) {\n//       if(err.response.status===401)\n//       localStorage.clear();\n//      window.location.replace(\"/unauthorized\");\n//     }\n//   };\nexport default axios;","map":{"version":3,"names":["axios","http","create","baseURL","params","defaults","headers","common","interceptors","request","use","config","token","localStorage","getItem","window","location","replace"],"sources":["/home/festin.philip/first_project/src/components/axios.js"],"sourcesContent":["import axios from \"axios\";\nconst http = axios.create({\n  baseURL: \"http://127.0.0.1:8000/api/v1/\",\n params:{}\n});\naxios.defaults.baseURL=\"http://127.0.0.1:8000/api/v1/\"\naxios.defaults.headers.common['Authorization'] = 'Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk1ODEzMDY0LCJpYXQiOjE2OTU4MTE4NjQsImp0aSI6IjllZTJlZmI0YzA3MjQ2NjU5OWFkMjgxZmRiMTA2YmQyIiwidXNlcl9pZCI6MX0.mTT5gtfxA-L9DCBelYD7WmZzxy-_yv-TsjhOCS03t6I'\nhttp.interceptors.request.use(config => {\n    \n    const token = localStorage.getItem(\"access_token\");\n  \n    if (token) {\n        return http.defaults.headers.common['Authorization'] = 'Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk1ODEwNzI5LCJpYXQiOjE2OTU4MDk1MjksImp0aSI6ImRkZDYyMDExZWUzYzQwNjA5ZDE3YmNjOTg3MzFmODIwIiwidXNlcl9pZCI6MX0.rbzObG5Sggo50znRM0dXbtKzBzLDYo0FViwkERGlEKE'\n\n    }else{\n      window.location.replace(\"/unauthorized\");\n    }\n    return config;\n    \n  });\n\n\n// http.interceptors.response.use(\n//     (response) => response,\n//     async (error) => {\n//       const originalRequest = error.config;\n     \n//      if (error.response === 401) {\n       \n//         const accessToken = await refreshAccessToken();\n//         http.defaults.headers.common[\"Authorization\"] =\n//           \"Bearer \" + accessToken;\n//         return http(originalRequest);\n//       } else {\n//         throw error;\n//       }\n//     }\n//   );\n//   const refreshAccessToken = async () => {\n//     const refreshToken = localStorage.getItem(\"refresh_token\");\n//     const data = { refresh: refreshToken };\n  \n//     try {\n//       const response = await http.post('http://127.0.0.1:8000/api/v1/token/refresh/',\n//         data\n//       );\n//       const accessToken = response.data.access;\n//       localStorage.setItem(\"access_token\", accessToken);\n//       return accessToken;\n//     } catch (err) {\n//       if(err.response.status===401)\n//       localStorage.clear();\n//      window.location.replace(\"/unauthorized\");\n//     }\n//   };\n  export default axios;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,MAAMC,IAAI,GAAGD,KAAK,CAACE,MAAM,CAAC;EACxBC,OAAO,EAAE,+BAA+B;EACzCC,MAAM,EAAC,CAAC;AACT,CAAC,CAAC;AACFJ,KAAK,CAACK,QAAQ,CAACF,OAAO,GAAC,+BAA+B;AACtDH,KAAK,CAACK,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAG,6OAA6O;AAC9RN,IAAI,CAACO,YAAY,CAACC,OAAO,CAACC,GAAG,CAACC,MAAM,IAAI;EAEpC,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;EAElD,IAAIF,KAAK,EAAE;IACP,OAAOX,IAAI,CAACI,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAG,6OAA6O;EAExS,CAAC,MAAI;IACHQ,MAAM,CAACC,QAAQ,CAACC,OAAO,CAAC,eAAe,CAAC;EAC1C;EACA,OAAON,MAAM;AAEf,CAAC,CAAC;;AAGJ;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE,eAAeX,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}