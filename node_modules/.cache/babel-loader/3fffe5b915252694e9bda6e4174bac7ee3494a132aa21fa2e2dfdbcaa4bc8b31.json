{"ast":null,"code":"import { defineComponent, shallowRef, computed } from \"vue\";\nimport { V as VaColorIndicator } from \"../va-color-indicator/index-84a92835.mjs\";\nimport { V as VaInput } from \"../va-input/index-14c4b30e.mjs\";\nimport { t as throttle } from \"../../../vendor-2b2dbafd.mjs\";\nimport { e as extractComponentProps } from \"../../utils/component-options/extract-component-options-6b96d215.mjs\";\nimport { u as useStatefulEmits, a as useStatefulProps, b as useStateful } from \"../../composables/useStateful-78f75564.mjs\";\nimport { u as useComponentPresetProp } from \"../../composables/useComponentPreset-0dfbd395.mjs\";\nimport { u as useTranslation } from \"../../composables/useTranslation-0934900c.mjs\";\nimport { f as filterComponentProps } from \"../../utils/component-options/filter-props-9727421a.mjs\";\nconst VaInputProps = extractComponentProps(VaInput);\nconst _sfc_main = defineComponent({\n  name: \"VaColorInput\",\n  components: {\n    VaInput,\n    VaColorIndicator\n  },\n  emits: [...useStatefulEmits],\n  props: {\n    ...VaInputProps,\n    ...useStatefulProps,\n    ...useComponentPresetProp,\n    modelValue: {\n      type: String,\n      default: null\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    indicator: {\n      type: String,\n      default: \"dot\",\n      validator: value => [\"dot\", \"square\"].includes(value)\n    },\n    ariaOpenColorPickerLabel: {\n      type: String,\n      default: \"$t:openColorPicker\"\n    }\n  },\n  setup: (props, {\n    emit\n  }) => {\n    const colorPicker = shallowRef();\n    const {\n      valueComputed\n    } = useStateful(props, emit);\n    const callPickerDialog = () => {\n      var _a;\n      return !props.disabled && ((_a = colorPicker.value) == null ? void 0 : _a.click());\n    };\n    const tabIndexComputed = computed(() => props.disabled ? -1 : 0);\n    const inputValue = computed({\n      get: () => props.modelValue,\n      set: throttle(value => emit(\"update:modelValue\", value), 500)\n    });\n    return {\n      ...useTranslation(),\n      valueComputed,\n      inputValue,\n      callPickerDialog,\n      colorPicker,\n      tabIndexComputed,\n      vaInputProps: filterComponentProps(VaInputProps)\n    };\n  }\n});\nexport { _sfc_main as _ };","map":{"version":3,"names":["VaInputProps","extractComponentProps","VaInput","_sfc_main","defineComponent","name","components","VaColorIndicator","emits","useStatefulEmits","props","useStatefulProps","useComponentPresetProp","modelValue","type","String","default","disabled","Boolean","indicator","validator","value","includes","ariaOpenColorPickerLabel","setup","emit","colorPicker","shallowRef","valueComputed","useStateful","callPickerDialog","_a","click","tabIndexComputed","computed","inputValue","get","set","throttle","useTranslation","vaInputProps","filterComponentProps"],"sources":["../../../../../src/components/va-color-input/VaColorInput.vue"],"sourcesContent":["<template>\n  <div class=\"va-color-input\">\n    <va-input\n      v-bind=\"vaInputProps\"\n      v-model=\"valueComputed\"\n      class=\"va-color-input__input\"\n      :tabindex=\"tabIndexComputed\"\n    >\n      <template #appendInner>\n        <va-color-indicator\n          class=\"va-color-input__dot\"\n          role=\"button\"\n          :aria-label=\"tp($props.ariaOpenColorPickerLabel)\"\n          :aria-disabled=\"$props.disabled\"\n          :tabindex=\"tabIndexComputed\"\n          :color=\"valueComputed\"\n          :indicator=\"$props.indicator\"\n          size=\"16px\"\n          @click=\"callPickerDialog\"\n          @keydown.space=\"callPickerDialog\"\n          @keydown.enter=\"callPickerDialog\"\n        />\n      </template>\n    </va-input>\n    <input\n      ref=\"colorPicker\"\n      type=\"color\"\n      class=\"va-color-input__hidden-input\"\n      aria-hidden=\"true\"\n      tabindex=\"-1\"\n      v-model=\"inputValue\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, shallowRef, computed } from 'vue'\n\nimport { useComponentPresetProp, useStateful, useStatefulProps, useStatefulEmits, useTranslation } from '../../composables'\n\nimport { VaColorIndicator } from '../va-color-indicator'\nimport { VaInput } from '../va-input'\nimport { extractComponentProps, filterComponentProps } from '../../utils/component-options'\nimport throttle from 'lodash/throttle'\n\nconst VaInputProps = extractComponentProps(VaInput)\n\nexport default defineComponent({\n  name: 'VaColorInput',\n  components: {\n    VaInput,\n    VaColorIndicator,\n  },\n  emits: [...useStatefulEmits],\n  props: {\n    ...VaInputProps,\n    ...useStatefulProps,\n    ...useComponentPresetProp,\n    modelValue: { type: String, default: null },\n    disabled: { type: Boolean, default: false },\n    indicator: {\n      type: String as PropType<'dot' | 'square'>,\n      default: 'dot',\n      validator: (value: string) => ['dot', 'square'].includes(value),\n    },\n    ariaOpenColorPickerLabel: { type: String, default: '$t:openColorPicker' },\n  },\n  setup: (props, { emit }) => {\n    const colorPicker = shallowRef<HTMLInputElement>()\n\n    const { valueComputed } = useStateful(props, emit)\n\n    const callPickerDialog = () => !props.disabled && colorPicker.value?.click()\n\n    const tabIndexComputed = computed(() => props.disabled ? -1 : 0)\n\n    const inputValue = computed({\n      get: () => props.modelValue,\n      set: throttle((value) => emit('update:modelValue', value), 500),\n    })\n\n    return {\n      ...useTranslation(),\n      valueComputed,\n      inputValue,\n      callPickerDialog,\n      colorPicker,\n      tabIndexComputed,\n      vaInputProps: filterComponentProps(VaInputProps),\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n.va-color-input {\n  display: flex;\n  align-items: center !important;\n\n  .form-group {\n    margin-bottom: 0;\n  }\n\n  &__input {\n    margin-bottom: 0;\n    min-width: 5.6rem;\n\n    &__pointer {\n      cursor: pointer;\n    }\n  }\n\n  &__hidden-input {\n    visibility: hidden;\n    width: 0;\n    height: 0;\n    overflow: hidden;\n    position: absolute;\n    pointer-events: none;\n  }\n}\n</style>\n"],"mappings":";;;;;;;;;AA6CA,MAAMA,YAAA,GAAeC,qBAAA,CAAsBC,OAAO;AAElD,MAAAC,SAAA,GAAeC,eAAA,CAAgB;EAC7BC,IAAA,EAAM;EACNC,UAAA,EAAY;IACVJ,OAAA;IACAK;EACF;EACAC,KAAA,EAAO,CAAC,GAAGC,gBAAgB;EAC3BC,KAAA,EAAO;IACL,GAAGV,YAAA;IACH,GAAGW,gBAAA;IACH,GAAGC,sBAAA;IACHC,UAAA,EAAY;MAAEC,IAAA,EAAMC,MAAA;MAAQC,OAAA,EAAS;IAAK;IAC1CC,QAAA,EAAU;MAAEH,IAAA,EAAMI,OAAA;MAASF,OAAA,EAAS;IAAM;IAC1CG,SAAA,EAAW;MACTL,IAAA,EAAMC,MAAA;MACNC,OAAA,EAAS;MACTI,SAAA,EAAYC,KAAA,IAAkB,CAAC,OAAO,QAAQ,EAAEC,QAAA,CAASD,KAAK;IAChE;IACAE,wBAAA,EAA0B;MAAET,IAAA,EAAMC,MAAA;MAAQC,OAAA,EAAS;IAAqB;EAC1E;EACAQ,KAAA,EAAOA,CAACd,KAAA,EAAO;IAAEe;EAAA,MAAW;IAC1B,MAAMC,WAAA,GAAcC,UAAA;IAEpB,MAAM;MAAEC;IAAkB,IAAAC,WAAA,CAAYnB,KAAA,EAAOe,IAAI;IAEjD,MAAMK,gBAAA,GAAmBA,CAAA;;MAAM,QAACpB,KAAA,CAAMO,QAAA,MAAYc,EAAA,GAAAL,WAAA,CAAYL,KAAA,KAAZ,gBAAAU,EAAA,CAAmBC,KAAA;IAAA;IAErE,MAAMC,gBAAA,GAAmBC,QAAA,CAAS,MAAMxB,KAAA,CAAMO,QAAA,GAAW,KAAK,CAAC;IAE/D,MAAMkB,UAAA,GAAaD,QAAA,CAAS;MAC1BE,GAAA,EAAKA,CAAA,KAAM1B,KAAA,CAAMG,UAAA;MACjBwB,GAAA,EAAKC,QAAA,CAAUjB,KAAA,IAAUI,IAAA,CAAK,qBAAqBJ,KAAK,GAAG,GAAG;IAAA,CAC/D;IAEM;MACL,GAAGkB,cAAA,CAAe;MAClBX,aAAA;MACAO,UAAA;MACAL,gBAAA;MACAJ,WAAA;MACAO,gBAAA;MACAO,YAAA,EAAcC,oBAAA,CAAqBzC,YAAY;IAAA;EAEnD;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}