{"ast":null,"code":"import { defineComponent, shallowRef, computed, watch, ref, nextTick } from \"vue\";\nimport { p as pick } from \"../../../vendor-2b2dbafd.mjs\";\nimport { V as VaInputWrapper } from \"../va-input-wrapper/index-66a85aff.mjs\";\nimport { V as VaDropdown } from \"../va-dropdown/index-2c2f593a.mjs\";\nimport { V as VaIcon } from \"../va-icon/index-e46b09d5.mjs\";\nimport { V as VaSelectOptionList } from \"./components/VaSelectOptionList/index-1d2af83d.mjs\";\nimport { V as VaSelectContent } from \"./components/VaSelectContent/index-e94f8f01.mjs\";\nimport { u as useMaxVisibleOptionsProps, a as useMaxVisibleOptions } from \"./hooks/useMaxVisibleOptions-a7eecfbc.mjs\";\nimport { u as useToggleIconProps, a as useToggleIcon } from \"./hooks/useToggleIcon-450d13ff.mjs\";\nimport { u as useStringValueProps, a as useStringValue } from \"./hooks/useStringValue-1b278456.mjs\";\nimport { u as useAutocompleteProps, a as useAutocomplete } from \"./hooks/useAutocomplete-d3b040cb.mjs\";\nimport { u as useSelectAria } from \"./hooks/useSelectAria-28364b88.mjs\";\nimport { f as focusElement, b as blurElement } from \"../../utils/focus-685f6da0.mjs\";\nimport { u as unwrapEl } from \"../../utils/unwrapEl-4d79d250.mjs\";\nimport { i as isNilValue } from \"../../utils/isNilValue-745d19e7.mjs\";\nimport { w as warn } from \"../../utils/console-33a7ea8d.mjs\";\nimport { V as VaDropdownContent } from \"../va-dropdown/components/VaDropdownContent/index-d832340d.mjs\";\nimport { u as useMaxSelectionsProps, a as useMaxSelections } from \"../../composables/useMaxSelections-2afbbe77.mjs\";\nimport { e as extractComponentProps } from \"../../utils/component-options/extract-component-options-6b96d215.mjs\";\nimport { a as useDropdownableEmits, u as useDropdownableProps, b as useDropdownable } from \"../../composables/useDropdownable-af194a5a.mjs\";\nimport { a as useValidationEmits, u as useValidationProps, b as useValidation } from \"../../composables/useValidation-d5e122b8.mjs\";\nimport { a as useClearableEmits, u as useClearableProps, b as useClearable } from \"../../composables/useClearable-90c7364f.mjs\";\nimport { u as useComponentPresetProp } from \"../../composables/useComponentPreset-0dfbd395.mjs\";\nimport { u as useSelectableListProps, a as useSelectableList } from \"../../composables/useSelectableList-0956e6cb.mjs\";\nimport { u as useLoadingProps } from \"../../composables/useLoading-5a447e96.mjs\";\nimport { u as useFormFieldProps } from \"../../composables/useFormField-3d39d61a.mjs\";\nimport { u as useThrottleProps } from \"../../composables/useThrottle-cdbdff3a.mjs\";\nimport { u as useTranslation } from \"../../composables/useTranslation-0934900c.mjs\";\nimport { u as useFocusDeep } from \"../../composables/useFocusDeep-c586baa6.mjs\";\nimport { u as useSyncProp } from \"../../composables/useSyncProp-326abeda.mjs\";\nimport { u as useBem } from \"../../composables/useBem-33d80128.mjs\";\nimport { f as filterComponentProps } from \"../../utils/component-options/filter-props-9727421a.mjs\";\nconst VaInputWrapperProps = extractComponentProps(VaInputWrapper);\nconst _sfc_main = defineComponent({\n  name: \"VaSelect\",\n  components: {\n    VaSelectContent,\n    VaSelectOptionList,\n    VaIcon,\n    VaDropdown,\n    VaDropdownContent,\n    VaInputWrapper\n  },\n  emits: [\"update:modelValue\", \"update-search\", \"create-new\", \"scroll-bottom\", \"update:search\", ...useDropdownableEmits, ...useValidationEmits, ...useClearableEmits],\n  props: {\n    ...VaInputWrapperProps,\n    ...useComponentPresetProp,\n    ...useSelectableListProps,\n    ...useValidationProps,\n    ...useLoadingProps,\n    ...useMaxSelectionsProps,\n    ...useClearableProps,\n    ...useFormFieldProps,\n    ...useMaxVisibleOptionsProps,\n    ...useToggleIconProps,\n    ...useThrottleProps,\n    ...useStringValueProps,\n    ...useAutocompleteProps,\n    ...useDropdownableProps,\n    modelValue: {\n      type: [String, Number, Array, Object, Boolean],\n      default: \"\"\n    },\n    // Dropdown placement\n    placement: {\n      ...useDropdownableProps.placement,\n      default: \"bottom\"\n    },\n    allowCreate: {\n      type: [Boolean, String],\n      default: false,\n      validator: mode => [true, false, \"unique\"].includes(mode)\n    },\n    color: {\n      type: String,\n      default: \"primary\"\n    },\n    multiple: {\n      type: Boolean,\n      default: false\n    },\n    searchable: {\n      type: Boolean,\n      default: false\n    },\n    width: {\n      type: String,\n      default: \"100%\"\n    },\n    maxHeight: {\n      type: String,\n      default: \"256px\"\n    },\n    noOptionsText: {\n      type: String,\n      default: \"$t:noOptions\"\n    },\n    hideSelected: {\n      type: Boolean,\n      default: false\n    },\n    tabindex: {\n      type: [String, Number],\n      default: 0\n    },\n    virtualScroller: {\n      type: Boolean,\n      default: false\n    },\n    selectedTopShown: {\n      type: Boolean,\n      default: false\n    },\n    highlightMatchedText: {\n      type: Boolean,\n      default: true\n    },\n    minSearchChars: {\n      type: Number,\n      default: 0\n    },\n    autoSelectFirstOption: {\n      type: Boolean,\n      default: false\n    },\n    // Input style\n    placeholder: {\n      type: String,\n      default: \"\"\n    },\n    searchPlaceholderText: {\n      type: String,\n      default: \"$t:search\"\n    },\n    ariaLabel: {\n      type: String,\n      default: \"$t:select\"\n    },\n    ariaSearchLabel: {\n      type: String,\n      default: \"$t:optionsFilter\"\n    },\n    ariaClearLabel: {\n      type: String,\n      default: \"$t:reset\"\n    },\n    search: {\n      type: String,\n      default: void 0\n    }\n  },\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const {\n      tp,\n      t\n    } = useTranslation();\n    const optionList = shallowRef();\n    const input = shallowRef();\n    const searchBar = shallowRef();\n    const isInputFocused = useFocusDeep(input);\n    const {\n      getValue,\n      getText,\n      getTrackBy\n    } = useSelectableList(props);\n    const onScrollBottom = () => emit(\"scroll-bottom\");\n    const [searchVModel] = useSyncProp(\"search\", props, emit, \"\");\n    const showSearchInput = computed(() => props.searchable || props.allowCreate && !props.autocomplete);\n    watch(searchVModel, value => {\n      emit(\"update-search\", value);\n      if (!props.autocomplete) {\n        hoveredOption.value = null;\n      }\n    });\n    const getOptionByValue = value => {\n      if (isNilValue(value) || typeof value === \"object\") {\n        return value;\n      }\n      const optionByValue = props.options.find(option => value === getValue(option));\n      if (optionByValue === void 0) {\n        warn(`[VaSelect]: can not find option in options list (${JSON.stringify(props.options)}) by provided value (${JSON.stringify(value)})!`);\n        return value;\n      }\n      return optionByValue;\n    };\n    const {\n      toggleHiddenOptionsState,\n      isAllOptionsShown,\n      visibleSelectedOptions,\n      hiddenSelectedOptionsAmount,\n      allSelectedOptions\n    } = useMaxVisibleOptions(props, getOptionByValue);\n    const valueComputed = computed({\n      get() {\n        if (props.multiple) {\n          return allSelectedOptions.value;\n        }\n        const value = getOptionByValue(props.modelValue);\n        if (Array.isArray(value)) {\n          warn(\"Model value should be a string, number, boolean or an object for a single Select.\");\n          if (value.length) {\n            return value.at(-1);\n          }\n        }\n        return value;\n      },\n      set(option) {\n        if (Array.isArray(option)) {\n          emit(\"update:modelValue\", option.map(getValue));\n        } else {\n          emit(\"update:modelValue\", getValue(option));\n        }\n      }\n    });\n    const valueString = useStringValue(props, visibleSelectedOptions, getText);\n    const {\n      canBeCleared,\n      clearIconProps,\n      onFocus,\n      onBlur\n    } = useClearable(props, valueComputed);\n    const showClearIcon = computed(() => {\n      if (!canBeCleared.value) {\n        return false;\n      }\n      if (props.multiple && Array.isArray(valueComputed.value)) {\n        return !!valueComputed.value.length;\n      }\n      return true;\n    });\n    const filteredOptions = computed(() => {\n      if (!props.options) {\n        return [];\n      }\n      if (props.selectedTopShown) {\n        return props.options.slice().sort((a, b) => {\n          const isASelected = checkIsOptionSelected(a);\n          const isBSelected = checkIsOptionSelected(b);\n          if (isASelected && isBSelected) {\n            return 0;\n          }\n          if (isASelected && !isBSelected) {\n            return -1;\n          }\n          return 1;\n        });\n      }\n      if (props.hideSelected) {\n        return props.options.filter(option => !checkIsOptionSelected(option));\n      }\n      return props.options;\n    });\n    const checkIsOptionSelected = option => {\n      if (isNilValue(valueComputed.value)) {\n        return false;\n      }\n      if (Array.isArray(valueComputed.value)) {\n        return !isNilValue(valueComputed.value.find(valueItem => compareOptions(valueItem, option)));\n      }\n      return compareOptions(valueComputed.value, option);\n    };\n    const compareOptions = (option1, option2) => {\n      const one = getValue(option1);\n      const two = getValue(option2);\n      if (one === two) {\n        return true;\n      }\n      if (typeof one === \"string\" && typeof two === \"string\") {\n        return one === two;\n      }\n      if (one === null || two === null) {\n        return false;\n      }\n      if (typeof one === \"object\" && typeof two === \"object\") {\n        return getTrackBy(one) === getTrackBy(two);\n      }\n      return false;\n    };\n    const isValueComputedArray = v => Array.isArray(v.value);\n    const selectOption = option => {\n      if (hoveredOption.value === null) {\n        hideAndFocus();\n        return;\n      }\n      if (showSearchInput.value) {\n        searchVModel.value = \"\";\n      }\n      if (props.multiple && isValueComputedArray(valueComputed)) {\n        const {\n          exceedsMaxSelections,\n          addOption\n        } = useMaxSelections(valueComputed, ref(props.maxSelections));\n        const isSelected = checkIsOptionSelected(option);\n        if (isSelected) {\n          valueComputed.value = valueComputed.value.filter(optionSelected => !compareOptions(option, optionSelected));\n        } else {\n          if (exceedsMaxSelections()) {\n            return;\n          }\n          valueComputed.value = addOption(option);\n        }\n      } else {\n        valueComputed.value = typeof option !== \"object\" ? option : {\n          ...option\n        };\n        hideAndFocus();\n      }\n      focusAutocompleteInput();\n    };\n    const addNewOption = () => {\n      var _a;\n      const hasAddedOption = (_a = props.options) == null ? void 0 : _a.some(option => [searchVModel.value, autocompleteValue.value].includes(getText(option)));\n      const allowedToCreateCheck = !((props.allowCreate === \"unique\" || props.autocomplete) && hasAddedOption);\n      if (allowedToCreateCheck) {\n        emit(\"create-new\", searchVModel.value || autocompleteValue.value);\n        searchVModel.value = \"\";\n        autocompleteValue.value = \"\";\n      }\n    };\n    const hoveredOption = ref(null);\n    const selectHoveredOption = () => {\n      if (isNilValue(hoveredOption.value)) {\n        return;\n      }\n      if (!isOpenSync.value) {\n        handleDropdownOpen();\n        return;\n      }\n      selectOption(hoveredOption.value);\n    };\n    const selectOrAddOption = () => {\n      const allowedToCreate = !!props.allowCreate && (searchVModel.value || autocompleteValue.value);\n      if (hoveredOption.value !== null) {\n        selectHoveredOption();\n      } else if (allowedToCreate) {\n        addNewOption();\n      }\n    };\n    const focusPreviousOption = () => {\n      var _a;\n      return (_a = optionList.value) == null ? void 0 : _a.focusPreviousOption();\n    };\n    const focusNextOption = () => {\n      var _a;\n      return (_a = optionList.value) == null ? void 0 : _a.focusNextOption();\n    };\n    const {\n      isOpenSync,\n      dropdownProps\n    } = useDropdownable(props, emit, {\n      defaultCloseOnValueUpdate: computed(() => !props.multiple)\n    });\n    const dropdownPropsComputed = computed(() => ({\n      ...dropdownProps.value,\n      closeOnContentClick: false,\n      stateful: false,\n      offset: [1, 0],\n      keepAnchorWidth: true,\n      keyboardNavigation: true,\n      innerAnchorSelector: \".va-input-wrapper__field\"\n    }));\n    const showDropdownContentComputed = computed({\n      get: () => isOpenSync.value,\n      set: show => {\n        show ? handleDropdownOpen() : handleDropdownClose();\n      }\n    });\n    const handleDropdownOpen = () => {\n      if (props.disabled || props.readonly) {\n        return;\n      }\n      isOpenSync.value = true;\n      scrollToSelected();\n      focusSearchOrOptions();\n    };\n    const handleDropdownClose = () => {\n      isOpenSync.value = false;\n      if (!props.autocomplete) {\n        searchVModel.value = \"\";\n      }\n      nextTick(() => {\n        validate();\n        isInputFocused.focusIfNothingIfFocused();\n      });\n    };\n    const hideAndFocus = () => {\n      handleDropdownClose();\n      isInputFocused.value = true;\n    };\n    const focusSearchBar = () => {\n      var _a;\n      (_a = searchBar.value) == null ? void 0 : _a.focus();\n    };\n    const focusOptionList = () => {\n      var _a, _b;\n      (_a = optionList.value) == null ? void 0 : _a.focus();\n      !props.modelValue && ((_b = optionList.value) == null ? void 0 : _b.focusFirstOption());\n    };\n    const focusSearchOrOptions = async () => {\n      await nextTick();\n      if (showSearchInput.value) {\n        focusSearchBar();\n      } else {\n        focusOptionList();\n      }\n    };\n    const onInputBlur = () => {\n      if (showDropdownContentComputed.value) {\n        return;\n      }\n      onBlur();\n      isInputFocused.value ? isInputFocused.value = false : validate();\n    };\n    const tabIndexComputed = computed(() => props.disabled ? -1 : props.tabindex);\n    const openSelectButtonTabIndexComputed = computed(() => props.disabled || props.autocomplete ? -1 : 0);\n    const scrollToSelected = () => {\n      const selected = valueComputed.value;\n      const nothingSelected = typeof selected !== \"object\" && Array.isArray(selected) && !selected.length;\n      if (nothingSelected) {\n        return;\n      }\n      const scrollTo = Array.isArray(selected) ? selected[selected.length - 1] : selected;\n      hoveredOption.value = scrollTo;\n      nextTick(() => {\n        var _a;\n        return (_a = optionList.value) == null ? void 0 : _a.scrollToOption(scrollTo);\n      });\n    };\n    let hintedSearchQuery = \"\";\n    let hintedSearchQueryTimeoutIndex;\n    const navigationKeys = [\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\", \"Enter\", \" \"];\n    const onHintedSearch = event => {\n      if (navigationKeys.some(key => key === event.key)) {\n        return;\n      }\n      const isLetter = event.key.length === 1;\n      const isDeleteKey = event.key === \"Backspace\" || event.key === \"Delete\";\n      clearTimeout(hintedSearchQueryTimeoutIndex);\n      if (isDeleteKey) {\n        hintedSearchQuery = hintedSearchQuery ? hintedSearchQuery.slice(0, -1) : \"\";\n      } else if (isLetter) {\n        hintedSearchQuery += event.key;\n      }\n      if (showSearchInput.value) {\n        searchVModel.value = hintedSearchQuery;\n        return;\n      }\n      if (hintedSearchQuery) {\n        const appropriateOption = props.options.find(option => getText(option).toLowerCase().startsWith(hintedSearchQuery.toLowerCase()));\n        if (appropriateOption) {\n          hoveredOption.value = appropriateOption;\n        }\n      }\n      hintedSearchQueryTimeoutIndex = setTimeout(() => {\n        hintedSearchQuery = \"\";\n      }, 1e3);\n    };\n    const optionsListPropsComputed = computed(() => ({\n      ...pick(props, [\"textBy\", \"trackBy\", \"groupBy\", \"valueBy\", \"disabledBy\", \"color\", \"virtualScroller\", \"highlightMatchedText\", \"minSearchChars\", \"delay\", \"selectedTopShown\"]),\n      autoSelectFirstOption: props.autoSelectFirstOption || props.autocomplete,\n      search: searchVModel.value || autocompleteValue.value,\n      tabindex: tabIndexComputed.value,\n      selectedValue: valueComputed.value,\n      options: filteredOptions.value,\n      getSelectedState: checkIsOptionSelected,\n      noOptionsText: tp(props.noOptionsText)\n    }));\n    const {\n      toggleIcon,\n      toggleIconColor\n    } = useToggleIcon(props, isOpenSync);\n    const isFocused = computed(() => isInputFocused.value || isOpenSync.value);\n    const inputWrapperClassComputed = useBem(\"va-select-anchor\", () => ({\n      nowrap: !!(props.maxVisibleOptions && !slots.content)\n    }));\n    const vaInputWrapperProps = filterComponentProps(VaInputWrapperProps);\n    const inputWrapperPropsComputed = computed(() => ({\n      ...vaInputWrapperProps.value,\n      error: computedError.value,\n      errorMessages: computedErrorMessages.value,\n      focused: isFocused.value,\n      \"aria-label\": props.ariaLabel || (props.modelValue ? `${t(\"selectedOption\")}: ${props.modelValue}` : t(\"noSelectedOption\"))\n    }));\n    const selectContentPropsComputed = computed(() => ({\n      ...pick(props, [\"placeholder\", \"autocomplete\", \"multiple\", \"disabled\", \"readonly\"]),\n      tabindex: tabIndexComputed.value,\n      value: visibleSelectedOptions.value,\n      valueString: valueString.value,\n      hiddenSelectedOptionsAmount: hiddenSelectedOptionsAmount.value,\n      isAllOptionsShown: isAllOptionsShown.value,\n      focused: isInputFocused.value,\n      autocompleteInputValue: autocompleteValue.value,\n      getText\n    }));\n    const autocompleteValue = useAutocomplete(searchVModel, props, visibleSelectedOptions, isOpenSync, getText);\n    const setAutocompleteValue = v => autocompleteValue.value = v;\n    const focus = () => {\n      if (props.disabled) {\n        return;\n      }\n      focusElement(unwrapEl(input.value));\n    };\n    const blur = () => {\n      if (showDropdownContentComputed.value) {\n        showDropdownContentComputed.value = false;\n      }\n      nextTick(() => {\n        if (props.disabled) {\n          return;\n        }\n        blurElement(unwrapEl(input.value));\n      });\n    };\n    const reset = () => withoutValidation(() => {\n      if (props.multiple) {\n        valueComputed.value = Array.isArray(props.clearValue) ? props.clearValue : [];\n      } else {\n        valueComputed.value = props.clearValue;\n      }\n      searchVModel.value = \"\";\n      emit(\"clear\");\n      resetValidation();\n      nextTick(() => {\n        isInputFocused.value = true;\n      });\n    });\n    const focusAutocompleteInput = e => {\n      if (props.autocomplete && !props.disabled && !props.readonly) {\n        e == null ? void 0 : e.stopImmediatePropagation();\n        isInputFocused.value = true;\n        isOpenSync.value = true;\n      }\n    };\n    const toggleDropdown = e => {\n      if (props.disabled || props.readonly) {\n        return;\n      }\n      if (e.code === \"Space\" && props.autocomplete) {\n        return;\n      }\n      showDropdownContentComputed.value = !showDropdownContentComputed.value;\n    };\n    const deleteLastSelected = () => {\n      if (!Array.isArray(valueComputed.value)) {\n        return;\n      }\n      valueComputed.value = valueComputed.value.slice(0, -1);\n    };\n    const {\n      validate,\n      computedError,\n      computedErrorMessages,\n      withoutValidation,\n      resetValidation\n    } = useValidation(props, emit, {\n      reset,\n      focus,\n      value: valueComputed\n    });\n    return {\n      ...useSelectAria(),\n      input,\n      optionList,\n      searchBar,\n      reset,\n      focus,\n      blur,\n      toggleDropdown,\n      deleteLastSelected,\n      focusAutocompleteInput,\n      tp,\n      t,\n      onInputFocus: onFocus,\n      onInputBlur,\n      focusOptionList,\n      focusSearchBar,\n      searchInput: searchVModel,\n      showSearchInput,\n      hoveredOption,\n      tabIndexComputed,\n      valueString,\n      showClearIcon,\n      toggleIcon,\n      selectOption,\n      selectOrAddOption,\n      selectHoveredOption,\n      focusPreviousOption,\n      focusNextOption,\n      showDropdownContentComputed,\n      handleDropdownOpen,\n      handleDropdownClose,\n      hideAndFocus,\n      toggleIconColor,\n      onHintedSearch,\n      onScrollBottom,\n      clearIconProps,\n      dropdownPropsComputed,\n      visibleSelectedOptions,\n      optionsListPropsComputed,\n      toggleHiddenOptionsState,\n      setAutocompleteValue,\n      inputWrapperPropsComputed,\n      inputWrapperClassComputed,\n      selectContentPropsComputed,\n      openSelectButtonTabIndexComputed,\n      // for e2e tests\n      getOptionByValue,\n      compareOptions,\n      getText\n    };\n  }\n});\nexport { _sfc_main as _ };","map":{"version":3,"names":["VaInputWrapperProps","extractComponentProps","VaInputWrapper","_sfc_main","defineComponent","name","components","VaSelectContent","VaSelectOptionList","VaIcon","VaDropdown","VaDropdownContent","emits","useDropdownableEmits","useValidationEmits","useClearableEmits","props","useComponentPresetProp","useSelectableListProps","useValidationProps","useLoadingProps","useMaxSelectionsProps","useClearableProps","useFormFieldProps","useMaxVisibleOptionsProps","useToggleIconProps","useThrottleProps","useStringValueProps","useAutocompleteProps","useDropdownableProps","modelValue","type","String","Number","Array","Object","Boolean","default","placement","allowCreate","validator","mode","includes","color","multiple","searchable","width","maxHeight","noOptionsText","hideSelected","tabindex","virtualScroller","selectedTopShown","highlightMatchedText","minSearchChars","autoSelectFirstOption","placeholder","searchPlaceholderText","ariaLabel","ariaSearchLabel","ariaClearLabel","search","setup","emit","slots","tp","t","useTranslation","optionList","shallowRef","input","searchBar","isInputFocused","useFocusDeep","getValue","getText","getTrackBy","useSelectableList","onScrollBottom","searchVModel","useSyncProp","showSearchInput","computed","autocomplete","watch","value","hoveredOption","getOptionByValue","isNilValue","optionByValue","options","find","option","warn","JSON","stringify","toggleHiddenOptionsState","isAllOptionsShown","visibleSelectedOptions","hiddenSelectedOptionsAmount","allSelectedOptions","useMaxVisibleOptions","valueComputed","get","isArray","length","at","set","map","valueString","useStringValue","canBeCleared","clearIconProps","onFocus","onBlur","useClearable","showClearIcon","filteredOptions","slice","sort","a","b","isASelected","checkIsOptionSelected","isBSelected","filter","valueItem","compareOptions","option1","option2","one","two","isValueComputedArray","v","selectOption","hideAndFocus","exceedsMaxSelections","addOption","useMaxSelections","ref","maxSelections","isSelected","optionSelected","focusAutocompleteInput","addNewOption","hasAddedOption","_a","some","autocompleteValue","allowedToCreateCheck","selectHoveredOption","isOpenSync","handleDropdownOpen","selectOrAddOption","allowedToCreate","focusPreviousOption","focusNextOption","dropdownProps","useDropdownable","defaultCloseOnValueUpdate","dropdownPropsComputed","closeOnContentClick","stateful","offset","keepAnchorWidth","keyboardNavigation","innerAnchorSelector","showDropdownContentComputed","show","handleDropdownClose","disabled","readonly","scrollToSelected","focusSearchOrOptions","nextTick","validate","focusIfNothingIfFocused","focusSearchBar","focus","focusOptionList","_b","focusFirstOption","onInputBlur","tabIndexComputed","openSelectButtonTabIndexComputed","selected","nothingSelected","scrollTo","scrollToOption","hintedSearchQuery","hintedSearchQueryTimeoutIndex","navigationKeys","onHintedSearch","event","key","isLetter","isDeleteKey","clearTimeout","appropriateOption","toLowerCase","startsWith","setTimeout","optionsListPropsComputed","pick","selectedValue","getSelectedState","toggleIcon","toggleIconColor","useToggleIcon","isFocused","inputWrapperClassComputed","useBem","nowrap","maxVisibleOptions","content","vaInputWrapperProps","filterComponentProps","inputWrapperPropsComputed","error","computedError","errorMessages","computedErrorMessages","focused","selectContentPropsComputed","autocompleteInputValue","useAutocomplete","setAutocompleteValue","focusElement","unwrapEl","blur","blurElement","reset","withoutValidation","clearValue","resetValidation","e","stopImmediatePropagation","toggleDropdown","code","deleteLastSelected","useValidation","useSelectAria","onInputFocus","searchInput"],"sources":["../../../../../src/components/va-select/VaSelect.vue"],"sourcesContent":["<template>\n  <va-dropdown\n    ref=\"dropdown\"\n    v-model=\"showDropdownContentComputed\"\n    class=\"va-select va-select__dropdown va-select-dropdown\"\n    v-bind=\"dropdownPropsComputed\"\n    role=\"combobox\"\n  >\n    <template #anchor>\n      <va-input-wrapper\n        v-bind=\"inputWrapperPropsComputed\"\n        ref=\"input\"\n        class=\"va-select__anchor va-select-anchor__input\"\n        aria-haspopup=\"listbox\"\n        :class=\"inputWrapperClassComputed\"\n        :model-value=\"valueString\"\n        :readonly=\"true\"\n        :aria-label=\"$props.ariaLabel\"\n        :aria-controls=\"popupId\"\n        :aria-owns=\"popupId\"\n        @focus=\"onInputFocus\"\n        @blur=\"onInputBlur\"\n        @keydown.enter=\"toggleDropdown\"\n        @keydown.space.stop.prevent=\"toggleDropdown\"\n      >\n        <template\n          v-for=\"(_, name) in $slots\"\n          :key=\"name\"\n          v-slot:[name]=\"slotScope\"\n        >\n          <slot :name=\"name\" v-bind=\"slotScope\" />\n        </template>\n\n        <template #icon>\n          <va-icon\n            v-if=\"showClearIcon\"\n            role=\"button\"\n            :aria-label=\"tp($props.ariaClearLabel)\"\n            v-bind=\"clearIconProps\"\n            @click.stop=\"reset\"\n            @keydown.enter.stop=\"reset\"\n            @keydown.space.stop=\"reset\"\n          />\n        </template>\n\n        <template #appendInner>\n          <va-icon\n            :color=\"toggleIconColor\"\n            :name=\"toggleIcon\"\n            class=\"va-select__toggle-icon\"\n            role=\"button\"\n            :tabindex=\"openSelectButtonTabIndexComputed\"\n            :aria-expanded=\"showDropdownContentComputed\"\n          />\n        </template>\n\n        <template #default=\"{ ariaAttributes }\">\n          <va-select-content\n            v-bind=\"selectContentPropsComputed\"\n            :ariaAttributes=\"ariaAttributes\"\n            @toggle-hidden=\"toggleHiddenOptionsState\"\n            @autocomplete-input=\"setAutocompleteValue\"\n            @focus-prev=\"focusPreviousOption\"\n            @focus-next=\"focusNextOption\"\n            @select-option=\"selectOrAddOption\"\n            @delete-last-selected=\"deleteLastSelected\"\n            @click=\"focusAutocompleteInput\"\n          >\n            <template\n              v-for=\"(_, name) in $slots\"\n              :key=\"name\"\n              v-slot:[name]=\"slotScope\"\n            >\n              <slot :name=\"name\" v-bind=\"slotScope\" />\n            </template>\n          </va-select-content>\n        </template>\n      </va-input-wrapper>\n    </template>\n\n    <va-dropdown-content\n      class=\"va-select-dropdown__content\"\n      :style=\"{ width: $props.width }\"\n      @keydown.esc=\"hideAndFocus\"\n      role=\"dialog\"\n    >\n      <va-input-wrapper\n        v-if=\"showSearchInput\"\n        ref=\"searchBar\"\n        class=\"va-select-dropdown__content-search-input\"\n        v-model=\"searchInput\"\n        :aria-label=\"tp($props.ariaSearchLabel)\"\n        :tabindex=\"tabIndexComputed\"\n        :placeholder=\"tp($props.searchPlaceholderText)\"\n        preset=\"bordered\"\n        @keydown.up.stop.prevent=\"focusPreviousOption\"\n        @keydown.left.stop.prevent=\"focusPreviousOption\"\n        @keydown.down.stop.prevent=\"focusNextOption\"\n        @keydown.right.stop.prevent=\"focusNextOption\"\n        @keydown.enter.prevent=\"selectOrAddOption\"\n        @focus=\"hoveredOption = null\"\n      />\n      <va-select-option-list\n        ref=\"optionList\"\n        class=\"va-select-dropdown__options-wrapper\"\n        v-model:hoveredOption=\"hoveredOption\"\n        :style=\"{ maxHeight: $props.maxHeight }\"\n        :id=\"popupId\"\n        v-bind=\"optionsListPropsComputed\"\n        @select-option=\"selectHoveredOption\"\n        @no-previous-option-to-hover=\"focusSearchBar\"\n        @keydown.tab.stop.prevent=\"searchBar && searchBar.focus()\"\n        @keydown=\"onHintedSearch\"\n        @scroll-bottom=\"onScrollBottom\"\n        v-slot=\"slotData\"\n      >\n        <slot name=\"option\" v-bind=\"slotData || {}\" />\n      </va-select-option-list>\n    </va-dropdown-content>\n  </va-dropdown>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, shallowRef, computed, watch, nextTick, type PropType, type Ref } from 'vue'\nimport pick from 'lodash/pick.js'\n\nimport {\n  useComponentPresetProp,\n  useSelectableList, useSelectableListProps,\n  useValidation, useValidationProps, useValidationEmits, ValidationProps,\n  useFormFieldProps,\n  useLoadingProps,\n  useMaxSelections, useMaxSelectionsProps,\n  useClearableProps, useClearable, useClearableEmits,\n  useFocusDeep,\n  useTranslation,\n  useBem,\n  useThrottleProps,\n  useDropdownable, useDropdownableEmits, useDropdownableProps, useSyncProp,\n} from '../../composables'\n\nimport { VaInputWrapper } from '../va-input-wrapper'\nimport { VaDropdown, VaDropdownContent } from '../va-dropdown'\nimport { VaIcon } from '../va-icon'\nimport { VaSelectOptionList } from './components/VaSelectOptionList'\nimport { VaSelectContent } from './components/VaSelectContent'\n\nimport { useMaxVisibleOptions, useMaxVisibleOptionsProps } from './hooks/useMaxVisibleOptions'\nimport { useToggleIcon, useToggleIconProps } from './hooks/useToggleIcon'\nimport { useStringValue, useStringValueProps } from './hooks/useStringValue'\nimport { useAutocomplete, useAutocompleteProps } from './hooks/useAutocomplete'\nimport { useSelectAria } from './hooks/useSelectAria'\n\nimport { blurElement, focusElement } from '../../utils/focus'\nimport { unwrapEl } from '../../utils/unwrapEl'\nimport { isNilValue } from '../../utils/isNilValue'\nimport { warn } from '../../utils/console'\n\nimport type { SelectOption } from './types'\nimport type { DropdownOffsetProp } from '../va-dropdown/types'\nimport { extractComponentProps, filterComponentProps } from '../../utils/component-options'\n\nconst VaInputWrapperProps = extractComponentProps(VaInputWrapper)\n\nexport default defineComponent({\n  name: 'VaSelect',\n\n  components: {\n    VaSelectContent,\n    VaSelectOptionList,\n    VaIcon,\n    VaDropdown,\n    VaDropdownContent,\n    VaInputWrapper,\n  },\n\n  emits: [\n    'update:modelValue',\n    'update-search',\n    'create-new',\n    'scroll-bottom',\n    'update:search',\n    ...useDropdownableEmits,\n    ...useValidationEmits,\n    ...useClearableEmits,\n  ],\n\n  props: {\n    ...VaInputWrapperProps,\n    ...useComponentPresetProp,\n    ...useSelectableListProps,\n    ...useValidationProps as ValidationProps<SelectOption>,\n    ...useLoadingProps,\n    ...useMaxSelectionsProps,\n    ...useClearableProps,\n    ...useFormFieldProps,\n    ...useMaxVisibleOptionsProps,\n    ...useToggleIconProps,\n    ...useThrottleProps,\n    ...useStringValueProps,\n    ...useAutocompleteProps,\n    ...useDropdownableProps,\n\n    modelValue: {\n      type: [String, Number, Array, Object, Boolean] as PropType<SelectOption | SelectOption[]>,\n      default: '',\n    },\n\n    // Dropdown placement\n    placement: {\n      ...useDropdownableProps.placement,\n      default: 'bottom',\n    },\n\n    allowCreate: {\n      type: [Boolean, String] as PropType<boolean | 'unique'>,\n      default: false,\n      validator: (mode: string | boolean) => [true, false, 'unique'].includes(mode),\n    },\n\n    color: { type: String, default: 'primary' },\n    multiple: { type: Boolean, default: false },\n    searchable: { type: Boolean, default: false },\n    width: { type: String, default: '100%' },\n    maxHeight: { type: String, default: '256px' },\n    noOptionsText: { type: String, default: '$t:noOptions' },\n    hideSelected: { type: Boolean, default: false },\n    tabindex: { type: [String, Number], default: 0 },\n    virtualScroller: { type: Boolean, default: false },\n    selectedTopShown: { type: Boolean, default: false },\n    highlightMatchedText: { type: Boolean, default: true },\n    minSearchChars: { type: Number, default: 0 },\n    autoSelectFirstOption: { type: Boolean, default: false },\n\n    // Input style\n    placeholder: { type: String, default: '' },\n    searchPlaceholderText: { type: String, default: '$t:search' },\n\n    ariaLabel: { type: String, default: '$t:select' },\n    ariaSearchLabel: { type: String, default: '$t:optionsFilter' },\n    ariaClearLabel: { type: String, default: '$t:reset' },\n\n    search: { type: String, default: undefined },\n  },\n\n  setup (props, { emit, slots }) {\n    const { tp, t } = useTranslation()\n\n    const optionList = shallowRef<typeof VaSelectOptionList>()\n    const input = shallowRef<typeof VaInputWrapper>()\n    const searchBar = shallowRef<typeof VaInputWrapper>()\n\n    const isInputFocused = useFocusDeep(input as any)\n\n    const { getValue, getText, getTrackBy } = useSelectableList(props)\n\n    const onScrollBottom = () => emit('scroll-bottom')\n\n    const [searchVModel] = useSyncProp('search', props, emit, '')\n    const showSearchInput = computed(() => props.searchable || (props.allowCreate && !props.autocomplete))\n\n    watch(searchVModel, (value) => {\n      emit('update-search', value)\n      if (!props.autocomplete) {\n        hoveredOption.value = null\n      }\n    })\n\n    const getOptionByValue = (value: SelectOption): SelectOption => {\n      // if value is an object, it should be selectable option itself\n      if (isNilValue(value) || typeof value === 'object') { return value }\n\n      const optionByValue = props.options.find((option) => value === getValue(option))\n\n      if (optionByValue === undefined) {\n        warn(`[VaSelect]: can not find option in options list (${JSON.stringify(props.options)}) by provided value (${JSON.stringify(value)})!`)\n\n        return value\n      }\n\n      return optionByValue\n    }\n\n    const {\n      toggleHiddenOptionsState,\n      isAllOptionsShown,\n      visibleSelectedOptions,\n      hiddenSelectedOptionsAmount,\n      allSelectedOptions,\n    } = useMaxVisibleOptions(props, getOptionByValue)\n\n    // select value\n    const valueComputed = computed<SelectOption | SelectOption[]>({\n      get () {\n        if (props.multiple) { return allSelectedOptions.value }\n\n        const value = getOptionByValue(props.modelValue)\n\n        if (Array.isArray(value)) {\n          warn('Model value should be a string, number, boolean or an object for a single Select.')\n\n          if (value.length) {\n            return value.at(-1)\n          }\n        }\n\n        return value\n      },\n\n      set (option: SelectOption | SelectOption[]) {\n        if (Array.isArray(option)) {\n          emit('update:modelValue', option.map(getValue))\n        } else {\n          emit('update:modelValue', getValue(option))\n        }\n      },\n    })\n\n    const valueString = useStringValue(props, visibleSelectedOptions, getText)\n\n    // icons\n    const {\n      canBeCleared,\n      clearIconProps,\n      onFocus,\n      onBlur,\n    } = useClearable(props, valueComputed)\n\n    const showClearIcon = computed(() => {\n      if (!canBeCleared.value) { return false }\n      if (props.multiple && Array.isArray(valueComputed.value)) { return !!valueComputed.value.length }\n      return true\n    })\n\n    // options\n    const filteredOptions = computed(() => {\n      if (!props.options) { return [] }\n\n      if (props.selectedTopShown) {\n        return props.options.slice().sort((a, b) => {\n          const isASelected = checkIsOptionSelected(a)\n          const isBSelected = checkIsOptionSelected(b)\n\n          if (isASelected && isBSelected) { return 0 }\n          if (isASelected && !isBSelected) { return -1 }\n\n          return 1\n        })\n      }\n\n      if (props.hideSelected) {\n        return props.options.filter((option) => !checkIsOptionSelected(option))\n      }\n\n      return props.options\n    })\n\n    const checkIsOptionSelected = (option: SelectOption) => {\n      if (isNilValue(valueComputed.value)) { return false }\n\n      if (Array.isArray(valueComputed.value)) {\n        return !isNilValue(valueComputed.value.find((valueItem) => compareOptions(valueItem, option)))\n      }\n\n      return compareOptions(valueComputed.value, option)\n    }\n\n    const compareOptions = (option1: SelectOption, option2: SelectOption) => {\n      const one = getValue(option1)\n      const two = getValue(option2)\n\n      // identity check works nice for strings and exact matches.\n      if (one === two) {\n        return true\n      }\n      if (typeof one === 'string' && typeof two === 'string') {\n        return one === two\n      }\n      if (one === null || two === null) {\n        return false\n      }\n      if (typeof one === 'object' && typeof two === 'object') {\n        return getTrackBy(one) === getTrackBy(two)\n      }\n\n      return false\n    }\n\n    const isValueComputedArray = (v: Ref<SelectOption | SelectOption[]>): v is Ref<SelectOption[]> => Array.isArray(v.value)\n\n    const selectOption = (option: SelectOption) => {\n      if (hoveredOption.value === null) {\n        hideAndFocus()\n        return\n      }\n\n      if (showSearchInput.value) {\n        searchVModel.value = ''\n      }\n\n      if (props.multiple && isValueComputedArray(valueComputed)) {\n        const { exceedsMaxSelections, addOption } = useMaxSelections(valueComputed, ref(props.maxSelections))\n\n        const isSelected = checkIsOptionSelected(option)\n\n        if (isSelected) {\n          // Unselect\n          valueComputed.value = valueComputed.value.filter((optionSelected) => !compareOptions(option, optionSelected))\n        } else {\n          if (exceedsMaxSelections()) { return }\n          valueComputed.value = addOption(option)\n        }\n      } else {\n        valueComputed.value = typeof option !== 'object' ? option : { ...option }\n        hideAndFocus()\n      }\n\n      focusAutocompleteInput()\n    }\n\n    const addNewOption = () => {\n      // Do not emit if option already exist and allow create is `unique`\n      const hasAddedOption = props.options?.some((option: SelectOption) => [searchVModel.value, autocompleteValue.value].includes(getText(option)))\n\n      const allowedToCreateCheck = !((props.allowCreate === 'unique' || props.autocomplete) && hasAddedOption)\n      if (allowedToCreateCheck) {\n        emit('create-new', searchVModel.value || autocompleteValue.value)\n\n        searchVModel.value = ''\n        autocompleteValue.value = ''\n      }\n    }\n\n    // Hovered options\n\n    const hoveredOption = ref<SelectOption | null>(null)\n\n    const selectHoveredOption = () => {\n      if (isNilValue(hoveredOption.value)) { return }\n\n      if (!isOpenSync.value) {\n        // We can not select options if they are hidden\n        handleDropdownOpen()\n        return\n      }\n\n      selectOption(hoveredOption.value)\n    }\n\n    const selectOrAddOption = () => {\n      const allowedToCreate = !!props.allowCreate && (searchVModel.value || autocompleteValue.value)\n\n      if (hoveredOption.value !== null) {\n        selectHoveredOption()\n      } else if (allowedToCreate) {\n        addNewOption()\n      }\n    }\n\n    const focusPreviousOption = () => optionList.value?.focusPreviousOption()\n\n    const focusNextOption = () => optionList.value?.focusNextOption()\n\n    // Dropdown content\n\n    const { isOpenSync, dropdownProps } = useDropdownable(props, emit, {\n      defaultCloseOnValueUpdate: computed(() => !props.multiple),\n    })\n\n    const dropdownPropsComputed = computed(() => ({\n      ...dropdownProps.value,\n      closeOnContentClick: false,\n      stateful: false,\n      offset: [1, 0] as DropdownOffsetProp,\n      keepAnchorWidth: true,\n      keyboardNavigation: true,\n      innerAnchorSelector: '.va-input-wrapper__field',\n    }))\n\n    const showDropdownContentComputed = computed({\n      get: () => isOpenSync.value,\n      set: (show: boolean) => {\n        show ? handleDropdownOpen() : handleDropdownClose()\n      },\n    })\n\n    const handleDropdownOpen = () => {\n      if (props.disabled || props.readonly) { return }\n\n      isOpenSync.value = true\n      scrollToSelected()\n      focusSearchOrOptions()\n    }\n\n    const handleDropdownClose = () => {\n      isOpenSync.value = false\n      if (!props.autocomplete) {\n        searchVModel.value = ''\n      }\n      nextTick(() => {\n        validate()\n        isInputFocused.focusIfNothingIfFocused()\n      })\n    }\n\n    const hideAndFocus = () => {\n      handleDropdownClose()\n      isInputFocused.value = true\n    }\n\n    const focusSearchBar = () => {\n      searchBar.value?.focus()\n    }\n\n    const focusOptionList = () => {\n      optionList.value?.focus()\n      !props.modelValue && optionList.value?.focusFirstOption()\n    }\n\n    const focusSearchOrOptions = async () => {\n      await nextTick()\n\n      if (showSearchInput.value) {\n        focusSearchBar()\n      } else {\n        focusOptionList()\n      }\n    }\n\n    const onInputBlur = () => {\n      if (showDropdownContentComputed.value) { return }\n\n      onBlur()\n\n      isInputFocused.value\n        ? isInputFocused.value = false\n        : validate()\n    }\n\n    const tabIndexComputed = computed(() => props.disabled ? -1 : props.tabindex)\n    const openSelectButtonTabIndexComputed = computed(() => props.disabled || props.autocomplete ? -1 : 0)\n\n    const scrollToSelected = () => {\n      const selected = valueComputed.value\n      const nothingSelected = typeof selected !== 'object' && Array.isArray(selected) && !selected.length\n\n      if (nothingSelected) { return }\n\n      const scrollTo = Array.isArray(selected) ? selected[selected.length - 1] : selected\n      hoveredOption.value = scrollTo\n      nextTick(() => optionList.value?.scrollToOption(scrollTo))\n    }\n\n    // Hinted search\n\n    let hintedSearchQuery = ''\n    let hintedSearchQueryTimeoutIndex!: ReturnType<typeof setTimeout>\n    const navigationKeys = ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'Enter', ' ']\n\n    // Hinted search - hover option if you typing it's value on select without search-bar\n    const onHintedSearch = (event: KeyboardEvent) => {\n      if (navigationKeys.some(key => key === event.key)) {\n        return\n      }\n\n      const isLetter: boolean = event.key.length === 1\n      const isDeleteKey: boolean = event.key === 'Backspace' || event.key === 'Delete'\n\n      clearTimeout(hintedSearchQueryTimeoutIndex)\n\n      if (isDeleteKey) {\n        // Remove last letter from query\n        hintedSearchQuery = hintedSearchQuery ? hintedSearchQuery.slice(0, -1) : ''\n      } else if (isLetter) {\n        // Add every new letter to the query\n        hintedSearchQuery += event.key\n      }\n\n      if (showSearchInput.value) {\n        searchVModel.value = hintedSearchQuery\n        return\n      }\n\n      // Search for an option that matches the query\n      if (hintedSearchQuery) {\n        const appropriateOption = props.options.find(option => getText(option).toLowerCase().startsWith(hintedSearchQuery.toLowerCase()))\n        if (appropriateOption) {\n          hoveredOption.value = appropriateOption\n        }\n      }\n\n      hintedSearchQueryTimeoutIndex = setTimeout(() => { hintedSearchQuery = '' }, 1000)\n    }\n\n    const optionsListPropsComputed = computed(() => ({\n      ...pick(props, ['textBy', 'trackBy', 'groupBy', 'valueBy', 'disabledBy', 'color', 'virtualScroller', 'highlightMatchedText', 'minSearchChars', 'delay', 'selectedTopShown']),\n      autoSelectFirstOption: props.autoSelectFirstOption || props.autocomplete,\n      search: searchVModel.value || autocompleteValue.value,\n      tabindex: tabIndexComputed.value,\n      selectedValue: valueComputed.value,\n      options: filteredOptions.value,\n      getSelectedState: checkIsOptionSelected,\n      noOptionsText: tp(props.noOptionsText),\n    }))\n\n    const { toggleIcon, toggleIconColor } = useToggleIcon(props, isOpenSync)\n\n    // input wrapper\n    const isFocused = computed(() => isInputFocused.value || isOpenSync.value)\n    const inputWrapperClassComputed = useBem('va-select-anchor', () => ({\n      nowrap: !!(props.maxVisibleOptions && !slots.content),\n    }))\n    const vaInputWrapperProps = filterComponentProps(VaInputWrapperProps)\n    const inputWrapperPropsComputed = computed(() => ({\n      ...vaInputWrapperProps.value,\n      error: computedError.value,\n      errorMessages: computedErrorMessages.value,\n      focused: isFocused.value,\n      'aria-label': props.ariaLabel || (props.modelValue ? `${t('selectedOption')}: ${props.modelValue}` : t('noSelectedOption')),\n    }))\n\n    // select content\n    const selectContentPropsComputed = computed(() => ({\n      ...pick(props, ['placeholder', 'autocomplete', 'multiple', 'disabled', 'readonly']),\n      tabindex: tabIndexComputed.value,\n      value: visibleSelectedOptions.value,\n      valueString: valueString.value,\n      hiddenSelectedOptionsAmount: hiddenSelectedOptionsAmount.value,\n      isAllOptionsShown: isAllOptionsShown.value,\n      focused: isInputFocused.value,\n      autocompleteInputValue: autocompleteValue.value,\n      getText,\n    }))\n\n    // autocomplete\n    const autocompleteValue = useAutocomplete(searchVModel, props, visibleSelectedOptions, isOpenSync, getText)\n    const setAutocompleteValue = (v: string) => (autocompleteValue.value = v)\n\n    // public methods\n    const focus = () => {\n      if (props.disabled) { return }\n      focusElement(unwrapEl(input.value))\n    }\n\n    const blur = () => {\n      if (showDropdownContentComputed.value) {\n        showDropdownContentComputed.value = false\n      }\n\n      nextTick(() => {\n        if (props.disabled) { return }\n        blurElement(unwrapEl(input.value))\n      })\n    }\n\n    const reset = () => withoutValidation(() => {\n      if (props.multiple) {\n        valueComputed.value = Array.isArray(props.clearValue) ? props.clearValue : []\n      } else {\n        valueComputed.value = props.clearValue\n      }\n\n      searchVModel.value = ''\n      emit('clear')\n      resetValidation()\n      nextTick(() => {\n        isInputFocused.value = true\n      })\n    })\n\n    const focusAutocompleteInput = (e?: Event) => {\n      if (props.autocomplete && !props.disabled && !props.readonly) {\n        e?.stopImmediatePropagation()\n\n        isInputFocused.value = true\n        isOpenSync.value = true\n      }\n    }\n\n    const toggleDropdown = (e: KeyboardEvent) => {\n      if (props.disabled || props.readonly) { return }\n\n      if (e.code === 'Space' && props.autocomplete) { return }\n\n      showDropdownContentComputed.value = !showDropdownContentComputed.value\n    }\n\n    const deleteLastSelected = () => {\n      if (!Array.isArray(valueComputed.value)) { return }\n\n      valueComputed.value = valueComputed.value.slice(0, -1)\n    }\n\n    const {\n      validate,\n      computedError,\n      computedErrorMessages,\n      withoutValidation,\n      resetValidation,\n    } = useValidation(props, emit, { reset, focus, value: valueComputed })\n\n    return {\n      ...useSelectAria(),\n      input,\n      optionList,\n      searchBar,\n\n      reset,\n      focus,\n      blur,\n      toggleDropdown,\n      deleteLastSelected,\n\n      focusAutocompleteInput,\n\n      tp,\n      t,\n\n      onInputFocus: onFocus,\n      onInputBlur,\n      focusOptionList,\n      focusSearchBar,\n      searchInput: searchVModel,\n      showSearchInput,\n      hoveredOption,\n      tabIndexComputed,\n      valueString,\n      showClearIcon,\n      toggleIcon,\n      selectOption,\n      selectOrAddOption,\n      selectHoveredOption,\n      focusPreviousOption,\n      focusNextOption,\n      showDropdownContentComputed,\n      handleDropdownOpen,\n      handleDropdownClose,\n      hideAndFocus,\n      toggleIconColor,\n      onHintedSearch,\n      onScrollBottom,\n      clearIconProps,\n      dropdownPropsComputed,\n      visibleSelectedOptions,\n      optionsListPropsComputed,\n      toggleHiddenOptionsState,\n      setAutocompleteValue,\n\n      inputWrapperPropsComputed,\n      inputWrapperClassComputed,\n      selectContentPropsComputed,\n      openSelectButtonTabIndexComputed,\n\n      // for e2e tests\n      getOptionByValue,\n      compareOptions,\n      getText,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import \"variables\";\n\n.va-select {\n  & .va-input-wrapper__text {\n    line-height: normal;\n    flex-wrap: wrap;\n  }\n}\n\n.va-select-anchor {\n  &__input {\n    cursor: var(--va-select-cursor);\n    flex: 1;\n  }\n\n  &--nowrap {\n    .va-input-wrapper__text {\n      flex-wrap: nowrap;\n    }\n  }\n}\n\n.va-select-dropdown {\n  &__content {\n    overflow: hidden;\n    border-top-right-radius: 0;\n    border-top-left-radius: 0;\n    padding: 0;\n  }\n\n  &__content-search-input {\n    min-width: auto;\n    width: 100%;\n  }\n\n  &__options-wrapper {\n    background: var(--va-select-dropdown-background);\n    overflow-y: auto;\n\n    @include va-scroll(var(--va-background-element));\n  }\n}\n</style>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkKA,MAAMA,mBAAA,GAAsBC,qBAAA,CAAsBC,cAAc;AAEhE,MAAAC,SAAA,GAAeC,eAAA,CAAgB;EAC7BC,IAAA,EAAM;EAENC,UAAA,EAAY;IACVC,eAAA;IACAC,kBAAA;IACAC,MAAA;IACAC,UAAA;IACAC,iBAAA;IACAT;EACF;EAEAU,KAAA,EAAO,CACL,qBACA,iBACA,cACA,iBACA,iBACA,GAAGC,oBAAA,EACH,GAAGC,kBAAA,EACH,GAAGC,iBAAA,CACL;EAEAC,KAAA,EAAO;IACL,GAAGhB,mBAAA;IACH,GAAGiB,sBAAA;IACH,GAAGC,sBAAA;IACH,GAAGC,kBAAA;IACH,GAAGC,eAAA;IACH,GAAGC,qBAAA;IACH,GAAGC,iBAAA;IACH,GAAGC,iBAAA;IACH,GAAGC,yBAAA;IACH,GAAGC,kBAAA;IACH,GAAGC,gBAAA;IACH,GAAGC,mBAAA;IACH,GAAGC,oBAAA;IACH,GAAGC,oBAAA;IAEHC,UAAA,EAAY;MACVC,IAAA,EAAM,CAACC,MAAA,EAAQC,MAAA,EAAQC,KAAA,EAAOC,MAAA,EAAQC,OAAO;MAC7CC,OAAA,EAAS;IACX;IAAA;IAGAC,SAAA,EAAW;MACT,GAAGT,oBAAA,CAAqBS,SAAA;MACxBD,OAAA,EAAS;IACX;IAEAE,WAAA,EAAa;MACXR,IAAA,EAAM,CAACK,OAAA,EAASJ,MAAM;MACtBK,OAAA,EAAS;MACTG,SAAA,EAAYC,IAAA,IAA2B,CAAC,MAAM,OAAO,QAAQ,EAAEC,QAAA,CAASD,IAAI;IAC9E;IAEAE,KAAA,EAAO;MAAEZ,IAAA,EAAMC,MAAA;MAAQK,OAAA,EAAS;IAAU;IAC1CO,QAAA,EAAU;MAAEb,IAAA,EAAMK,OAAA;MAASC,OAAA,EAAS;IAAM;IAC1CQ,UAAA,EAAY;MAAEd,IAAA,EAAMK,OAAA;MAASC,OAAA,EAAS;IAAM;IAC5CS,KAAA,EAAO;MAAEf,IAAA,EAAMC,MAAA;MAAQK,OAAA,EAAS;IAAO;IACvCU,SAAA,EAAW;MAAEhB,IAAA,EAAMC,MAAA;MAAQK,OAAA,EAAS;IAAQ;IAC5CW,aAAA,EAAe;MAAEjB,IAAA,EAAMC,MAAA;MAAQK,OAAA,EAAS;IAAe;IACvDY,YAAA,EAAc;MAAElB,IAAA,EAAMK,OAAA;MAASC,OAAA,EAAS;IAAM;IAC9Ca,QAAA,EAAU;MAAEnB,IAAA,EAAM,CAACC,MAAA,EAAQC,MAAM;MAAGI,OAAA,EAAS;IAAE;IAC/Cc,eAAA,EAAiB;MAAEpB,IAAA,EAAMK,OAAA;MAASC,OAAA,EAAS;IAAM;IACjDe,gBAAA,EAAkB;MAAErB,IAAA,EAAMK,OAAA;MAASC,OAAA,EAAS;IAAM;IAClDgB,oBAAA,EAAsB;MAAEtB,IAAA,EAAMK,OAAA;MAASC,OAAA,EAAS;IAAK;IACrDiB,cAAA,EAAgB;MAAEvB,IAAA,EAAME,MAAA;MAAQI,OAAA,EAAS;IAAE;IAC3CkB,qBAAA,EAAuB;MAAExB,IAAA,EAAMK,OAAA;MAASC,OAAA,EAAS;IAAM;IAAA;IAGvDmB,WAAA,EAAa;MAAEzB,IAAA,EAAMC,MAAA;MAAQK,OAAA,EAAS;IAAG;IACzCoB,qBAAA,EAAuB;MAAE1B,IAAA,EAAMC,MAAA;MAAQK,OAAA,EAAS;IAAY;IAE5DqB,SAAA,EAAW;MAAE3B,IAAA,EAAMC,MAAA;MAAQK,OAAA,EAAS;IAAY;IAChDsB,eAAA,EAAiB;MAAE5B,IAAA,EAAMC,MAAA;MAAQK,OAAA,EAAS;IAAmB;IAC7DuB,cAAA,EAAgB;MAAE7B,IAAA,EAAMC,MAAA;MAAQK,OAAA,EAAS;IAAW;IAEpDwB,MAAA,EAAQ;MAAE9B,IAAA,EAAMC,MAAA;MAAQK,OAAA,EAAS;IAAU;EAC7C;EAEAyB,MAAO9C,KAAA,EAAO;IAAE+C,IAAA;IAAMC;EAAA,GAAS;IAC7B,MAAM;MAAEC,EAAA;MAAIC;IAAE,IAAIC,cAAA,CAAe;IAEjC,MAAMC,UAAA,GAAaC,UAAA;IACnB,MAAMC,KAAA,GAAQD,UAAA;IACd,MAAME,SAAA,GAAYF,UAAA;IAEZ,MAAAG,cAAA,GAAiBC,YAAA,CAAaH,KAAY;IAEhD,MAAM;MAAEI,QAAA;MAAUC,OAAA;MAASC;IAAW,IAAIC,iBAAA,CAAkB7D,KAAK;IAE3D,MAAA8D,cAAA,GAAiBA,CAAA,KAAMf,IAAA,CAAK,eAAe;IAEjD,MAAM,CAACgB,YAAY,IAAIC,WAAA,CAAY,UAAUhE,KAAA,EAAO+C,IAAA,EAAM,EAAE;IACtD,MAAAkB,eAAA,GAAkBC,QAAA,CAAS,MAAMlE,KAAA,CAAM6B,UAAA,IAAe7B,KAAA,CAAMuB,WAAA,IAAe,CAACvB,KAAA,CAAMmE,YAAa;IAE/FC,KAAA,CAAAL,YAAA,EAAeM,KAAA,IAAU;MAC7BtB,IAAA,CAAK,iBAAiBsB,KAAK;MACvB,KAACrE,KAAA,CAAMmE,YAAA,EAAc;QACvBG,aAAA,CAAcD,KAAA,GAAQ;MACxB;IAAA,CACD;IAEK,MAAAE,gBAAA,GAAoBF,KAAA,IAAsC;MAE9D,IAAIG,UAAA,CAAWH,KAAK,KAAK,OAAOA,KAAA,KAAU,UAAU;QAAS,OAAAA,KAAA;MAAM;MAE7D,MAAAI,aAAA,GAAgBzE,KAAA,CAAM0E,OAAA,CAAQC,IAAA,CAAMC,MAAA,IAAWP,KAAA,KAAUX,QAAA,CAASkB,MAAM,CAAC;MAE/E,IAAIH,aAAA,KAAkB,QAAW;QAC1BI,IAAA,qDAAoDC,IAAA,CAAKC,SAAA,CAAU/E,KAAA,CAAM0E,OAAO,yBAAyBI,IAAA,CAAKC,SAAA,CAAUV,KAAK,KAAK;QAEhI,OAAAA,KAAA;MACT;MAEO,OAAAI,aAAA;IAAA;IAGH;MACJO,wBAAA;MACAC,iBAAA;MACAC,sBAAA;MACAC,2BAAA;MACAC;IAAA,IACEC,oBAAA,CAAqBrF,KAAA,EAAOuE,gBAAgB;IAGhD,MAAMe,aAAA,GAAgBpB,QAAA,CAAwC;MAC5DqB,IAAA,EAAO;QACL,IAAIvF,KAAA,CAAM4B,QAAA,EAAU;UAAE,OAAOwD,kBAAA,CAAmBf,KAAA;QAAM;QAEhD,MAAAA,KAAA,GAAQE,gBAAA,CAAiBvE,KAAA,CAAMc,UAAU;QAE3C,IAAAI,KAAA,CAAMsE,OAAA,CAAQnB,KAAK,GAAG;UACxBQ,IAAA,CAAK,mFAAmF;UAExF,IAAIR,KAAA,CAAMoB,MAAA,EAAQ;YACT,OAAApB,KAAA,CAAMqB,EAAA,CAAG,EAAE;UACpB;QACF;QAEO,OAAArB,KAAA;MACT;MAEAsB,IAAKf,MAAA,EAAuC;QACtC,IAAA1D,KAAA,CAAMsE,OAAA,CAAQZ,MAAM,GAAG;UACzB7B,IAAA,CAAK,qBAAqB6B,MAAA,CAAOgB,GAAA,CAAIlC,QAAQ,CAAC;QAAA,OACzC;UACAX,IAAA,sBAAqBW,QAAA,CAASkB,MAAM,CAAC;QAC5C;MACF;IAAA,CACD;IAED,MAAMiB,WAAA,GAAcC,cAAA,CAAe9F,KAAA,EAAOkF,sBAAA,EAAwBvB,OAAO;IAGnE;MACJoC,YAAA;MACAC,cAAA;MACAC,OAAA;MACAC;IAAA,IACEC,YAAA,CAAanG,KAAA,EAAOsF,aAAa;IAE/B,MAAAc,aAAA,GAAgBlC,QAAA,CAAS,MAAM;MAC/B,KAAC6B,YAAA,CAAa1B,KAAA,EAAO;QAAS;MAAM;MACxC,IAAIrE,KAAA,CAAM4B,QAAA,IAAYV,KAAA,CAAMsE,OAAA,CAAQF,aAAA,CAAcjB,KAAK,GAAG;QAAS,QAAC,CAACiB,aAAA,CAAcjB,KAAA,CAAMoB,MAAA;MAAO;MACzF;IAAA,CACR;IAGK,MAAAY,eAAA,GAAkBnC,QAAA,CAAS,MAAM;MACjC,KAAClE,KAAA,CAAM0E,OAAA,EAAS;QAAE,OAAO;MAAG;MAEhC,IAAI1E,KAAA,CAAMoC,gBAAA,EAAkB;QAC1B,OAAOpC,KAAA,CAAM0E,OAAA,CAAQ4B,KAAA,GAAQC,IAAA,CAAK,CAACC,CAAA,EAAGC,CAAA,KAAM;UACpC,MAAAC,WAAA,GAAcC,qBAAA,CAAsBH,CAAC;UACrC,MAAAI,WAAA,GAAcD,qBAAA,CAAsBF,CAAC;UAE3C,IAAIC,WAAA,IAAeE,WAAA,EAAa;YAAS;UAAE;UACvC,IAAAF,WAAA,IAAe,CAACE,WAAA,EAAa;YAAS;UAAG;UAEtC;QAAA,CACR;MACH;MAEA,IAAI5G,KAAA,CAAMiC,YAAA,EAAc;QACf,OAAAjC,KAAA,CAAM0E,OAAA,CAAQmC,MAAA,CAAQjC,MAAA,IAAW,CAAC+B,qBAAA,CAAsB/B,MAAM,CAAC;MACxE;MAEA,OAAO5E,KAAA,CAAM0E,OAAA;IAAA,CACd;IAEK,MAAAiC,qBAAA,GAAyB/B,MAAA,IAAyB;MAClD,IAAAJ,UAAA,CAAWc,aAAA,CAAcjB,KAAK,GAAG;QAAS;MAAM;MAEpD,IAAInD,KAAA,CAAMsE,OAAA,CAAQF,aAAA,CAAcjB,KAAK,GAAG;QAC/B,QAACG,UAAA,CAAWc,aAAA,CAAcjB,KAAA,CAAMM,IAAA,CAAMmC,SAAA,IAAcC,cAAA,CAAeD,SAAA,EAAWlC,MAAM,CAAC,CAAC;MAC/F;MAEO,OAAAmC,cAAA,CAAezB,aAAA,CAAcjB,KAAA,EAAOO,MAAM;IAAA;IAG7C,MAAAmC,cAAA,GAAiBA,CAACC,OAAA,EAAuBC,OAAA,KAA0B;MACjE,MAAAC,GAAA,GAAMxD,QAAA,CAASsD,OAAO;MACtB,MAAAG,GAAA,GAAMzD,QAAA,CAASuD,OAAO;MAG5B,IAAIC,GAAA,KAAQC,GAAA,EAAK;QACR;MACT;MACA,IAAI,OAAOD,GAAA,KAAQ,YAAY,OAAOC,GAAA,KAAQ,UAAU;QACtD,OAAOD,GAAA,KAAQC,GAAA;MACjB;MACI,IAAAD,GAAA,KAAQ,QAAQC,GAAA,KAAQ,MAAM;QACzB;MACT;MACA,IAAI,OAAOD,GAAA,KAAQ,YAAY,OAAOC,GAAA,KAAQ,UAAU;QACtD,OAAOvD,UAAA,CAAWsD,GAAG,MAAMtD,UAAA,CAAWuD,GAAG;MAC3C;MAEO;IAAA;IAGT,MAAMC,oBAAA,GAAwBC,CAAA,IAAoEnG,KAAA,CAAMsE,OAAA,CAAQ6B,CAAA,CAAEhD,KAAK;IAEjH,MAAAiD,YAAA,GAAgB1C,MAAA,IAAyB;MACzC,IAAAN,aAAA,CAAcD,KAAA,KAAU,MAAM;QACnBkD,YAAA;QACb;MACF;MAEA,IAAItD,eAAA,CAAgBI,KAAA,EAAO;QACzBN,YAAA,CAAaM,KAAA,GAAQ;MACvB;MAEA,IAAIrE,KAAA,CAAM4B,QAAA,IAAYwF,oBAAA,CAAqB9B,aAAa,GAAG;QACnD;UAAEkC,oBAAA;UAAsBC;QAAU,IAAIC,gBAAA,CAAiBpC,aAAA,EAAeqC,GAAA,CAAI3H,KAAA,CAAM4H,aAAa,CAAC;QAE9F,MAAAC,UAAA,GAAalB,qBAAA,CAAsB/B,MAAM;QAE/C,IAAIiD,UAAA,EAAY;UAEAvC,aAAA,CAAAjB,KAAA,GAAQiB,aAAA,CAAcjB,KAAA,CAAMwC,MAAA,CAAQiB,cAAA,IAAmB,CAACf,cAAA,CAAenC,MAAA,EAAQkD,cAAc,CAAC;QAAA,OACvG;UACL,IAAIN,oBAAA,IAAwB;YAAE;UAAO;UACvBlC,aAAA,CAAAjB,KAAA,GAAQoD,SAAA,CAAU7C,MAAM;QACxC;MAAA,OACK;QACLU,aAAA,CAAcjB,KAAA,GAAQ,OAAOO,MAAA,KAAW,WAAWA,MAAA,GAAS;UAAE,GAAGA;QAAA;QACpD2C,YAAA;MACf;MAEuBQ,sBAAA;IAAA;IAGzB,MAAMC,YAAA,GAAeA,CAAA,KAAM;;MAEzB,MAAMC,cAAA,IAAiBC,EAAA,GAAAlI,KAAA,CAAM0E,OAAA,KAAN,gBAAAwD,EAAA,CAAeC,IAAA,CAAMvD,MAAA,IAAyB,CAACb,YAAA,CAAaM,KAAA,EAAO+D,iBAAA,CAAkB/D,KAAK,EAAE3C,QAAA,CAASiC,OAAA,CAAQiB,MAAM,CAAC;MAE3I,MAAMyD,oBAAA,GAAuB,GAAGrI,KAAA,CAAMuB,WAAA,KAAgB,YAAYvB,KAAA,CAAMmE,YAAA,KAAiB8D,cAAA;MACzF,IAAII,oBAAA,EAAsB;QACxBtF,IAAA,CAAK,cAAcgB,YAAA,CAAaM,KAAA,IAAS+D,iBAAA,CAAkB/D,KAAK;QAEhEN,YAAA,CAAaM,KAAA,GAAQ;QACrB+D,iBAAA,CAAkB/D,KAAA,GAAQ;MAC5B;IAAA;IAKI,MAAAC,aAAA,GAAgBqD,GAAA,CAAyB,IAAI;IAEnD,MAAMW,mBAAA,GAAsBA,CAAA,KAAM;MAC5B,IAAA9D,UAAA,CAAWF,aAAA,CAAcD,KAAK,GAAG;QAAE;MAAO;MAE1C,KAACkE,UAAA,CAAWlE,KAAA,EAAO;QAEFmE,kBAAA;QACnB;MACF;MAEAlB,YAAA,CAAahD,aAAA,CAAcD,KAAK;IAAA;IAGlC,MAAMoE,iBAAA,GAAoBA,CAAA,KAAM;MAC9B,MAAMC,eAAA,GAAkB,CAAC,CAAC1I,KAAA,CAAMuB,WAAA,KAAgBwC,YAAA,CAAaM,KAAA,IAAS+D,iBAAA,CAAkB/D,KAAA;MAEpF,IAAAC,aAAA,CAAcD,KAAA,KAAU,MAAM;QACZiE,mBAAA;iBACXI,eAAA,EAAiB;QACbV,YAAA;MACf;IAAA;IAGF,MAAMW,mBAAA,GAAsBA,CAAA,KAAM;;MAAA,QAAAT,EAAA,GAAA9E,UAAA,CAAWiB,KAAA,KAAX,gBAAA6D,EAAA,CAAkBS,mBAAA;IAAA;IAEpD,MAAMC,eAAA,GAAkBA,CAAA,KAAM;;MAAA,QAAAV,EAAA,GAAA9E,UAAA,CAAWiB,KAAA,KAAX,gBAAA6D,EAAA,CAAkBU,eAAA;IAAA;IAIhD,MAAM;MAAEL,UAAA;MAAYM;IAAA,IAAkBC,eAAA,CAAgB9I,KAAA,EAAO+C,IAAA,EAAM;MACjEgG,yBAAA,EAA2B7E,QAAA,CAAS,MAAM,CAAClE,KAAA,CAAM4B,QAAQ;IAAA,CAC1D;IAEK,MAAAoH,qBAAA,GAAwB9E,QAAA,CAAS,OAAO;MAC5C,GAAG2E,aAAA,CAAcxE,KAAA;MACjB4E,mBAAA,EAAqB;MACrBC,QAAA,EAAU;MACVC,MAAA,EAAQ,CAAC,GAAG,CAAC;MACbC,eAAA,EAAiB;MACjBC,kBAAA,EAAoB;MACpBC,mBAAA,EAAqB;IACrB;IAEF,MAAMC,2BAAA,GAA8BrF,QAAA,CAAS;MAC3CqB,GAAA,EAAKA,CAAA,KAAMgD,UAAA,CAAWlE,KAAA;MACtBsB,GAAA,EAAM6D,IAAA,IAAkB;QACfA,IAAA,GAAAhB,kBAAA,KAAuBiB,mBAAA;MAChC;IAAA,CACD;IAED,MAAMjB,kBAAA,GAAqBA,CAAA,KAAM;MAC3B,IAAAxI,KAAA,CAAM0J,QAAA,IAAY1J,KAAA,CAAM2J,QAAA,EAAU;QAAE;MAAO;MAE/CpB,UAAA,CAAWlE,KAAA,GAAQ;MACFuF,gBAAA;MACIC,oBAAA;IAAA;IAGvB,MAAMJ,mBAAA,GAAsBA,CAAA,KAAM;MAChClB,UAAA,CAAWlE,KAAA,GAAQ;MACf,KAACrE,KAAA,CAAMmE,YAAA,EAAc;QACvBJ,YAAA,CAAaM,KAAA,GAAQ;MACvB;MACAyF,QAAA,CAAS,MAAM;QACJC,QAAA;QACTvG,cAAA,CAAewG,uBAAA,CAAwB;MAAA,CACxC;IAAA;IAGH,MAAMzC,YAAA,GAAeA,CAAA,KAAM;MACLkC,mBAAA;MACpBjG,cAAA,CAAea,KAAA,GAAQ;IAAA;IAGzB,MAAM4F,cAAA,GAAiBA,CAAA,KAAM;;MAC3B,CAAA/B,EAAA,GAAA3E,SAAA,CAAUc,KAAA,KAAV,gBAAA6D,EAAA,CAAiBgC,KAAA;IAAM;IAGzB,MAAMC,eAAA,GAAkBA,CAAA,KAAM;;MAC5B,CAAAjC,EAAA,GAAA9E,UAAA,CAAWiB,KAAA,KAAX,gBAAA6D,EAAA,CAAkBgC,KAAA;MAClB,CAAClK,KAAA,CAAMc,UAAA,MAAcsJ,EAAA,GAAAhH,UAAA,CAAWiB,KAAA,KAAX,gBAAA+F,EAAA,CAAkBC,gBAAA;IAAiB;IAG1D,MAAMR,oBAAA,GAAuB,MAAAA,CAAA,KAAY;MACvC,MAAMC,QAAA,CAAS;MAEf,IAAI7F,eAAA,CAAgBI,KAAA,EAAO;QACV4F,cAAA;MAAA,OACV;QACWE,eAAA;MAClB;IAAA;IAGF,MAAMG,WAAA,GAAcA,CAAA,KAAM;MACxB,IAAIf,2BAAA,CAA4BlF,KAAA,EAAO;QAAE;MAAO;MAEzC6B,MAAA;MAEP1C,cAAA,CAAea,KAAA,GACXb,cAAA,CAAea,KAAA,GAAQ,QACvB0F,QAAA,CAAS;IAAA;IAGf,MAAMQ,gBAAA,GAAmBrG,QAAA,CAAS,MAAMlE,KAAA,CAAM0J,QAAA,GAAW,KAAK1J,KAAA,CAAMkC,QAAQ;IACtE,MAAAsI,gCAAA,GAAmCtG,QAAA,CAAS,MAAMlE,KAAA,CAAM0J,QAAA,IAAY1J,KAAA,CAAMmE,YAAA,GAAe,KAAK,CAAC;IAErG,MAAMyF,gBAAA,GAAmBA,CAAA,KAAM;MAC7B,MAAMa,QAAA,GAAWnF,aAAA,CAAcjB,KAAA;MACzB,MAAAqG,eAAA,GAAkB,OAAOD,QAAA,KAAa,YAAYvJ,KAAA,CAAMsE,OAAA,CAAQiF,QAAQ,KAAK,CAACA,QAAA,CAAShF,MAAA;MAE7F,IAAIiF,eAAA,EAAiB;QAAE;MAAO;MAExB,MAAAC,QAAA,GAAWzJ,KAAA,CAAMsE,OAAA,CAAQiF,QAAQ,IAAIA,QAAA,CAASA,QAAA,CAAShF,MAAA,GAAS,CAAC,IAAIgF,QAAA;MAC3EnG,aAAA,CAAcD,KAAA,GAAQsG,QAAA;MACtBb,QAAA,CAAS,MAAM;;QAAA,QAAA5B,EAAA,GAAA9E,UAAA,CAAWiB,KAAA,KAAX,gBAAA6D,EAAA,CAAkB0C,cAAA,CAAeD,QAAA;MAAA,CAAS;IAAA;IAK3D,IAAIE,iBAAA,GAAoB;IACpB,IAAAC,6BAAA;IACJ,MAAMC,cAAA,GAAiB,CAAC,WAAW,aAAa,aAAa,cAAc,SAAS,GAAG;IAGjF,MAAAC,cAAA,GAAkBC,KAAA,IAAyB;MAC/C,IAAIF,cAAA,CAAe5C,IAAA,CAAK+C,GAAA,IAAOA,GAAA,KAAQD,KAAA,CAAMC,GAAG,GAAG;QACjD;MACF;MAEM,MAAAC,QAAA,GAAoBF,KAAA,CAAMC,GAAA,CAAIzF,MAAA,KAAW;MAC/C,MAAM2F,WAAA,GAAuBH,KAAA,CAAMC,GAAA,KAAQ,eAAeD,KAAA,CAAMC,GAAA,KAAQ;MAExEG,YAAA,CAAaP,6BAA6B;MAE1C,IAAIM,WAAA,EAAa;QAEfP,iBAAA,GAAoBA,iBAAA,GAAoBA,iBAAA,CAAkBvE,KAAA,CAAM,GAAG,EAAE,IAAI;MAAA,WAChE6E,QAAA,EAAU;QAEnBN,iBAAA,IAAqBI,KAAA,CAAMC,GAAA;MAC7B;MAEA,IAAIjH,eAAA,CAAgBI,KAAA,EAAO;QACzBN,YAAA,CAAaM,KAAA,GAAQwG,iBAAA;QACrB;MACF;MAGA,IAAIA,iBAAA,EAAmB;QACrB,MAAMS,iBAAA,GAAoBtL,KAAA,CAAM0E,OAAA,CAAQC,IAAA,CAAKC,MAAA,IAAUjB,OAAA,CAAQiB,MAAM,EAAE2G,WAAA,CAAc,EAAAC,UAAA,CAAWX,iBAAA,CAAkBU,WAAA,EAAa,CAAC;QAChI,IAAID,iBAAA,EAAmB;UACrBhH,aAAA,CAAcD,KAAA,GAAQiH,iBAAA;QACxB;MACF;MAEAR,6BAAA,GAAgCW,UAAA,CAAW,MAAM;QAAsBZ,iBAAA;MAAA,GAAM,GAAI;IAAA;IAG7E,MAAAa,wBAAA,GAA2BxH,QAAA,CAAS,OAAO;MAC/C,GAAGyH,IAAA,CAAK3L,KAAA,EAAO,CAAC,UAAU,WAAW,WAAW,WAAW,cAAc,SAAS,mBAAmB,wBAAwB,kBAAkB,SAAS,kBAAkB,CAAC;MAC3KuC,qBAAA,EAAuBvC,KAAA,CAAMuC,qBAAA,IAAyBvC,KAAA,CAAMmE,YAAA;MAC5DtB,MAAA,EAAQkB,YAAA,CAAaM,KAAA,IAAS+D,iBAAA,CAAkB/D,KAAA;MAChDnC,QAAA,EAAUqI,gBAAA,CAAiBlG,KAAA;MAC3BuH,aAAA,EAAetG,aAAA,CAAcjB,KAAA;MAC7BK,OAAA,EAAS2B,eAAA,CAAgBhC,KAAA;MACzBwH,gBAAA,EAAkBlF,qBAAA;MAClB3E,aAAA,EAAeiB,EAAA,CAAGjD,KAAA,CAAMgC,aAAa;IACrC;IAEF,MAAM;MAAE8J,UAAA;MAAYC;IAAA,IAAoBC,aAAA,CAAchM,KAAA,EAAOuI,UAAU;IAGvE,MAAM0D,SAAA,GAAY/H,QAAA,CAAS,MAAMV,cAAA,CAAea,KAAA,IAASkE,UAAA,CAAWlE,KAAK;IACnE,MAAA6H,yBAAA,GAA4BC,MAAA,CAAO,oBAAoB,OAAO;MAClEC,MAAA,EAAQ,CAAC,EAAEpM,KAAA,CAAMqM,iBAAA,IAAqB,CAACrJ,KAAA,CAAMsJ,OAAA;IAC7C;IACI,MAAAC,mBAAA,GAAsBC,oBAAA,CAAqBxN,mBAAmB;IAC9D,MAAAyN,yBAAA,GAA4BvI,QAAA,CAAS,OAAO;MAChD,GAAGqI,mBAAA,CAAoBlI,KAAA;MACvBqI,KAAA,EAAOC,aAAA,CAActI,KAAA;MACrBuI,aAAA,EAAeC,qBAAA,CAAsBxI,KAAA;MACrCyI,OAAA,EAASb,SAAA,CAAU5H,KAAA;MACnB,cAAcrE,KAAA,CAAM0C,SAAA,KAAc1C,KAAA,CAAMc,UAAA,GAAa,GAAGoC,CAAA,CAAE,gBAAgB,MAAMlD,KAAA,CAAMc,UAAA,KAAeoC,CAAA,CAAE,kBAAkB;IACzH;IAGI,MAAA6J,0BAAA,GAA6B7I,QAAA,CAAS,OAAO;MACjD,GAAGyH,IAAA,CAAK3L,KAAA,EAAO,CAAC,eAAe,gBAAgB,YAAY,YAAY,UAAU,CAAC;MAClFkC,QAAA,EAAUqI,gBAAA,CAAiBlG,KAAA;MAC3BA,KAAA,EAAOa,sBAAA,CAAuBb,KAAA;MAC9BwB,WAAA,EAAaA,WAAA,CAAYxB,KAAA;MACzBc,2BAAA,EAA6BA,2BAAA,CAA4Bd,KAAA;MACzDY,iBAAA,EAAmBA,iBAAA,CAAkBZ,KAAA;MACrCyI,OAAA,EAAStJ,cAAA,CAAea,KAAA;MACxB2I,sBAAA,EAAwB5E,iBAAA,CAAkB/D,KAAA;MAC1CV;IACA;IAGF,MAAMyE,iBAAA,GAAoB6E,eAAA,CAAgBlJ,YAAA,EAAc/D,KAAA,EAAOkF,sBAAA,EAAwBqD,UAAA,EAAY5E,OAAO;IAC1G,MAAMuJ,oBAAA,GAAwB7F,CAAA,IAAee,iBAAA,CAAkB/D,KAAA,GAAQgD,CAAA;IAGvE,MAAM6C,KAAA,GAAQA,CAAA,KAAM;MAClB,IAAIlK,KAAA,CAAM0J,QAAA,EAAU;QAAE;MAAO;MAChByD,YAAA,CAAAC,QAAA,CAAS9J,KAAA,CAAMe,KAAK,CAAC;IAAA;IAGpC,MAAMgJ,IAAA,GAAOA,CAAA,KAAM;MACjB,IAAI9D,2BAAA,CAA4BlF,KAAA,EAAO;QACrCkF,2BAAA,CAA4BlF,KAAA,GAAQ;MACtC;MAEAyF,QAAA,CAAS,MAAM;QACb,IAAI9J,KAAA,CAAM0J,QAAA,EAAU;UAAE;QAAO;QACjB4D,WAAA,CAAAF,QAAA,CAAS9J,KAAA,CAAMe,KAAK,CAAC;MAAA,CAClC;IAAA;IAGG,MAAAkJ,KAAA,GAAQA,CAAA,KAAMC,iBAAA,CAAkB,MAAM;MAC1C,IAAIxN,KAAA,CAAM4B,QAAA,EAAU;QACJ0D,aAAA,CAAAjB,KAAA,GAAQnD,KAAA,CAAMsE,OAAA,CAAQxF,KAAA,CAAMyN,UAAU,IAAIzN,KAAA,CAAMyN,UAAA,GAAa;MAAC,OACvE;QACLnI,aAAA,CAAcjB,KAAA,GAAQrE,KAAA,CAAMyN,UAAA;MAC9B;MAEA1J,YAAA,CAAaM,KAAA,GAAQ;MACrBtB,IAAA,CAAK,OAAO;MACI2K,eAAA;MAChB5D,QAAA,CAAS,MAAM;QACbtG,cAAA,CAAea,KAAA,GAAQ;MAAA,CACxB;IAAA,CACF;IAEK,MAAA0D,sBAAA,GAA0B4F,CAAA,IAAc;MAC5C,IAAI3N,KAAA,CAAMmE,YAAA,IAAgB,CAACnE,KAAA,CAAM0J,QAAA,IAAY,CAAC1J,KAAA,CAAM2J,QAAA,EAAU;QAC5DgE,CAAA,oBAAAA,CAAA,CAAGC,wBAAA;QAEHpK,cAAA,CAAea,KAAA,GAAQ;QACvBkE,UAAA,CAAWlE,KAAA,GAAQ;MACrB;IAAA;IAGI,MAAAwJ,cAAA,GAAkBF,CAAA,IAAqB;MACvC,IAAA3N,KAAA,CAAM0J,QAAA,IAAY1J,KAAA,CAAM2J,QAAA,EAAU;QAAE;MAAO;MAE/C,IAAIgE,CAAA,CAAEG,IAAA,KAAS,WAAW9N,KAAA,CAAMmE,YAAA,EAAc;QAAE;MAAO;MAE3BoF,2BAAA,CAAAlF,KAAA,GAAQ,CAACkF,2BAAA,CAA4BlF,KAAA;IAAA;IAGnE,MAAM0J,kBAAA,GAAqBA,CAAA,KAAM;MAC/B,IAAI,CAAC7M,KAAA,CAAMsE,OAAA,CAAQF,aAAA,CAAcjB,KAAK,GAAG;QAAE;MAAO;MAElDiB,aAAA,CAAcjB,KAAA,GAAQiB,aAAA,CAAcjB,KAAA,CAAMiC,KAAA,CAAM,GAAG,EAAE;IAAA;IAGjD;MACJyD,QAAA;MACA4C,aAAA;MACAE,qBAAA;MACAW,iBAAA;MACAE;IAAA,IACEM,aAAA,CAAchO,KAAA,EAAO+C,IAAA,EAAM;MAAEwK,KAAA;MAAOrD,KAAA;MAAO7F,KAAA,EAAOiB;IAAA,CAAe;IAE9D;MACL,GAAG2I,aAAA,CAAc;MACjB3K,KAAA;MACAF,UAAA;MACAG,SAAA;MAEAgK,KAAA;MACArD,KAAA;MACAmD,IAAA;MACAQ,cAAA;MACAE,kBAAA;MAEAhG,sBAAA;MAEA9E,EAAA;MACAC,CAAA;MAEAgL,YAAA,EAAcjI,OAAA;MACdqE,WAAA;MACAH,eAAA;MACAF,cAAA;MACAkE,WAAA,EAAapK,YAAA;MACbE,eAAA;MACAK,aAAA;MACAiG,gBAAA;MACA1E,WAAA;MACAO,aAAA;MACA0F,UAAA;MACAxE,YAAA;MACAmB,iBAAA;MACAH,mBAAA;MACAK,mBAAA;MACAC,eAAA;MACAW,2BAAA;MACAf,kBAAA;MACAiB,mBAAA;MACAlC,YAAA;MACAwE,eAAA;MACAf,cAAA;MACAlH,cAAA;MACAkC,cAAA;MACAgD,qBAAA;MACA9D,sBAAA;MACAwG,wBAAA;MACA1G,wBAAA;MACAkI,oBAAA;MAEAT,yBAAA;MACAP,yBAAA;MACAa,0BAAA;MACAvC,gCAAA;MAAA;MAGAjG,gBAAA;MACAwC,cAAA;MACApD;IAAA;EAEJ;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}