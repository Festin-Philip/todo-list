{"ast":null,"code":"import { unref } from \"vue\";\nimport { u as useCaptureEvent } from \"./useCaptureEvent-90d008ac.mjs\";\nimport { f as findTeleportedFrom } from \"./useTeleported-c9f0a2cb.mjs\";\nimport { u as unwrapEl } from \"../utils/unwrapEl-4d79d250.mjs\";\nconst checkIfElementChild = (parent, child) => {\n  if (!child) {\n    return false;\n  }\n  if (child.parentElement === parent) {\n    return true;\n  }\n  return parent.contains(child);\n};\nconst safeArray = a => Array.isArray(a) ? a : [a];\nconst useClickOutside = (elements, cb) => {\n  useCaptureEvent(\"click\", event => {\n    const clickTarget = event.target;\n    if (event.target.shadowRoot) {\n      return;\n    }\n    const teleportParent = findTeleportedFrom(clickTarget);\n    const isClickInside = safeArray(elements).some(element => {\n      const el = unwrapEl(unref(element));\n      if (!el) {\n        return false;\n      }\n      if (!teleportParent) {\n        return checkIfElementChild(el, clickTarget);\n      }\n      return checkIfElementChild(el, clickTarget) || checkIfElementChild(el, teleportParent);\n    });\n    if (!isClickInside) {\n      cb(clickTarget);\n    }\n  });\n};\nexport { useClickOutside as u };","map":{"version":3,"names":["checkIfElementChild","parent","child","parentElement","contains","safeArray","a","Array","isArray","useClickOutside","elements","cb","useCaptureEvent","event","clickTarget","target","shadowRoot","teleportParent","findTeleportedFrom","isClickInside","some","element","el","unwrapEl","unref"],"sources":["../../../../src/composables/useClickOutside.ts"],"sourcesContent":["import { Ref, unref } from 'vue'\n\nimport { useCaptureEvent } from './useCaptureEvent'\nimport { findTeleportedFrom } from './useTeleported'\nimport { unwrapEl } from '../utils/unwrapEl'\n\nconst checkIfElementChild = (parent: HTMLElement, child: HTMLElement | null | undefined): boolean => {\n  if (!child) { return false }\n  if (child.parentElement === parent) { return true }\n\n  return parent.contains(child)\n}\n\ntype MaybeRef<T> = T | Ref<T>\ntype MaybeArray<T> = T | T[]\n\nconst safeArray = <T>(a: MaybeArray<T>) => Array.isArray(a) ? a : [a]\n\nexport const useClickOutside = (elements: MaybeArray<MaybeRef<HTMLElement | undefined>>, cb: (el: HTMLElement) => void) => {\n  useCaptureEvent('click', (event: MouseEvent) => {\n    const clickTarget = event.target as HTMLElement\n\n    if ((event.target as HTMLElement).shadowRoot) {\n      return\n    }\n\n    // Handle floating UI teleport\n    const teleportParent = findTeleportedFrom(clickTarget)\n\n    const isClickInside = safeArray(elements).some((element) => {\n      const el = unwrapEl(unref(element))\n\n      if (!el) { return false }\n\n      if (!teleportParent) { return checkIfElementChild(el, clickTarget) }\n\n      return checkIfElementChild(el, clickTarget) || checkIfElementChild(el, teleportParent)\n    })\n\n    if (!isClickInside) { cb(clickTarget) }\n  })\n}\n"],"mappings":";;;;AAMA,MAAMA,mBAAA,GAAsBA,CAACC,MAAA,EAAqBC,KAAA,KAAmD;EACnG,IAAI,CAACA,KAAA,EAAO;IAAS;EAAM;EACvB,IAAAA,KAAA,CAAMC,aAAA,KAAkBF,MAAA,EAAQ;IAAS;EAAK;EAE3C,OAAAA,MAAA,CAAOG,QAAA,CAASF,KAAK;AAC9B;AAKA,MAAMG,SAAA,GAAgBC,CAAA,IAAqBC,KAAA,CAAMC,OAAA,CAAQF,CAAC,IAAIA,CAAA,GAAI,CAACA,CAAC;AAEvD,MAAAG,eAAA,GAAkBA,CAACC,QAAA,EAAyDC,EAAA,KAAkC;EACzGC,eAAA,UAAUC,KAAA,IAAsB;IAC9C,MAAMC,WAAA,GAAcD,KAAA,CAAME,MAAA;IAErB,IAAAF,KAAA,CAAME,MAAA,CAAuBC,UAAA,EAAY;MAC5C;IACF;IAGM,MAAAC,cAAA,GAAiBC,kBAAA,CAAmBJ,WAAW;IAErD,MAAMK,aAAA,GAAgBd,SAAA,CAAUK,QAAQ,EAAEU,IAAA,CAAMC,OAAA,IAAY;MAC1D,MAAMC,EAAA,GAAKC,QAAA,CAASC,KAAA,CAAMH,OAAO,CAAC;MAElC,IAAI,CAACC,EAAA,EAAI;QAAS;MAAM;MAExB,IAAI,CAACL,cAAA,EAAgB;QAAS,OAAAjB,mBAAA,CAAoBsB,EAAA,EAAIR,WAAW;MAAE;MAEnE,OAAOd,mBAAA,CAAoBsB,EAAA,EAAIR,WAAW,KAAKd,mBAAA,CAAoBsB,EAAA,EAAIL,cAAc;IAAA,CACtF;IAED,IAAI,CAACE,aAAA,EAAe;MAAER,EAAA,CAAGG,WAAW;IAAE;EAAA,CACvC;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}