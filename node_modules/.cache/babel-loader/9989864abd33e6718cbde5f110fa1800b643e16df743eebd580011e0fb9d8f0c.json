{"ast":null,"code":"import { defineComponent, computed } from \"vue\";\nimport { u as useRatingProps, a as useRating } from \"./hooks/useRating-f9981f6b.mjs\";\nimport { u as useVaRatingColorsProps, a as useVaRatingColors } from \"./hooks/useVaRatingColors-d468a605.mjs\";\nimport { R as RatingValue } from \"./types-7212ca12.mjs\";\nimport { u as useComponentPresetProp } from \"../../composables/useComponentPreset-0dfbd395.mjs\";\nimport { _ as _VaRatingItem } from \"./components/VaRatingItem/VaRatingItem-bc890a9a.mjs\";\nimport { V as VaRatingItemNumberButton } from \"./components/VaRatingItemNumberButton-e8759509.mjs\";\nimport { u as useFormFieldProps, a as useFormField } from \"../../composables/useFormField-3d39d61a.mjs\";\nimport { e as extractComponentProps } from \"../../utils/component-options/extract-component-options-6b96d215.mjs\";\nimport { u as useTranslation } from \"../../composables/useTranslation-0934900c.mjs\";\nimport { f as filterComponentProps } from \"../../utils/component-options/filter-props-9727421a.mjs\";\nconst VaRatingItemProps = extractComponentProps(_VaRatingItem, [\"modelValue\", \"itemNumber\"]);\nconst VaRatingItemNumberButtonProps = extractComponentProps(VaRatingItemNumberButton, [\"modelValue\", \"itemNumber\"]);\nconst _sfc_main = defineComponent({\n  name: \"VaRating\",\n  props: {\n    ...VaRatingItemNumberButtonProps,\n    ...useRatingProps,\n    ...useVaRatingColorsProps,\n    ...useFormFieldProps,\n    ...VaRatingItemProps,\n    ...useComponentPresetProp,\n    modelValue: {\n      type: Number,\n      default: 0\n    },\n    numbers: {\n      type: Boolean,\n      default: false\n    },\n    halves: {\n      type: Boolean,\n      default: false\n    },\n    max: {\n      type: Number,\n      default: 5\n    },\n    texts: {\n      type: Array,\n      default: () => []\n    },\n    ariaLabel: {\n      type: String,\n      default: \"$t:currentRating\"\n    },\n    ariaItemLabel: {\n      type: String,\n      default: \"$t:voteRating\"\n    }\n  },\n  emits: [\"update:modelValue\"],\n  components: {\n    VaRatingItem: _VaRatingItem,\n    VaRatingItemNumberButton\n  },\n  setup(props) {\n    const {\n      computedClasses: rootClass\n    } = useFormField(\"va-rating\", props);\n    const rating = useRating(props);\n    const isInteractionsEnabled = computed(() => !props.disabled && !props.readonly);\n    return {\n      ...useTranslation(),\n      ...useVaRatingColors(props),\n      ...rating,\n      rootClass,\n      VaRatingItemProps: filterComponentProps(VaRatingItemProps),\n      VaRatingItemNumberButtonProps: filterComponentProps(VaRatingItemNumberButtonProps),\n      isInteractionsEnabled,\n      tabIndexComputed: computed(() => isInteractionsEnabled.value ? 0 : void 0),\n      onArrowKeyPress: direction => {\n        const step = props.halves ? RatingValue.HALF : RatingValue.FULL;\n        const nextStep = rating.visibleValue.value + step * direction;\n        const min = props.clearable ? 0 : step;\n        if (nextStep >= min && nextStep <= props.max) {\n          rating.onItemValueUpdate(rating.visibleValue.value, step * direction);\n        } else if (nextStep < min) {\n          rating.onItemValueUpdate(min, 0);\n        } else {\n          rating.onItemValueUpdate(props.max, direction === -1 ? step * direction : 0);\n        }\n      }\n    };\n  }\n});\nexport { _sfc_main as _ };","map":{"version":3,"names":["VaRatingItemProps","extractComponentProps","_VaRatingItem","VaRatingItemNumberButtonProps","VaRatingItemNumberButton","_sfc_main","defineComponent","name","props","useRatingProps","useVaRatingColorsProps","useFormFieldProps","useComponentPresetProp","modelValue","type","Number","default","numbers","Boolean","halves","max","texts","Array","ariaLabel","String","ariaItemLabel","emits","components","VaRatingItem","setup","computedClasses","rootClass","useFormField","rating","useRating","isInteractionsEnabled","computed","disabled","readonly","useTranslation","useVaRatingColors","filterComponentProps","tabIndexComputed","value","onArrowKeyPress","direction","step","RatingValue","HALF","FULL","nextStep","visibleValue","min","clearable","onItemValueUpdate"],"sources":["../../../../../src/components/va-rating/VaRating.vue"],"sourcesContent":["<template>\n  <div\n    class=\"va-rating\"\n    :class=\"rootClass\"\n    :aria-label=\"tp($props.ariaLabel, { max: $props.max, value: $props.modelValue })\"\n  >\n    <div\n      class=\"va-rating__item-wrapper\"\n      @keyup.left=\"onArrowKeyPress(-1)\"\n      @keyup.right=\"onArrowKeyPress(1)\"\n      @mouseenter=\"onMouseEnter\"\n      @mouseleave=\"onMouseLeave\"\n    >\n      <va-rating-item\n        v-for=\"itemNumber in $props.max\"\n        :key=\"itemNumber\"\n        class=\"va-rating__item\"\n        v-bind=\"VaRatingItemProps\"\n        :aria-label=\"tp($props.ariaItemLabel, { max: $props.max, value: itemNumber })\"\n        :model-value=\"getItemValue(itemNumber - 1)\"\n        :tabindex=\"tabIndexComputed\"\n        :disabled=\"$props.disabled\"\n        :readonly=\"$props.readonly\"\n        @hover=\"isInteractionsEnabled && onItemHoveredValueUpdate(itemNumber - 1, $event)\"\n        @update:model-value=\"isInteractionsEnabled && onItemValueUpdate(itemNumber - 1, $event)\"\n        v-slot=\"{ value, onClick }\"\n      >\n        <slot name=\"item\" v-bind=\"{ value: value, onClick: onClick, index: itemNumber }\">\n          <template v-if=\"$props.numbers\">\n            <VaRatingItemNumberButton\n              v-bind=\"VaRatingItemNumberButtonProps\"\n              :model-value=\"value\"\n              :item-number=\"itemNumber\"\n            />\n          </template>\n        </slot>\n      </va-rating-item>\n    </div>\n    <span\n      v-if=\"$props.texts && $props.texts.length === $props.max\"\n      class=\"va-rating__text-wrapper\"\n      :style=\"{ color: computedColor }\"\n    >\n      {{ $props.texts[Math.round(visibleValue) - 1] }}\n    </span>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, PropType } from 'vue'\n\nimport { extractComponentProps, filterComponentProps } from '../../utils/component-options'\nimport { useFormField, useFormFieldProps, useTranslation } from '../../composables'\nimport { useRating, useRatingProps } from './hooks/useRating'\nimport { useVaRatingColors, useVaRatingColorsProps } from './hooks/useVaRatingColors'\n\nimport { RatingValue } from './types'\nimport { useComponentPresetProp } from '../../composables/useComponentPreset'\n\nimport VaRatingItem from './components/VaRatingItem/VaRatingItem.vue'\nimport VaRatingItemNumberButton from './components/VaRatingItemNumberButton.vue'\n\nconst VaRatingItemProps = extractComponentProps(VaRatingItem, ['modelValue', 'itemNumber'])\nconst VaRatingItemNumberButtonProps = extractComponentProps(VaRatingItemNumberButton, ['modelValue', 'itemNumber'])\n\nexport default defineComponent({\n  name: 'VaRating',\n  props: {\n    ...VaRatingItemNumberButtonProps,\n    ...useRatingProps,\n    ...useVaRatingColorsProps,\n    ...useFormFieldProps,\n    ...VaRatingItemProps,\n    ...useComponentPresetProp,\n    modelValue: { type: Number, default: 0 },\n    numbers: { type: Boolean, default: false },\n    halves: { type: Boolean, default: false },\n    max: { type: Number, default: 5 },\n    texts: { type: Array as PropType<string[]>, default: () => [] },\n\n    ariaLabel: { type: String, default: '$t:currentRating' },\n    ariaItemLabel: { type: String, default: '$t:voteRating' },\n  },\n  emits: ['update:modelValue'],\n  components: { VaRatingItem, VaRatingItemNumberButton },\n  setup (props) {\n    const { computedClasses: rootClass } = useFormField('va-rating', props)\n    const rating = useRating(props)\n    const isInteractionsEnabled = computed(() => !props.disabled && !props.readonly)\n\n    return {\n      ...useTranslation(),\n      ...useVaRatingColors(props),\n      ...rating,\n      rootClass,\n      VaRatingItemProps: filterComponentProps(VaRatingItemProps),\n      VaRatingItemNumberButtonProps: filterComponentProps(VaRatingItemNumberButtonProps),\n      isInteractionsEnabled,\n      tabIndexComputed: computed(() => isInteractionsEnabled.value ? 0 : undefined),\n      onArrowKeyPress: (direction: 1 | -1) => {\n        const step = props.halves ? RatingValue.HALF : RatingValue.FULL\n        const nextStep = rating.visibleValue.value + step * direction\n        const min = props.clearable ? 0 : step\n        if (nextStep >= min && nextStep <= props.max) {\n          rating.onItemValueUpdate(rating.visibleValue.value, step * direction)\n        } else if (nextStep < min) {\n          rating.onItemValueUpdate(min, 0)\n        } else {\n          rating.onItemValueUpdate(props.max, direction === -1 ? step * direction : 0)\n        }\n      },\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import 'variables';\n\n.va-rating {\n  display: var(--va-rating-display);\n  font-family: var(--va-font-family);\n\n  &__number-item {\n    @include normalize-button();\n\n    font-size: var(--va-rating-number-item-font-size);\n    margin: var(--va-rating-number-item-margin);\n    font-weight: var(--va-rating-number-item-font-weight);\n\n    @include flex-center();\n\n    cursor: pointer;\n\n    @at-root {\n      .va-rating--disabled & {\n        @include va-disabled();\n      }\n\n      .va-rating--readonly & {\n        cursor: default;\n      }\n    }\n  }\n\n  &__item-wrapper {\n    display: flex;\n    cursor: var(--va-rating-item-wrapper-cursor);\n\n    @at-root {\n      .va-rating--readonly &,\n      .va-rating--disabled & {\n        cursor: default;\n      }\n    }\n  }\n\n  &-item {\n    display: flex;\n\n    @include flex-center();\n\n    .va-rating--disabled & {\n      @include va-disabled();\n\n      &__wrapper {\n        cursor: initial !important;\n      }\n    }\n\n    .va-rating--readonly & &__wrapper {\n      cursor: initial !important;\n    }\n  }\n\n  &__text-wrapper {\n    padding-left: 10px;\n  }\n}\n</style>\n"],"mappings":";;;;;;;;;;;AA8DA,MAAMA,iBAAA,GAAoBC,qBAAA,CAAsBC,aAAA,EAAc,CAAC,cAAc,YAAY,CAAC;AAC1F,MAAMC,6BAAA,GAAgCF,qBAAA,CAAsBG,wBAAA,EAA0B,CAAC,cAAc,YAAY,CAAC;AAElH,MAAAC,SAAA,GAAeC,eAAA,CAAgB;EAC7BC,IAAA,EAAM;EACNC,KAAA,EAAO;IACL,GAAGL,6BAAA;IACH,GAAGM,cAAA;IACH,GAAGC,sBAAA;IACH,GAAGC,iBAAA;IACH,GAAGX,iBAAA;IACH,GAAGY,sBAAA;IACHC,UAAA,EAAY;MAAEC,IAAA,EAAMC,MAAA;MAAQC,OAAA,EAAS;IAAE;IACvCC,OAAA,EAAS;MAAEH,IAAA,EAAMI,OAAA;MAASF,OAAA,EAAS;IAAM;IACzCG,MAAA,EAAQ;MAAEL,IAAA,EAAMI,OAAA;MAASF,OAAA,EAAS;IAAM;IACxCI,GAAA,EAAK;MAAEN,IAAA,EAAMC,MAAA;MAAQC,OAAA,EAAS;IAAE;IAChCK,KAAA,EAAO;MAAEP,IAAA,EAAMQ,KAAA;MAA6BN,OAAA,EAASA,CAAA,KAAM;IAAG;IAE9DO,SAAA,EAAW;MAAET,IAAA,EAAMU,MAAA;MAAQR,OAAA,EAAS;IAAmB;IACvDS,aAAA,EAAe;MAAEX,IAAA,EAAMU,MAAA;MAAQR,OAAA,EAAS;IAAgB;EAC1D;EACAU,KAAA,EAAO,CAAC,mBAAmB;EAC3BC,UAAA,EAAY;IAAAC,YAAA,EAAE1B,aAAA;IAAcE;EAAyB;EACrDyB,MAAOrB,KAAA,EAAO;IACZ,MAAM;MAAEsB,eAAA,EAAiBC;IAAA,IAAcC,YAAA,CAAa,aAAaxB,KAAK;IAChE,MAAAyB,MAAA,GAASC,SAAA,CAAU1B,KAAK;IACxB,MAAA2B,qBAAA,GAAwBC,QAAA,CAAS,MAAM,CAAC5B,KAAA,CAAM6B,QAAA,IAAY,CAAC7B,KAAA,CAAM8B,QAAQ;IAExE;MACL,GAAGC,cAAA,CAAe;MAClB,GAAGC,iBAAA,CAAkBhC,KAAK;MAC1B,GAAGyB,MAAA;MACHF,SAAA;MACA/B,iBAAA,EAAmByC,oBAAA,CAAqBzC,iBAAiB;MACzDG,6BAAA,EAA+BsC,oBAAA,CAAqBtC,6BAA6B;MACjFgC,qBAAA;MACAO,gBAAA,EAAkBN,QAAA,CAAS,MAAMD,qBAAA,CAAsBQ,KAAA,GAAQ,IAAI,MAAS;MAC5EC,eAAA,EAAkBC,SAAA,IAAsB;QACtC,MAAMC,IAAA,GAAOtC,KAAA,CAAMW,MAAA,GAAS4B,WAAA,CAAYC,IAAA,GAAOD,WAAA,CAAYE,IAAA;QAC3D,MAAMC,QAAA,GAAWjB,MAAA,CAAOkB,YAAA,CAAaR,KAAA,GAAQG,IAAA,GAAOD,SAAA;QAC9C,MAAAO,GAAA,GAAM5C,KAAA,CAAM6C,SAAA,GAAY,IAAIP,IAAA;QAClC,IAAII,QAAA,IAAYE,GAAA,IAAOF,QAAA,IAAY1C,KAAA,CAAMY,GAAA,EAAK;UAC5Ca,MAAA,CAAOqB,iBAAA,CAAkBrB,MAAA,CAAOkB,YAAA,CAAaR,KAAA,EAAOG,IAAA,GAAOD,SAAS;QAAA,WAC3DK,QAAA,GAAWE,GAAA,EAAK;UAClBnB,MAAA,CAAAqB,iBAAA,CAAkBF,GAAA,EAAK,CAAC;QAAA,OAC1B;UACLnB,MAAA,CAAOqB,iBAAA,CAAkB9C,KAAA,CAAMY,GAAA,EAAKyB,SAAA,KAAc,KAAKC,IAAA,GAAOD,SAAA,GAAY,CAAC;QAC7E;MACF;IAAA;EAEJ;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}