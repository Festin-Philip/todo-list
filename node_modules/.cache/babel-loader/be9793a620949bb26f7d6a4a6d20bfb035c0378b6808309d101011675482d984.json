{"ast":null,"code":"import { defineComponent, h, Transition, shallowRef, toRef, computed, watchEffect, watch, onMounted, nextTick } from \"vue\";\nimport { V as VaButton } from \"../va-button/index-f7530ece.mjs\";\nimport { V as VaIcon } from \"../va-icon/index-e46b09d5.mjs\";\nimport { u as useBlur } from \"./hooks/useBlur-c1cff117.mjs\";\nimport { u as useStatefulEmits, a as useStatefulProps, b as useStateful } from \"../../composables/useStateful-78f75564.mjs\";\nimport { u as useTrapFocus } from \"../../composables/useTrapFocus-2f0bdec2.mjs\";\nimport { u as useModalLevel } from \"../../composables/useModalLevel-96234fce.mjs\";\nimport { u as useWindow } from \"../../composables/useWindow-549880c7.mjs\";\nimport { u as useTeleported } from \"../../composables/useTeleported-c9f0a2cb.mjs\";\nimport { u as useComponentPresetProp } from \"../../composables/useComponentPreset-0dfbd395.mjs\";\nimport { u as useColors } from \"../../composables/useColors-b582f249.mjs\";\nimport { u as useTextColor } from \"../../composables/useTextColor-48b60d5c.mjs\";\nimport { u as useClickOutside } from \"../../composables/useClickOutside-4e7f583c.mjs\";\nimport { u as useDocument } from \"../../composables/useDocument-5c9446c6.mjs\";\nimport { u as useTranslation } from \"../../composables/useTranslation-0934900c.mjs\";\nconst WithTransition = defineComponent({\n  name: \"ModalElement\",\n  inheritAttrs: false,\n  props: {\n    ...useComponentPresetProp,\n    isTransition: {\n      type: Boolean,\n      default: true\n    }\n  },\n  setup: (props, {\n    slots,\n    attrs\n  }) => () => {\n    var _a;\n    return props.isTransition ? h(Transition, {\n      ...attrs\n    }, slots) : (_a = slots.default) == null ? void 0 : _a.call(slots, attrs);\n  }\n});\nconst _sfc_main = defineComponent({\n  name: \"VaModal\",\n  inheritAttrs: false,\n  components: {\n    VaButton,\n    VaIcon,\n    WithTransition\n  },\n  emits: [...useStatefulEmits, \"cancel\", \"ok\", \"before-open\", \"open\", \"before-close\", \"close\", \"click-outside\"],\n  props: {\n    ...useStatefulProps,\n    modelValue: {\n      type: Boolean,\n      default: false\n    },\n    attachElement: {\n      type: String,\n      default: \"body\"\n    },\n    allowBodyScroll: {\n      type: Boolean,\n      default: false\n    },\n    disableAttachment: {\n      type: Boolean,\n      default: false\n    },\n    title: {\n      type: String,\n      default: \"\"\n    },\n    message: {\n      type: String,\n      default: \"\"\n    },\n    okText: {\n      type: String,\n      default: \"$t:ok\"\n    },\n    cancelText: {\n      type: String,\n      default: \"$t:cancel\"\n    },\n    hideDefaultActions: {\n      type: Boolean,\n      default: false\n    },\n    fullscreen: {\n      type: Boolean,\n      default: false\n    },\n    closeButton: {\n      type: Boolean,\n      default: false\n    },\n    mobileFullscreen: {\n      type: Boolean,\n      default: true\n    },\n    noDismiss: {\n      type: Boolean,\n      default: false\n    },\n    noOutsideDismiss: {\n      type: Boolean,\n      default: false\n    },\n    noEscDismiss: {\n      type: Boolean,\n      default: false\n    },\n    maxWidth: {\n      type: String,\n      default: \"\"\n    },\n    maxHeight: {\n      type: String,\n      default: \"\"\n    },\n    anchorClass: {\n      type: String\n    },\n    size: {\n      type: String,\n      default: \"medium\",\n      validator: value => [\"medium\", \"small\", \"large\"].includes(value)\n    },\n    fixedLayout: {\n      type: Boolean,\n      default: false\n    },\n    withoutTransitions: {\n      type: Boolean,\n      default: false\n    },\n    overlay: {\n      type: Boolean,\n      default: true\n    },\n    overlayOpacity: {\n      type: [Number, String],\n      default: 0.6\n    },\n    showNestedOverlay: {\n      type: Boolean,\n      default: false\n    },\n    blur: {\n      type: Boolean,\n      default: false\n    },\n    zIndex: {\n      type: [Number, String],\n      default: void 0\n    },\n    backgroundColor: {\n      type: String,\n      default: \"background-secondary\"\n    },\n    noPadding: {\n      type: Boolean,\n      default: false\n    },\n    beforeClose: {\n      type: Function\n    },\n    beforeOk: {\n      type: Function\n    },\n    beforeCancel: {\n      type: Function\n    },\n    ariaCloseLabel: {\n      type: String,\n      default: \"$t:close\"\n    }\n  },\n  setup(props, {\n    emit\n  }) {\n    const rootElement = shallowRef();\n    const modalDialog = shallowRef();\n    const {\n      trapFocusIn,\n      freeFocus\n    } = useTrapFocus();\n    const {\n      registerModal,\n      unregisterModal,\n      isTopLevelModal,\n      isLowestLevelModal\n    } = useModalLevel();\n    const {\n      getColor\n    } = useColors();\n    const {\n      textColorComputed\n    } = useTextColor(toRef(props, \"backgroundColor\"));\n    const {\n      valueComputed\n    } = useStateful(props, emit);\n    const computedClass = computed(() => ({\n      \"va-modal--fullscreen\": props.fullscreen,\n      \"va-modal--mobile-fullscreen\": props.mobileFullscreen,\n      \"va-modal--fixed-layout\": props.fixedLayout,\n      \"va-modal--no-padding\": props.noPadding,\n      [`va-modal--size-${props.size}`]: props.size !== \"medium\"\n    }));\n    const computedModalContainerStyle = computed(() => ({\n      \"z-index\": props.zIndex\n    }));\n    const computedDialogStyle = computed(() => ({\n      maxWidth: props.maxWidth,\n      maxHeight: props.maxHeight,\n      color: textColorComputed.value,\n      background: getColor(props.backgroundColor)\n    }));\n    const computedOverlayClass = computed(() => ({\n      \"va-modal__overlay--lowest\": isLowestLevelModal.value,\n      \"va-modal__overlay--top\": isTopLevelModal.value\n    }));\n    const getOverlayOpacity = () => {\n      if (props.showNestedOverlay && !isLowestLevelModal.value) {\n        return \"var(--va-modal-overlay-nested-opacity)\";\n      }\n      return \"var(--va-modal-overlay-opacity)\";\n    };\n    const computedOverlayStyles = computed(() => {\n      if (!props.overlay) {\n        return;\n      }\n      if (isTopLevelModal.value || props.showNestedOverlay) {\n        return {\n          \"background-color\": \"var(--va-modal-overlay-color)\",\n          opacity: getOverlayOpacity(),\n          \"z-index\": props.zIndex && Number(props.zIndex) - 1\n        };\n      }\n      return \"\";\n    });\n    const show = () => {\n      valueComputed.value = true;\n    };\n    const hide = cb => {\n      const _hide = () => {\n        valueComputed.value = false;\n        cb == null ? void 0 : cb();\n      };\n      props.beforeClose ? props.beforeClose(_hide) : _hide();\n    };\n    const toggle = () => {\n      valueComputed.value = !valueComputed.value;\n    };\n    const cancel = () => {\n      const _hide = () => {\n        hide(() => emit(\"cancel\"));\n      };\n      props.beforeCancel ? props.beforeCancel(_hide) : _hide();\n    };\n    const ok = () => {\n      const _hide = () => {\n        hide(() => emit(\"ok\"));\n      };\n      props.beforeOk ? props.beforeOk(_hide) : _hide();\n    };\n    const trapFocusInModal = () => {\n      nextTick(() => {\n        if (modalDialog.value) {\n          trapFocusIn(modalDialog.value);\n        }\n      });\n    };\n    const onBeforeEnterTransition = el => emit(\"before-open\", el);\n    const onAfterEnterTransition = el => emit(\"open\", el);\n    const onBeforeLeaveTransition = el => emit(\"before-close\", el);\n    const onAfterLeaveTransition = el => emit(\"close\", el);\n    const listenKeyUp = e => {\n      const hideModal = () => {\n        if (e.code === \"Escape\" && !props.noEscDismiss && !props.noDismiss && isTopLevelModal.value) {\n          cancel();\n        }\n      };\n      setTimeout(hideModal);\n    };\n    useClickOutside([modalDialog], () => {\n      if (!valueComputed.value || props.noOutsideDismiss || props.noDismiss || !isTopLevelModal.value) {\n        return;\n      }\n      emit(\"click-outside\");\n      cancel();\n    });\n    const window = useWindow();\n    watchEffect(() => {\n      var _a, _b;\n      if (valueComputed.value) {\n        (_a = window.value) == null ? void 0 : _a.addEventListener(\"keyup\", listenKeyUp);\n      } else {\n        (_b = window.value) == null ? void 0 : _b.removeEventListener(\"keyup\", listenKeyUp);\n      }\n    });\n    useBlur(toRef(props, \"blur\"), valueComputed);\n    const documentRef = useDocument();\n    const setBodyOverflow = overflow => {\n      if (!documentRef.value || props.allowBodyScroll) {\n        return;\n      }\n      documentRef.value.body.style.overflow = overflow;\n    };\n    watch(valueComputed, newValueComputed => {\n      if (newValueComputed) {\n        registerModal();\n        setBodyOverflow(\"hidden\");\n        return;\n      }\n      if (isLowestLevelModal.value) {\n        freeFocus();\n        setBodyOverflow(\"\");\n      }\n      unregisterModal();\n    });\n    watch(isTopLevelModal, newIsTopLevelModal => {\n      if (newIsTopLevelModal) {\n        trapFocusInModal();\n      }\n    });\n    onMounted(() => {\n      if (valueComputed.value) {\n        registerModal();\n      }\n    });\n    const publicMethods = {\n      ...useTranslation(),\n      show,\n      hide,\n      toggle,\n      cancel,\n      ok,\n      onBeforeEnterTransition,\n      onAfterEnterTransition,\n      onBeforeLeaveTransition,\n      onAfterLeaveTransition,\n      listenKeyUp\n    };\n    return {\n      isLowestLevelModal,\n      isTopLevelModal,\n      computedOverlayClass,\n      getColor,\n      rootElement,\n      modalDialog,\n      valueComputed,\n      computedClass,\n      computedDialogStyle,\n      computedModalContainerStyle,\n      computedOverlayStyles,\n      slotBind: {\n        show,\n        hide,\n        toggle,\n        cancel,\n        ok\n      },\n      ...publicMethods,\n      ...useTeleported()\n    };\n  }\n});\nexport { _sfc_main as _ };","map":{"version":3,"names":["WithTransition","defineComponent","name","inheritAttrs","props","useComponentPresetProp","isTransition","type","Boolean","default","setup","slots","attrs","h","Transition","_a","call","_sfc_main","components","VaButton","VaIcon","emits","useStatefulEmits","useStatefulProps","modelValue","attachElement","String","allowBodyScroll","disableAttachment","title","message","okText","cancelText","hideDefaultActions","fullscreen","closeButton","mobileFullscreen","noDismiss","noOutsideDismiss","noEscDismiss","maxWidth","maxHeight","anchorClass","size","validator","value","includes","fixedLayout","withoutTransitions","overlay","overlayOpacity","Number","showNestedOverlay","blur","zIndex","backgroundColor","noPadding","beforeClose","Function","beforeOk","beforeCancel","ariaCloseLabel","emit","rootElement","shallowRef","modalDialog","trapFocusIn","freeFocus","useTrapFocus","registerModal","unregisterModal","isTopLevelModal","isLowestLevelModal","useModalLevel","getColor","useColors","textColorComputed","useTextColor","toRef","valueComputed","useStateful","computedClass","computed","computedModalContainerStyle","computedDialogStyle","color","background","computedOverlayClass","getOverlayOpacity","computedOverlayStyles","opacity","show","hide","cb","_hide","toggle","cancel","ok","trapFocusInModal","nextTick","onBeforeEnterTransition","el","onAfterEnterTransition","onBeforeLeaveTransition","onAfterLeaveTransition","listenKeyUp","e","hideModal","code","setTimeout","useClickOutside","window","useWindow","watchEffect","addEventListener","_b","removeEventListener","useBlur","documentRef","useDocument","setBodyOverflow","overflow","body","style","watch","newValueComputed","newIsTopLevelModal","onMounted","publicMethods","useTranslation","slotBind","useTeleported"],"sources":["../../../../../src/components/va-modal/VaModal.vue"],"sourcesContent":["<template>\n  <div\n    ref=\"rootElement\"\n    class=\"va-modal-entry\"\n    role=\"dialog\"\n    aria-modal=\"true\"\n    :aria-labelledby=\"title\"\n    :class=\"$props.anchorClass\"\n  >\n    <div v-if=\"$slots.anchor\" class=\"va-modal__anchor\" v-bind=\"teleportFromAttrs\">\n      <slot name=\"anchor\" v-bind=\"slotBind\" />\n    </div>\n\n    <teleport :to=\"attachElement\" :disabled=\"$props.disableAttachment\">\n      <WithTransition\n        name=\"va-modal\"\n        :isTransition=\"!$props.withoutTransitions\"\n        appear\n        :duration=\"300\"\n        v-bind=\"{ ...$attrs, ...teleportedAttrs }\"\n        @beforeEnter=\"onBeforeEnterTransition\"\n        @afterEnter=\"onAfterEnterTransition\"\n        @beforeLeave=\"onBeforeLeaveTransition\"\n        @afterLeave=\"onAfterLeaveTransition\"\n      >\n        <div class=\"va-modal\" :class=\"computedClass\" v-if=\"valueComputed\">\n          <div\n            v-if=\"$props.overlay\"\n            class=\"va-modal__overlay\"\n            :style=\"computedOverlayStyles\"\n            :class=\"computedOverlayClass\"\n          />\n          <div\n            class=\"va-modal__container\"\n            :style=\"computedModalContainerStyle\"\n          >\n            <div\n              ref=\"modalDialog\"\n              class=\"va-modal__dialog\"\n              :style=\"computedDialogStyle\"\n            >\n              <va-icon\n                v-if=\"$props.fullscreen || $props.closeButton\"\n                name=\"va-close\"\n                class=\"va-modal__close\"\n                :class=\"{ 'va-modal__close--fullscreen': $props.fullscreen }\"\n                role=\"button\"\n                :aria-label=\"tp($props.ariaCloseLabel)\"\n                tabindex=\"0\"\n                @click=\"cancel\"\n                @keydown.space=\"cancel\"\n                @keydown.enter=\"cancel\"\n              />\n              <div\n                class=\"va-modal__inner\"\n                :style=\"{ maxWidth: $props.maxWidth, maxHeight: $props.maxHeight }\"\n              >\n                <div v-if=\"$slots.content\">\n                  <slot name=\"content\" v-bind=\"slotBind\" />\n                </div>\n                <template v-if=\"!$slots.content\">\n                  <div\n                    v-if=\"title\"\n                    class=\"va-modal__title\"\n                    :style=\"{ color: getColor('primary') }\"\n                  >\n                    {{ $props.title }}\n                  </div>\n                  <div\n                    v-if=\"$slots.header\"\n                    class=\"va-modal__header\"\n                  >\n                    <slot name=\"header\" v-bind=\"slotBind\" />\n                  </div>\n                  <div\n                    v-if=\"$props.message\"\n                    class=\"va-modal__message\"\n                  >\n                    {{ $props.message }}\n                  </div>\n                  <div\n                    v-if=\"$slots.default\"\n                    class=\"va-modal__message\"\n                  >\n                    <slot v-bind=\"slotBind\" />\n                  </div>\n                  <div\n                    v-if=\"($props.cancelText || $props.okText) && !$props.hideDefaultActions\"\n                    class=\"va-modal__footer\"\n                  >\n                    <va-button\n                      v-if=\"$props.cancelText\"\n                      preset=\"secondary\"\n                      color=\"secondary\"\n                      class=\"va-modal__default-cancel-button\"\n                      @click=\"cancel\"\n                    >\n                      {{ tp($props.cancelText) }}\n                    </va-button>\n                    <va-button @click=\"ok\">\n                      {{ tp($props.okText) }}\n                    </va-button>\n                  </div>\n                  <div\n                    v-if=\"$slots.footer\"\n                    class=\"va-modal__footer\"\n                  >\n                    <slot name=\"footer\" v-bind=\"slotBind\" />\n                  </div>\n                </template>\n              </div>\n            </div>\n          </div>\n        </div>\n      </WithTransition>\n    </teleport>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport type { PropType, StyleValue } from 'vue'\nimport {\n  Transition,\n  h,\n  defineComponent,\n  computed,\n  shallowRef,\n  toRef,\n  watchEffect,\n  onMounted,\n  nextTick, watch,\n} from 'vue'\n\nimport {\n  useStateful, useStatefulProps, useStatefulEmits,\n  useColors, useTextColor,\n  useWindow,\n  useComponentPresetProp,\n  useTrapFocus,\n  useModalLevel,\n  useTranslation,\n  useClickOutside,\n  useDocument,\n  useTeleported,\n} from '../../composables'\n\nimport { VaButton } from '../va-button'\nimport { VaIcon } from '../va-icon'\n\nimport { useBlur } from './hooks/useBlur'\n\nconst WithTransition = defineComponent({\n  name: 'ModalElement',\n  inheritAttrs: false,\n  props: {\n    ...useComponentPresetProp,\n    isTransition: { type: Boolean, default: true },\n  },\n  setup: (props, { slots, attrs }) => () => props.isTransition\n    ? h(Transition, { ...attrs }, slots)\n    : slots.default?.(attrs),\n})\n\nexport default defineComponent({\n  name: 'VaModal',\n  inheritAttrs: false,\n  components: { VaButton, VaIcon, WithTransition },\n  emits: [\n    ...useStatefulEmits,\n    'cancel', 'ok', 'before-open', 'open', 'before-close', 'close', 'click-outside',\n  ],\n  props: {\n    ...useStatefulProps,\n    modelValue: { type: Boolean, default: false },\n    attachElement: { type: String, default: 'body' },\n    allowBodyScroll: { type: Boolean, default: false },\n    disableAttachment: { type: Boolean, default: false },\n    title: { type: String, default: '' },\n    message: { type: String, default: '' },\n    okText: { type: String, default: '$t:ok' },\n    cancelText: { type: String, default: '$t:cancel' },\n    hideDefaultActions: { type: Boolean, default: false },\n    fullscreen: { type: Boolean, default: false },\n    closeButton: { type: Boolean, default: false },\n    mobileFullscreen: { type: Boolean, default: true },\n    noDismiss: { type: Boolean, default: false },\n    noOutsideDismiss: { type: Boolean, default: false },\n    noEscDismiss: { type: Boolean, default: false },\n    maxWidth: { type: String, default: '' },\n    maxHeight: { type: String, default: '' },\n    anchorClass: { type: String },\n    size: {\n      type: String as PropType<'medium' | 'small' | 'large'>,\n      default: 'medium',\n      validator: (value: string) => ['medium', 'small', 'large'].includes(value),\n    },\n    fixedLayout: { type: Boolean, default: false },\n    withoutTransitions: { type: Boolean, default: false },\n    overlay: { type: Boolean, default: true },\n    overlayOpacity: { type: [Number, String], default: 0.6 },\n    showNestedOverlay: { type: Boolean, default: false },\n    blur: { type: Boolean, default: false },\n    zIndex: { type: [Number, String], default: undefined },\n    backgroundColor: { type: String, default: 'background-secondary' },\n    noPadding: { type: Boolean, default: false },\n    beforeClose: { type: Function as PropType<(hide: () => void) => any> },\n    beforeOk: { type: Function as PropType<(hide: () => void) => any> },\n    beforeCancel: { type: Function as PropType<(hide: () => void) => any> },\n    ariaCloseLabel: { type: String, default: '$t:close' },\n  },\n  setup (props, { emit }) {\n    const rootElement = shallowRef<HTMLElement>()\n    const modalDialog = shallowRef<HTMLElement>()\n    const { trapFocusIn, freeFocus } = useTrapFocus()\n\n    const {\n      registerModal,\n      unregisterModal,\n      isTopLevelModal,\n      isLowestLevelModal,\n    } = useModalLevel()\n\n    const { getColor } = useColors()\n    const { textColorComputed } = useTextColor(toRef(props, 'backgroundColor'))\n    const { valueComputed } = useStateful(props, emit)\n\n    const computedClass = computed(() => ({\n      'va-modal--fullscreen': props.fullscreen,\n      'va-modal--mobile-fullscreen': props.mobileFullscreen,\n      'va-modal--fixed-layout': props.fixedLayout,\n      'va-modal--no-padding': props.noPadding,\n      [`va-modal--size-${props.size}`]: props.size !== 'medium',\n    }))\n    const computedModalContainerStyle = computed(() => ({ 'z-index': props.zIndex } as StyleValue))\n    const computedDialogStyle = computed(() => ({\n      maxWidth: props.maxWidth,\n      maxHeight: props.maxHeight,\n      color: textColorComputed.value,\n      background: getColor(props.backgroundColor),\n    }))\n\n    const computedOverlayClass = computed(() => ({\n      'va-modal__overlay--lowest': isLowestLevelModal.value,\n      'va-modal__overlay--top': isTopLevelModal.value,\n    }))\n\n    const getOverlayOpacity = () => {\n      if (props.showNestedOverlay && !isLowestLevelModal.value) {\n        return 'var(--va-modal-overlay-nested-opacity)'\n      }\n      return 'var(--va-modal-overlay-opacity)'\n    }\n\n    const computedOverlayStyles = computed(() => {\n      if (!props.overlay) { return }\n\n      if (isTopLevelModal.value || props.showNestedOverlay) {\n        return {\n          'background-color': 'var(--va-modal-overlay-color)',\n          opacity: getOverlayOpacity(),\n          'z-index': props.zIndex && Number(props.zIndex) - 1,\n        } as StyleValue\n      }\n      return ''\n    })\n\n    const show = () => { valueComputed.value = true }\n    const hide = (cb?: () => void) => {\n      const _hide = () => {\n        valueComputed.value = false\n        cb?.()\n      }\n      props.beforeClose ? props.beforeClose(_hide) : _hide()\n    }\n    const toggle = () => { valueComputed.value = !valueComputed.value }\n    const cancel = () => {\n      const _hide = () => {\n        hide(() => emit('cancel'))\n      }\n      props.beforeCancel ? props.beforeCancel(_hide) : _hide()\n    }\n    const ok = () => {\n      const _hide = () => {\n        hide(() => emit('ok'))\n      }\n      props.beforeOk ? props.beforeOk(_hide) : _hide()\n    }\n    const trapFocusInModal = () => {\n      nextTick(() => { // trapFocusIn use querySelector, so need nextTick, to be sure, that DOM has been updated after modal has been opened\n        if (modalDialog.value) {\n          trapFocusIn(modalDialog.value)\n        }\n      })\n    }\n\n    const onBeforeEnterTransition = (el: HTMLElement) => emit('before-open', el)\n    const onAfterEnterTransition = (el: HTMLElement) => emit('open', el)\n    const onBeforeLeaveTransition = (el: HTMLElement) => emit('before-close', el)\n    const onAfterLeaveTransition = (el: HTMLElement) => emit('close', el)\n\n    const listenKeyUp = (e: KeyboardEvent) => {\n      const hideModal = () => {\n        if (e.code === 'Escape' && !props.noEscDismiss && !props.noDismiss && isTopLevelModal.value) {\n          cancel()\n        }\n      }\n\n      setTimeout(hideModal)\n    }\n\n    useClickOutside([modalDialog], () => {\n      if (!valueComputed.value || props.noOutsideDismiss || props.noDismiss || !isTopLevelModal.value) { return }\n\n      emit('click-outside')\n      cancel()\n    })\n\n    const window = useWindow()\n\n    watchEffect(() => {\n      if (valueComputed.value) {\n        window.value?.addEventListener('keyup', listenKeyUp)\n      } else {\n        window.value?.removeEventListener('keyup', listenKeyUp)\n      }\n    })\n\n    useBlur(toRef(props, 'blur'), valueComputed)\n\n    const documentRef = useDocument()\n    const setBodyOverflow = (overflow: string) => {\n      if (!documentRef.value || props.allowBodyScroll) { return }\n\n      documentRef.value.body.style.overflow = overflow\n    }\n\n    watch(valueComputed, newValueComputed => { // watch for open/close modal\n      if (newValueComputed) {\n        registerModal()\n        setBodyOverflow('hidden')\n        return\n      }\n\n      if (isLowestLevelModal.value) {\n        freeFocus()\n        setBodyOverflow('')\n      }\n      unregisterModal()\n    })\n\n    watch(isTopLevelModal, newIsTopLevelModal => {\n      if (newIsTopLevelModal) {\n        trapFocusInModal()\n      }\n    })\n\n    onMounted(() => {\n      if (valueComputed.value) { // case when open modal with this.$vaModal.init\n        registerModal()\n      }\n    })\n\n    const publicMethods = {\n      ...useTranslation(),\n      show,\n      hide,\n      toggle,\n      cancel,\n      ok,\n      onBeforeEnterTransition,\n      onAfterEnterTransition,\n      onBeforeLeaveTransition,\n      onAfterLeaveTransition,\n      listenKeyUp,\n    }\n\n    return {\n      isLowestLevelModal,\n      isTopLevelModal,\n      computedOverlayClass,\n      getColor,\n      rootElement,\n      modalDialog,\n      valueComputed,\n      computedClass,\n      computedDialogStyle,\n      computedModalContainerStyle,\n      computedOverlayStyles,\n      slotBind: { show, hide, toggle, cancel, ok },\n      ...publicMethods,\n      ...useTeleported(),\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import \"variables\";\n\n.va-modal-overlay-background--blurred > :not(div[class*=\"va-\"]) {\n  filter: blur(var(--va-modal-overlay-background-blur-radius));\n  position: absolute;\n  height: 100%;\n  width: 100%;\n}\n\n.va-modal {\n  position: var(--va-modal-position);\n  display: var(--va-modal-display);\n  align-items: var(--va-modal-align-items);\n  justify-content: var(--va-modal-justify-content);\n  width: var(--va-modal-width);\n  height: var(--va-modal-height);\n  top: var(--va-modal-top);\n  left: var(--va-modal-left);\n  overflow: var(--va-modal-overflow);\n  outline: var(--va-modal-outline);\n  z-index: var(--va-modal-z-index);\n  font-family: var(--va-font-family);\n\n  &__title {\n    margin-bottom: 1.5rem;\n\n    @include va-title();\n  }\n\n  &__container {\n    z-index: var(--va-modal-container-z-index);\n    max-width: 100%;\n  }\n\n  &-enter-from &__container,\n  &-leave-to &__container {\n    opacity: 0;\n    transform: translateY(-30%);\n  }\n\n  &-enter-active &__container,\n  &-leave-active &__container {\n    transition: opacity var(--va-modal-opacity-transition), transform var(--va-modal-transform-transition);\n  }\n\n  &__dialog {\n    min-height: var(--va-modal-dialog-min-height);\n    height: var(--va-modal-dialog-height);\n    border-radius: var(--va-modal-dialog-border-radius, var(--va-block-border-radius));\n    margin: var(--va-modal-dialog-margin);\n    box-shadow: var(--va-modal-dialog-box-shadow, var(--va-block-box-shadow));\n    max-width: var(--va-modal-dialog-max-width);\n    max-height: var(--va-modal-dialog-max-height);\n    position: var(--va-modal-dialog-position);\n    overflow: auto;\n  }\n\n  &__overlay {\n    position: var(--va-modal-overlay-position);\n    top: var(--va-modal-overlay-top);\n    left: var(--va-modal-overlay-left);\n    z-index: var(--va-modal-overlay-z-index);\n    width: var(--va-modal-overlay-width);\n    height: var(--va-modal-overlay-height);\n    will-change: opacity;\n  }\n\n  &-enter-from,\n  &-leave-to {\n    .va-modal__overlay--lowest {\n      opacity: 0 !important;\n    }\n  }\n\n  &-leave-active,\n  &-enter-active {\n    .va-modal__overlay.va-modal__overlay--lowest {\n      transition: opacity var(--va-modal-opacity-transition);\n    }\n  }\n\n  &-leave-active {\n    .va-modal__overlay:not(.va-modal__overlay--lowest) {\n      display: none;\n    }\n  }\n\n  &--fullscreen {\n    .va-modal__dialog {\n      min-width: 100vw !important;\n      max-width: 100vw;\n      min-height: 100vh !important;\n      border-radius: 0;\n      margin: 0;\n    }\n  }\n\n  &--mobile-fullscreen {\n    .va-modal__dialog {\n      @media all and (max-width: map-get($grid-breakpoints, sm)) {\n        margin: 0 !important;\n        min-width: 100vw !important;\n        min-height: 100vh !important;\n        border-radius: 0;\n      }\n    }\n  }\n\n  &--size {\n    &-small {\n      .va-modal__dialog {\n        max-width: map_get($grid-breakpoints, sm);\n\n        @media all and (max-width: map-get($grid-breakpoints, sm)) {\n          max-width: 100vw !important;\n        }\n\n        .va-modal__inner {\n          max-width: map_get($grid-breakpoints, sm);\n\n          @media all and (max-width: map-get($grid-breakpoints, sm)) {\n            max-width: 100vw !important;\n          }\n        }\n      }\n    }\n\n    &-large {\n      .va-modal__dialog {\n        max-width: map-get($grid-breakpoints, lg);\n\n        .va-modal__inner {\n          max-width: map-get($grid-breakpoints, lg);\n        }\n      }\n    }\n  }\n\n  &--fixed-layout {\n    .va-modal__inner {\n      overflow: hidden;\n      padding: var(--va-modal-padding-top) 0 var(--va-modal-padding-bottom);\n      max-height: calc(100vh - 2rem);\n\n      .va-modal__header,\n      .va-modal__footer,\n      .va-modal__title {\n        padding: 0 var(--va-modal-padding-right) 0 var(--va-modal-padding-left);\n      }\n\n      .va-modal__message {\n        padding: 0 var(--va-modal-padding-right) 0 var(--va-modal-padding-left);\n        overflow: auto;\n      }\n    }\n\n    .va-modal__dialog {\n      overflow: hidden;\n    }\n  }\n\n  &--no-padding {\n    .va-modal__inner {\n      padding: 0;\n    }\n  }\n\n  &__message {\n    margin-bottom: 1.5rem;\n  }\n\n  &__inner {\n    overflow: auto;\n    display: flex;\n    position: relative;\n    flex-flow: column;\n    padding: var(--va-modal-padding);\n    max-width: map_get($grid-breakpoints, md);\n    margin: auto;\n\n    > div:last-of-type {\n      margin-bottom: 0;\n    }\n  }\n\n  &__close {\n    position: absolute;\n    top: 1rem;\n    right: 1rem;\n    cursor: pointer;\n    font-size: 1.5rem;\n    font-style: normal;\n    color: var(--va-secondary);\n    z-index: 1;\n\n    &--fullscreen {\n      position: fixed;\n    }\n  }\n\n  &__default-cancel-button {\n    margin-right: 0.75rem;\n  }\n\n  &__footer {\n    margin-top: auto;\n    min-height: fit-content;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: var(--va-modal-footer-justify-content);\n\n    &:last-of-type {\n      margin-bottom: 0;\n    }\n  }\n}\n</style>\n"],"mappings":";;;;;;;;;;;;;;;AAuJA,MAAMA,cAAA,GAAiBC,eAAA,CAAgB;EACrCC,IAAA,EAAM;EACNC,YAAA,EAAc;EACdC,KAAA,EAAO;IACL,GAAGC,sBAAA;IACHC,YAAA,EAAc;MAAEC,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAK;EAC/C;EACAC,KAAA,EAAOA,CAACN,KAAA,EAAO;IAAEO,KAAA;IAAOC;EAAM,MAAM,MAAM;;IAAA,OAAAR,KAAA,CAAME,YAAA,GAC5CO,CAAA,CAAEC,UAAA,EAAY;MAAE,GAAGF;IAAM,GAAGD,KAAK,KACjCI,EAAA,GAAAJ,KAAA,CAAMF,OAAA,KAAN,gBAAAM,EAAA,CAAAC,IAAA,CAAAL,KAAA,EAAgBC,KAAA;EAAA;AACtB,CAAC;AAED,MAAAK,SAAA,GAAehB,eAAA,CAAgB;EAC7BC,IAAA,EAAM;EACNC,YAAA,EAAc;EACde,UAAA,EAAY;IAAEC,QAAA;IAAUC,MAAA;IAAQpB;EAAe;EAC/CqB,KAAA,EAAO,CACL,GAAGC,gBAAA,EACH,UAAU,MAAM,eAAe,QAAQ,gBAAgB,SAAS,gBAClE;EACAlB,KAAA,EAAO;IACL,GAAGmB,gBAAA;IACHC,UAAA,EAAY;MAAEjB,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAM;IAC5CgB,aAAA,EAAe;MAAElB,IAAA,EAAMmB,MAAA;MAAQjB,OAAA,EAAS;IAAO;IAC/CkB,eAAA,EAAiB;MAAEpB,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAM;IACjDmB,iBAAA,EAAmB;MAAErB,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAM;IACnDoB,KAAA,EAAO;MAAEtB,IAAA,EAAMmB,MAAA;MAAQjB,OAAA,EAAS;IAAG;IACnCqB,OAAA,EAAS;MAAEvB,IAAA,EAAMmB,MAAA;MAAQjB,OAAA,EAAS;IAAG;IACrCsB,MAAA,EAAQ;MAAExB,IAAA,EAAMmB,MAAA;MAAQjB,OAAA,EAAS;IAAQ;IACzCuB,UAAA,EAAY;MAAEzB,IAAA,EAAMmB,MAAA;MAAQjB,OAAA,EAAS;IAAY;IACjDwB,kBAAA,EAAoB;MAAE1B,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAM;IACpDyB,UAAA,EAAY;MAAE3B,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAM;IAC5C0B,WAAA,EAAa;MAAE5B,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAM;IAC7C2B,gBAAA,EAAkB;MAAE7B,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAK;IACjD4B,SAAA,EAAW;MAAE9B,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAM;IAC3C6B,gBAAA,EAAkB;MAAE/B,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAM;IAClD8B,YAAA,EAAc;MAAEhC,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAM;IAC9C+B,QAAA,EAAU;MAAEjC,IAAA,EAAMmB,MAAA;MAAQjB,OAAA,EAAS;IAAG;IACtCgC,SAAA,EAAW;MAAElC,IAAA,EAAMmB,MAAA;MAAQjB,OAAA,EAAS;IAAG;IACvCiC,WAAA,EAAa;MAAEnC,IAAA,EAAMmB;IAAO;IAC5BiB,IAAA,EAAM;MACJpC,IAAA,EAAMmB,MAAA;MACNjB,OAAA,EAAS;MACTmC,SAAA,EAAYC,KAAA,IAAkB,CAAC,UAAU,SAAS,OAAO,EAAEC,QAAA,CAASD,KAAK;IAC3E;IACAE,WAAA,EAAa;MAAExC,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAM;IAC7CuC,kBAAA,EAAoB;MAAEzC,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAM;IACpDwC,OAAA,EAAS;MAAE1C,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAK;IACxCyC,cAAA,EAAgB;MAAE3C,IAAA,EAAM,CAAC4C,MAAA,EAAQzB,MAAM;MAAGjB,OAAA,EAAS;IAAI;IACvD2C,iBAAA,EAAmB;MAAE7C,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAM;IACnD4C,IAAA,EAAM;MAAE9C,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAM;IACtC6C,MAAA,EAAQ;MAAE/C,IAAA,EAAM,CAAC4C,MAAA,EAAQzB,MAAM;MAAGjB,OAAA,EAAS;IAAU;IACrD8C,eAAA,EAAiB;MAAEhD,IAAA,EAAMmB,MAAA;MAAQjB,OAAA,EAAS;IAAuB;IACjE+C,SAAA,EAAW;MAAEjD,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAM;IAC3CgD,WAAA,EAAa;MAAElD,IAAA,EAAMmD;IAAgD;IACrEC,QAAA,EAAU;MAAEpD,IAAA,EAAMmD;IAAgD;IAClEE,YAAA,EAAc;MAAErD,IAAA,EAAMmD;IAAgD;IACtEG,cAAA,EAAgB;MAAEtD,IAAA,EAAMmB,MAAA;MAAQjB,OAAA,EAAS;IAAW;EACtD;EACAC,MAAON,KAAA,EAAO;IAAE0D;EAAA,GAAQ;IACtB,MAAMC,WAAA,GAAcC,UAAA;IACpB,MAAMC,WAAA,GAAcD,UAAA;IACpB,MAAM;MAAEE,WAAA;MAAaC;IAAU,IAAIC,YAAA,CAAa;IAE1C;MACJC,aAAA;MACAC,eAAA;MACAC,eAAA;MACAC;IAAA,IACEC,aAAA,CAAc;IAEZ;MAAEC;IAAA,IAAaC,SAAA;IACrB,MAAM;MAAEC;IAAkB,IAAIC,YAAA,CAAaC,KAAA,CAAM1E,KAAA,EAAO,iBAAiB,CAAC;IAC1E,MAAM;MAAE2E;IAAkB,IAAAC,WAAA,CAAY5E,KAAA,EAAO0D,IAAI;IAE3C,MAAAmB,aAAA,GAAgBC,QAAA,CAAS,OAAO;MACpC,wBAAwB9E,KAAA,CAAM8B,UAAA;MAC9B,+BAA+B9B,KAAA,CAAMgC,gBAAA;MACrC,0BAA0BhC,KAAA,CAAM2C,WAAA;MAChC,wBAAwB3C,KAAA,CAAMoD,SAAA;MAC9B,CAAC,kBAAkBpD,KAAA,CAAMuC,IAAA,EAAM,GAAGvC,KAAA,CAAMuC,IAAA,KAAS;IACjD;IACF,MAAMwC,2BAAA,GAA8BD,QAAA,CAAS,OAAO;MAAE,WAAW9E,KAAA,CAAMkD;IAAuB;IACxF,MAAA8B,mBAAA,GAAsBF,QAAA,CAAS,OAAO;MAC1C1C,QAAA,EAAUpC,KAAA,CAAMoC,QAAA;MAChBC,SAAA,EAAWrC,KAAA,CAAMqC,SAAA;MACjB4C,KAAA,EAAOT,iBAAA,CAAkB/B,KAAA;MACzByC,UAAA,EAAYZ,QAAA,CAAStE,KAAA,CAAMmD,eAAe;IAC1C;IAEI,MAAAgC,oBAAA,GAAuBL,QAAA,CAAS,OAAO;MAC3C,6BAA6BV,kBAAA,CAAmB3B,KAAA;MAChD,0BAA0B0B,eAAA,CAAgB1B;IAC1C;IAEF,MAAM2C,iBAAA,GAAoBA,CAAA,KAAM;MAC9B,IAAIpF,KAAA,CAAMgD,iBAAA,IAAqB,CAACoB,kBAAA,CAAmB3B,KAAA,EAAO;QACjD;MACT;MACO;IAAA;IAGH,MAAA4C,qBAAA,GAAwBP,QAAA,CAAS,MAAM;MACvC,KAAC9E,KAAA,CAAM6C,OAAA,EAAS;QAAE;MAAO;MAEzB,IAAAsB,eAAA,CAAgB1B,KAAA,IAASzC,KAAA,CAAMgD,iBAAA,EAAmB;QAC7C;UACL,oBAAoB;UACpBsC,OAAA,EAASF,iBAAA,CAAkB;UAC3B,WAAWpF,KAAA,CAAMkD,MAAA,IAAUH,MAAA,CAAO/C,KAAA,CAAMkD,MAAM,IAAI;QAAA;MAEtD;MACO;IAAA,CACR;IAED,MAAMqC,IAAA,GAAOA,CAAA,KAAM;MAAEZ,aAAA,CAAclC,KAAA,GAAQ;IAAA;IACrC,MAAA+C,IAAA,GAAQC,EAAA,IAAoB;MAChC,MAAMC,KAAA,GAAQA,CAAA,KAAM;QAClBf,aAAA,CAAclC,KAAA,GAAQ;QACjBgD,EAAA,oBAAAA,EAAA;MAAA;MAEPzF,KAAA,CAAMqD,WAAA,GAAcrD,KAAA,CAAMqD,WAAA,CAAYqC,KAAK,IAAIA,KAAA;IAAM;IAEvD,MAAMC,MAAA,GAASA,CAAA,KAAM;MAAgBhB,aAAA,CAAAlC,KAAA,GAAQ,CAACkC,aAAA,CAAclC,KAAA;IAAA;IAC5D,MAAMmD,MAAA,GAASA,CAAA,KAAM;MACnB,MAAMF,KAAA,GAAQA,CAAA,KAAM;QACbF,IAAA,OAAM9B,IAAA,CAAK,QAAQ,CAAC;MAAA;MAE3B1D,KAAA,CAAMwD,YAAA,GAAexD,KAAA,CAAMwD,YAAA,CAAakC,KAAK,IAAIA,KAAA;IAAM;IAEzD,MAAMG,EAAA,GAAKA,CAAA,KAAM;MACf,MAAMH,KAAA,GAAQA,CAAA,KAAM;QACbF,IAAA,OAAM9B,IAAA,CAAK,IAAI,CAAC;MAAA;MAEvB1D,KAAA,CAAMuD,QAAA,GAAWvD,KAAA,CAAMuD,QAAA,CAASmC,KAAK,IAAIA,KAAA;IAAM;IAEjD,MAAMI,gBAAA,GAAmBA,CAAA,KAAM;MAC7BC,QAAA,CAAS,MAAM;QACb,IAAIlC,WAAA,CAAYpB,KAAA,EAAO;UACrBqB,WAAA,CAAYD,WAAA,CAAYpB,KAAK;QAC/B;MAAA,CACD;IAAA;IAGH,MAAMuD,uBAAA,GAA2BC,EAAA,IAAoBvC,IAAA,CAAK,eAAeuC,EAAE;IAC3E,MAAMC,sBAAA,GAA0BD,EAAA,IAAoBvC,IAAA,CAAK,QAAQuC,EAAE;IACnE,MAAME,uBAAA,GAA2BF,EAAA,IAAoBvC,IAAA,CAAK,gBAAgBuC,EAAE;IAC5E,MAAMG,sBAAA,GAA0BH,EAAA,IAAoBvC,IAAA,CAAK,SAASuC,EAAE;IAE9D,MAAAI,WAAA,GAAeC,CAAA,IAAqB;MACxC,MAAMC,SAAA,GAAYA,CAAA,KAAM;QAClB,IAAAD,CAAA,CAAEE,IAAA,KAAS,YAAY,CAACxG,KAAA,CAAMmC,YAAA,IAAgB,CAACnC,KAAA,CAAMiC,SAAA,IAAakC,eAAA,CAAgB1B,KAAA,EAAO;UACpFmD,MAAA;QACT;MAAA;MAGFa,UAAA,CAAWF,SAAS;IAAA;IAGNG,eAAA,EAAC7C,WAAW,GAAG,MAAM;MAC/B,KAACc,aAAA,CAAclC,KAAA,IAASzC,KAAA,CAAMkC,gBAAA,IAAoBlC,KAAA,CAAMiC,SAAA,IAAa,CAACkC,eAAA,CAAgB1B,KAAA,EAAO;QAAE;MAAO;MAE1GiB,IAAA,CAAK,eAAe;MACbkC,MAAA;IAAA,CACR;IAED,MAAMe,MAAA,GAASC,SAAA;IAEfC,WAAA,CAAY,MAAM;;MAChB,IAAIlC,aAAA,CAAclC,KAAA,EAAO;QAChB,CAAA9B,EAAA,GAAAgG,MAAA,CAAAlE,KAAA,qBAAA9B,EAAA,CAAOmG,gBAAA,CAAiB,SAAST,WAAA;MAAW,OAC9C;QACE,CAAAU,EAAA,GAAAJ,MAAA,CAAAlE,KAAA,qBAAAsE,EAAA,CAAOC,mBAAA,CAAoB,SAASX,WAAA;MAC7C;IAAA,CACD;IAEDY,OAAA,CAAQvC,KAAA,CAAM1E,KAAA,EAAO,MAAM,GAAG2E,aAAa;IAE3C,MAAMuC,WAAA,GAAcC,WAAA;IACd,MAAAC,eAAA,GAAmBC,QAAA,IAAqB;MAC5C,IAAI,CAACH,WAAA,CAAYzE,KAAA,IAASzC,KAAA,CAAMuB,eAAA,EAAiB;QAAE;MAAO;MAE9C2F,WAAA,CAAAzE,KAAA,CAAM6E,IAAA,CAAKC,KAAA,CAAMF,QAAA,GAAWA,QAAA;IAAA;IAG1CG,KAAA,CAAM7C,aAAA,EAAmC8C,gBAAA;MACvC,IAAIA,gBAAA,EAAkB;QACNxD,aAAA;QACdmD,eAAA,CAAgB,QAAQ;QACxB;MACF;MAEA,IAAIhD,kBAAA,CAAmB3B,KAAA,EAAO;QAClBsB,SAAA;QACVqD,eAAA,CAAgB,EAAE;MACpB;MACgBlD,eAAA;IAAA,CACjB;IAEDsD,KAAA,CAAMrD,eAAA,EAAuCuD,kBAAA;MAC3C,IAAIA,kBAAA,EAAoB;QACL5B,gBAAA;MACnB;IAAA,CACD;IAED6B,SAAA,CAAU,MAAM;MACd,IAAIhD,aAAA,CAAclC,KAAA,EAAO;QACTwB,aAAA;MAChB;IAAA,CACD;IAED,MAAM2D,aAAA,GAAgB;MACpB,GAAGC,cAAA,CAAe;MAClBtC,IAAA;MACAC,IAAA;MACAG,MAAA;MACAC,MAAA;MACAC,EAAA;MACAG,uBAAA;MACAE,sBAAA;MACAC,uBAAA;MACAC,sBAAA;MACAC;IAAA;IAGK;MACLjC,kBAAA;MACAD,eAAA;MACAgB,oBAAA;MACAb,QAAA;MACAX,WAAA;MACAE,WAAA;MACAc,aAAA;MACAE,aAAA;MACAG,mBAAA;MACAD,2BAAA;MACAM,qBAAA;MACAyC,QAAA,EAAU;QAAEvC,IAAA;QAAMC,IAAA;QAAMG,MAAA;QAAQC,MAAA;QAAQC;MAAG;MAC3C,GAAG+B,aAAA;MACH,GAAGG,aAAA,CAAc;IAAA;EAErB;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}