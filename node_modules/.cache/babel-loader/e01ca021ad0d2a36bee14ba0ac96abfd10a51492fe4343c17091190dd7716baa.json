{"ast":null,"code":"import { defineComponent, computed, ref, watch } from \"vue\";\nimport { p as pick } from \"../../../vendor-2b2dbafd.mjs\";\nimport { V as VaIcon } from \"../va-icon/index-e46b09d5.mjs\";\nimport { V as VaProgressCircle } from \"../va-progress-circle/index-0fe38b09.mjs\";\nimport { V as VaFallback } from \"../va-fallback/index-f65286a4.mjs\";\nimport { e as extractComponentProps } from \"../../utils/component-options/extract-component-options-6b96d215.mjs\";\nimport { u as useLoadingProps } from \"../../composables/useLoading-5a447e96.mjs\";\nimport { u as useSizeProps, a as useSize } from \"../../composables/useSize-7540f7e4.mjs\";\nimport { u as useComponentPresetProp } from \"../../composables/useComponentPreset-0dfbd395.mjs\";\nimport { u as useColors } from \"../../composables/useColors-b582f249.mjs\";\nimport { u as useTextColor } from \"../../composables/useTextColor-48b60d5c.mjs\";\nimport { u as useBem } from \"../../composables/useBem-33d80128.mjs\";\nimport { f as filterComponentProps } from \"../../utils/component-options/filter-props-9727421a.mjs\";\nconst VaFallbackProps = extractComponentProps(VaFallback);\nconst _sfc_main = defineComponent({\n  name: \"VaAvatar\",\n  components: {\n    VaIcon,\n    VaProgressCircle,\n    VaFallback\n  },\n  props: {\n    ...useLoadingProps,\n    ...useSizeProps,\n    ...useComponentPresetProp,\n    ...VaFallbackProps,\n    color: {\n      type: String,\n      default: \"primary\"\n    },\n    textColor: {\n      type: String\n    },\n    square: {\n      type: Boolean,\n      default: false\n    },\n    fontSize: {\n      type: String,\n      default: \"\"\n    },\n    src: {\n      type: String,\n      default: null\n    },\n    icon: {\n      type: String,\n      default: \"\"\n    },\n    alt: {\n      type: String,\n      default: \"\"\n    }\n  },\n  emits: [\"error\", \"fallback\"],\n  setup(props, {\n    emit\n  }) {\n    const {\n      getColor\n    } = useColors();\n    const colorComputed = computed(() => getColor(props.color));\n    const backgroundColorComputed = computed(() => {\n      if (props.loading || props.src && !hasLoadError.value) {\n        return void 0;\n      }\n      return colorComputed.value;\n    });\n    const {\n      sizeComputed,\n      fontSizeComputed\n    } = useSize(props, \"VaAvatar\");\n    const {\n      textColorComputed\n    } = useTextColor(backgroundColorComputed);\n    const computedStyle = computed(() => ({\n      fontSize: props.fontSize || fontSizeComputed.value\n    }));\n    const classesComputed = useBem(\"va-avatar\", () => ({\n      ...pick(props, [\"square\"])\n    }));\n    const hasLoadError = ref(false);\n    const onLoadError = event => {\n      hasLoadError.value = true;\n      emit(\"error\", event);\n    };\n    watch(() => props.src, () => {\n      hasLoadError.value = false;\n    });\n    const avatarOptions = computed(() => ({\n      hasError: hasLoadError.value,\n      onError: onLoadError\n    }));\n    return {\n      hasLoadError,\n      sizeComputed,\n      avatarOptions,\n      computedStyle,\n      colorComputed,\n      classesComputed,\n      textColorComputed,\n      backgroundColorComputed,\n      VaFallbackProps: filterComponentProps(VaFallbackProps),\n      onLoadError\n    };\n  }\n});\nexport { _sfc_main as _ };","map":{"version":3,"names":["VaFallbackProps","extractComponentProps","VaFallback","_sfc_main","defineComponent","name","components","VaIcon","VaProgressCircle","props","useLoadingProps","useSizeProps","useComponentPresetProp","color","type","String","default","textColor","square","Boolean","fontSize","src","icon","alt","emits","setup","emit","getColor","useColors","colorComputed","computed","backgroundColorComputed","loading","hasLoadError","value","sizeComputed","fontSizeComputed","useSize","textColorComputed","useTextColor","computedStyle","classesComputed","useBem","pick","ref","onLoadError","event","watch","avatarOptions","hasError","onError","filterComponentProps"],"sources":["../../../../../src/components/va-avatar/VaAvatar.vue"],"sourcesContent":["<template>\n  <div\n    class=\"va-avatar\"\n    :class=\"classesComputed\"\n    :style=\"typeof computedStyle === 'object' ? (Array.isArray(computedStyle) ? [...computedStyle, `--va-0-background-color-computed: ${String(backgroundColorComputed)};--va-1-text-color-computed: ${String(textColorComputed)};--va-2-size-computed: ${String(sizeComputed)}`] : { ...computedStyle, '--va-0-background-color-computed': String(backgroundColorComputed),'--va-1-text-color-computed': String(textColorComputed),'--va-2-size-computed': String(sizeComputed) }) : computedStyle + `;--va-0-background-color-computed: ${String(backgroundColorComputed)};--va-1-text-color-computed: ${String(textColorComputed)};--va-2-size-computed: ${String(sizeComputed)}`\"\n  >\n    <va-progress-circle\n      v-if=\"$props.loading\"\n      :size=\"sizeComputed\"\n      :color=\"colorComputed\"\n      indeterminate\n    />\n    <slot v-bind=\"avatarOptions\" v-else>\n      <img\n        v-if=\"$props.src && !hasLoadError\"\n        :src=\"$props.src\"\n        :alt=\"$props.alt\"\n        @error=\"onLoadError\"\n      >\n      <slot v-else-if=\"hasLoadError && $props.src\" name=\"fallback\">\n        <va-fallback v-bind=\"VaFallbackProps\" @fallback=\"$emit('fallback')\" />\n      </slot>\n      <va-icon\n        v-else-if=\"$props.icon\"\n        :name=\"$props.icon\"\n      />\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, watch, computed } from 'vue'\nimport pick from 'lodash/pick'\n\nimport {\n  useBem,\n  useSize,\n  useColors,\n  useTextColor,\n  useSizeProps,\n  useLoadingProps,\n  useComponentPresetProp,\n} from '../../composables'\nimport { extractComponentProps, filterComponentProps } from '../../utils/component-options'\n\nimport { VaIcon, VaProgressCircle, VaFallback } from '../index'\n\nconst VaFallbackProps = extractComponentProps(VaFallback)\n\nexport default defineComponent({\n  name: 'VaAvatar',\n\n  components: { VaIcon, VaProgressCircle, VaFallback },\n\n  props: {\n    ...useLoadingProps,\n    ...useSizeProps,\n    ...useComponentPresetProp,\n    ...VaFallbackProps,\n\n    color: { type: String, default: 'primary' },\n    textColor: { type: String },\n    square: { type: Boolean, default: false },\n    fontSize: { type: String, default: '' },\n    src: { type: String, default: null },\n    icon: { type: String, default: '' },\n    alt: { type: String, default: '' },\n  },\n\n  emits: ['error', 'fallback'],\n\n  setup (props, { emit }) {\n    const { getColor } = useColors()\n    const colorComputed = computed(() => getColor(props.color))\n    const backgroundColorComputed = computed(() => {\n      if (props.loading || (props.src && !hasLoadError.value)) {\n        return undefined\n      }\n\n      return colorComputed.value\n    })\n    const { sizeComputed, fontSizeComputed } = useSize(props, 'VaAvatar')\n    const { textColorComputed } = useTextColor(backgroundColorComputed)\n\n    const computedStyle = computed(() => ({\n      fontSize: props.fontSize || fontSizeComputed.value,\n    }))\n\n    const classesComputed = useBem('va-avatar', () => ({\n      ...pick(props, ['square']),\n    }))\n\n    const hasLoadError = ref(false)\n\n    const onLoadError = (event: Event) => {\n      hasLoadError.value = true\n      emit('error', event)\n    }\n\n    watch(() => props.src, () => {\n      hasLoadError.value = false\n    })\n\n    const avatarOptions = computed(() => ({\n      hasError: hasLoadError.value,\n      onError: onLoadError,\n    }))\n\n    return {\n      hasLoadError,\n      sizeComputed,\n      avatarOptions,\n      computedStyle,\n      colorComputed,\n      classesComputed,\n      textColorComputed,\n      backgroundColorComputed,\n      VaFallbackProps: filterComponentProps(VaFallbackProps),\n\n      onLoadError,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"variables\";\n\n.va-avatar {\n  align-items: var(--va-avatar-align-items);\n  display: var(--va-avatar-display);\n  justify-content: var(--va-avatar-justify-content);\n  line-height: var(--va-avatar-line-height);\n  position: var(--va-avatar-position);\n  text-align: var(--va-avatar-text-align);\n  vertical-align: var(--va-avatar-vertical-align);\n  border-radius: var(--va-avatar-border-radius);\n  font-family: var(--va-font-family);\n  background-color: var(--va-0-background-color-computed);\n  color: var(--va-1-text-color-computed);\n  width: var(--va-2-size-computed);\n  min-width: var(--va-2-size-computed);  // We only define width because common use case would be flex row, for column we expect user to set appropriate styling externally.\n  height: var(--va-2-size-computed);\n\n  &--square {\n    --va-avatar-border-radius: 0;\n  }\n\n  img,\n  svg {\n    border-radius: inherit;\n    display: inline-flex;\n    height: inherit;\n    width: inherit;\n    margin: auto;\n  }\n}\n</style>\n"],"mappings":";;;;;;;;;;;;;AA+CA,MAAMA,eAAA,GAAkBC,qBAAA,CAAsBC,UAAU;AAExD,MAAAC,SAAA,GAAeC,eAAA,CAAgB;EAC7BC,IAAA,EAAM;EAENC,UAAA,EAAY;IAAEC,MAAA;IAAQC,gBAAA;IAAkBN;EAAW;EAEnDO,KAAA,EAAO;IACL,GAAGC,eAAA;IACH,GAAGC,YAAA;IACH,GAAGC,sBAAA;IACH,GAAGZ,eAAA;IAEHa,KAAA,EAAO;MAAEC,IAAA,EAAMC,MAAA;MAAQC,OAAA,EAAS;IAAU;IAC1CC,SAAA,EAAW;MAAEH,IAAA,EAAMC;IAAO;IAC1BG,MAAA,EAAQ;MAAEJ,IAAA,EAAMK,OAAA;MAASH,OAAA,EAAS;IAAM;IACxCI,QAAA,EAAU;MAAEN,IAAA,EAAMC,MAAA;MAAQC,OAAA,EAAS;IAAG;IACtCK,GAAA,EAAK;MAAEP,IAAA,EAAMC,MAAA;MAAQC,OAAA,EAAS;IAAK;IACnCM,IAAA,EAAM;MAAER,IAAA,EAAMC,MAAA;MAAQC,OAAA,EAAS;IAAG;IAClCO,GAAA,EAAK;MAAET,IAAA,EAAMC,MAAA;MAAQC,OAAA,EAAS;IAAG;EACnC;EAEAQ,KAAA,EAAO,CAAC,SAAS,UAAU;EAE3BC,MAAOhB,KAAA,EAAO;IAAEiB;EAAA,GAAQ;IAChB;MAAEC;IAAA,IAAaC,SAAA;IACrB,MAAMC,aAAA,GAAgBC,QAAA,CAAS,MAAMH,QAAA,CAASlB,KAAA,CAAMI,KAAK,CAAC;IACpD,MAAAkB,uBAAA,GAA0BD,QAAA,CAAS,MAAM;MAC7C,IAAIrB,KAAA,CAAMuB,OAAA,IAAYvB,KAAA,CAAMY,GAAA,IAAO,CAACY,YAAA,CAAaC,KAAA,EAAQ;QAChD;MACT;MAEA,OAAOL,aAAA,CAAcK,KAAA;IAAA,CACtB;IACD,MAAM;MAAEC,YAAA;MAAcC;IAAA,IAAqBC,OAAA,CAAQ5B,KAAA,EAAO,UAAU;IACpE,MAAM;MAAE6B;IAAA,IAAsBC,YAAA,CAAaR,uBAAuB;IAE5D,MAAAS,aAAA,GAAgBV,QAAA,CAAS,OAAO;MACpCV,QAAA,EAAUX,KAAA,CAAMW,QAAA,IAAYgB,gBAAA,CAAiBF;IAC7C;IAEI,MAAAO,eAAA,GAAkBC,MAAA,CAAO,aAAa,OAAO;MACjD,GAAGC,IAAA,CAAKlC,KAAA,EAAO,CAAC,QAAQ,CAAC;IACzB;IAEI,MAAAwB,YAAA,GAAeW,GAAA,CAAI,KAAK;IAExB,MAAAC,WAAA,GAAeC,KAAA,IAAiB;MACpCb,YAAA,CAAaC,KAAA,GAAQ;MACrBR,IAAA,CAAK,SAASoB,KAAK;IAAA;IAGfC,KAAA,OAAMtC,KAAA,CAAMY,GAAA,EAAK,MAAM;MAC3BY,YAAA,CAAaC,KAAA,GAAQ;IAAA,CACtB;IAEK,MAAAc,aAAA,GAAgBlB,QAAA,CAAS,OAAO;MACpCmB,QAAA,EAAUhB,YAAA,CAAaC,KAAA;MACvBgB,OAAA,EAASL;IACT;IAEK;MACLZ,YAAA;MACAE,YAAA;MACAa,aAAA;MACAR,aAAA;MACAX,aAAA;MACAY,eAAA;MACAH,iBAAA;MACAP,uBAAA;MACA/B,eAAA,EAAiBmD,oBAAA,CAAqBnD,eAAe;MAErD6C;IAAA;EAEJ;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}