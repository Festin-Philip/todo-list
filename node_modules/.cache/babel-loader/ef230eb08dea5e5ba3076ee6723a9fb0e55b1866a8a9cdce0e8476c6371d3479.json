{"ast":null,"code":"import { defineComponent, shallowRef, ref, computed, onMounted } from \"vue\";\nimport { _ as _VaIcon } from \"../va-icon/VaIcon-b31696b2.mjs\";\nimport { u as useTimer } from \"../../composables/useTimer-456600be.mjs\";\nimport { u as useComponentPresetProp } from \"../../composables/useComponentPreset-0dfbd395.mjs\";\nimport { u as useColors } from \"../../composables/useColors-b582f249.mjs\";\nimport { u as useTextColor } from \"../../composables/useTextColor-48b60d5c.mjs\";\nimport { u as useTranslation } from \"../../composables/useTranslation-0934900c.mjs\";\nconst VaToastRenderer = defineComponent({\n  name: \"VaToastRenderer\",\n  props: {\n    render: {\n      type: Function,\n      required: true\n    }\n  },\n  setup: props => () => props.render()\n});\nconst _sfc_main = defineComponent({\n  name: \"VaToast\",\n  components: {\n    VaIcon: _VaIcon,\n    VaToastRenderer\n  },\n  emits: [\"on-click\", \"on-close\"],\n  props: {\n    ...useComponentPresetProp,\n    title: {\n      type: String,\n      default: \"\"\n    },\n    offsetY: {\n      type: Number,\n      default: 16\n    },\n    offsetX: {\n      type: Number,\n      default: 16\n    },\n    message: {\n      type: [String, Function],\n      default: \"\"\n    },\n    dangerouslyUseHtmlString: {\n      type: Boolean,\n      default: false\n    },\n    icon: {\n      type: String,\n      default: \"close\"\n    },\n    customClass: {\n      type: String,\n      default: \"\"\n    },\n    duration: {\n      type: Number,\n      default: 5e3\n    },\n    color: {\n      type: String,\n      default: \"\"\n    },\n    closeable: {\n      type: Boolean,\n      default: true\n    },\n    onClose: {\n      type: Function\n    },\n    onClick: {\n      type: Function\n    },\n    multiLine: {\n      type: Boolean,\n      default: false\n    },\n    position: {\n      type: String,\n      default: \"top-right\",\n      validator: value => [\"top-right\", \"top-left\", \"bottom-right\", \"bottom-left\"].includes(value)\n    },\n    render: {\n      type: Function\n    },\n    ariaCloseLabel: {\n      type: String,\n      default: \"$t:close\"\n    },\n    role: {\n      type: String,\n      default: void 0\n    }\n  },\n  setup(props, {\n    emit\n  }) {\n    const rootElement = shallowRef();\n    const {\n      getColor\n    } = useColors();\n    const {\n      textColorComputed\n    } = useTextColor();\n    const visible = ref(false);\n    const positionX = computed(() => {\n      return props.position.includes(\"right\") ? \"right\" : \"left\";\n    });\n    const positionY = computed(() => {\n      return props.position.includes(\"top\") ? \"top\" : \"bottom\";\n    });\n    const toastClasses = computed(() => [props.customClass, props.multiLine ? \"va-toast--multiline\" : \"\"]);\n    const toastStyles = computed(() => ({\n      [positionY.value]: `${props.offsetY}px`,\n      [positionX.value]: `${props.offsetX}px`,\n      backgroundColor: getColor(props.color),\n      color: textColorComputed.value\n    }));\n    const computedAriaLive = computed(() => {\n      if (props.role === \"status\") {\n        return \"polite\";\n      } else {\n        return \"assertive\";\n      }\n    });\n    const computedMessage = computed(() => typeof props.message === \"function\" ? props.message() : props.message);\n    const destroyElement = () => {\n      var _a, _b;\n      (_a = rootElement.value) == null ? void 0 : _a.removeEventListener(\"transitionend\", destroyElement);\n      (_b = rootElement.value) == null ? void 0 : _b.remove();\n    };\n    const onToastClick = () => {\n      if (typeof props.onClick === \"function\") {\n        props.onClick();\n      } else {\n        emit(\"on-click\");\n      }\n    };\n    const onToastClose = () => {\n      var _a;\n      visible.value = false;\n      (_a = rootElement.value) == null ? void 0 : _a.addEventListener(\"transitionend\", destroyElement);\n      if (typeof props.onClose === \"function\") {\n        props.onClose();\n      } else {\n        emit(\"on-close\");\n      }\n    };\n    const timer = useTimer();\n    const clearTimer = timer.clear;\n    const startTimer = () => {\n      if (props.duration > 0) {\n        timer.start(() => visible.value && onToastClose(), props.duration);\n      }\n    };\n    onMounted(() => {\n      visible.value = true;\n      startTimer();\n    });\n    return {\n      ...useTranslation(),\n      visible,\n      toastClasses,\n      toastStyles,\n      computedAriaLive,\n      computedMessage,\n      onToastClick,\n      onToastClose,\n      startTimer,\n      clearTimer\n    };\n  }\n});\nexport { _sfc_main as _ };","map":{"version":3,"names":["VaToastRenderer","defineComponent","name","props","render","type","Function","required","setup","_sfc_main","components","VaIcon","_VaIcon","emits","useComponentPresetProp","title","String","default","offsetY","Number","offsetX","message","dangerouslyUseHtmlString","Boolean","icon","customClass","duration","color","closeable","onClose","onClick","multiLine","position","validator","value","includes","ariaCloseLabel","role","emit","rootElement","shallowRef","getColor","useColors","textColorComputed","useTextColor","visible","ref","positionX","computed","positionY","toastClasses","toastStyles","backgroundColor","computedAriaLive","computedMessage","destroyElement","_a","removeEventListener","_b","remove","onToastClick","onToastClose","addEventListener","timer","useTimer","clearTimer","clear","startTimer","start","onMounted","useTranslation"],"sources":["../../../../../src/components/va-toast/VaToast.vue"],"sourcesContent":["<template>\n  <transition name=\"va-toast-fade\">\n    <div\n      v-show=\"visible\"\n      ref=\"rootElement\"\n      :role=\"$props.role ?? $props.closeable ? 'alertdialog' : 'alert'\"\n      :aria-live=\"computedAriaLive\"\n      aria-atomic=\"true\"\n      class=\"va-toast\"\n      :class=\"toastClasses\"\n      :style=\"toastStyles\"\n      @mouseenter=\"clearTimer\"\n      @mouseleave=\"startTimer\"\n      @click=\"onToastClick\"\n    >\n      <div class=\"va-toast__group\">\n        <h2 v-if=\"$props.title\" class=\"va-toast__title\" v-text=\"$props.title\" />\n\n        <div class=\"va-toast__content\" v-show=\"$props.message\">\n          <div v-if=\"$props.dangerouslyUseHtmlString\" v-html=\"computedMessage\" />\n          <p v-else v-text=\"computedMessage\" />\n        </div>\n\n        <div class=\"va-toast__content\" v-if=\"$props.render\">\n          <VaToastRenderer :render=\"$props.render\" />\n        </div>\n\n        <va-icon\n          v-if=\"$props.closeable\"\n          class=\"va-toast__close-icon\"\n          role=\"button\"\n          :aria-label=\"tp($props.ariaCloseLabel)\"\n          tabindex=\"0\"\n          size=\"small\"\n          :name=\"$props.icon\"\n          @click.stop=\"onToastClose\"\n          @keydown.enter.stop=\"onToastClose\"\n        />\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, ref, computed, onMounted, shallowRef } from 'vue'\n\nimport { useComponentPresetProp, useColors, useTimer, useTextColor, useTranslation } from '../../composables'\n\nimport { ToastPosition } from './types'\n\nimport { StringWithAutocomplete } from '../../utils/types/prop-type'\n\nimport VaIcon from '../va-icon/VaIcon.vue'\n\nconst VaToastRenderer = defineComponent({\n  name: 'VaToastRenderer',\n  props: {\n    render: { type: Function, required: true },\n  },\n  setup: (props) => () => props.render(),\n})\n\nexport default defineComponent({\n  name: 'VaToast',\n  components: { VaIcon, VaToastRenderer },\n  emits: ['on-click', 'on-close'],\n  props: {\n    ...useComponentPresetProp,\n    title: { type: String, default: '' },\n    offsetY: { type: Number, default: 16 },\n    offsetX: { type: Number, default: 16 },\n    message: { type: [String, Function], default: '' },\n    dangerouslyUseHtmlString: { type: Boolean, default: false },\n    icon: { type: String, default: 'close' },\n    customClass: { type: String, default: '' },\n    duration: { type: Number, default: 5000 },\n    color: { type: String, default: '' },\n    closeable: { type: Boolean, default: true },\n    onClose: { type: Function },\n    onClick: { type: Function },\n    multiLine: { type: Boolean, default: false },\n    position: {\n      type: String as PropType<ToastPosition>,\n      default: 'top-right',\n      validator: (value: string) => ['top-right', 'top-left', 'bottom-right', 'bottom-left'].includes(value),\n    },\n    render: { type: Function },\n    ariaCloseLabel: { type: String, default: '$t:close' },\n    role: { type: String as PropType<StringWithAutocomplete<'alert' | 'alertdialog' | 'status'>>, default: undefined },\n  },\n  setup (props, { emit }) {\n    const rootElement = shallowRef<HTMLElement>()\n\n    const { getColor } = useColors()\n\n    const { textColorComputed } = useTextColor()\n\n    const visible = ref(false)\n\n    const positionX = computed(() => {\n      return props.position.includes('right') ? 'right' : 'left'\n    })\n\n    const positionY = computed(() => {\n      return props.position.includes('top') ? 'top' : 'bottom'\n    })\n\n    const toastClasses = computed(() => [\n      props.customClass,\n      props.multiLine ? 'va-toast--multiline' : '',\n    ])\n\n    const toastStyles = computed(() => ({\n      [positionY.value]: `${props.offsetY}px`,\n      [positionX.value]: `${props.offsetX}px`,\n      backgroundColor: getColor(props.color),\n      color: textColorComputed.value,\n    }))\n\n    const computedAriaLive = computed(() => {\n      if (props.role === 'status') {\n        return 'polite'\n      } else {\n        return 'assertive'\n      }\n    })\n\n    const computedMessage = computed(() => (typeof props.message === 'function') ? props.message() : props.message)\n\n    const destroyElement = () => {\n      rootElement.value?.removeEventListener('transitionend', destroyElement)\n\n      rootElement.value?.remove()\n    }\n\n    const onToastClick = () => {\n      if (typeof props.onClick === 'function') {\n        props.onClick()\n      } else {\n        emit('on-click')\n      }\n    }\n\n    const onToastClose = () => {\n      visible.value = false\n\n      rootElement.value?.addEventListener('transitionend', destroyElement)\n\n      if (typeof props.onClose === 'function') {\n        props.onClose()\n      } else {\n        emit('on-close')\n      }\n    }\n\n    const timer = useTimer()\n    const clearTimer = timer.clear\n    const startTimer = () => {\n      if (props.duration > 0) {\n        timer.start(() => visible.value && onToastClose(), props.duration)\n      }\n    }\n\n    onMounted(() => {\n      visible.value = true\n\n      startTimer()\n    })\n\n    return {\n      ...useTranslation(),\n      visible,\n      toastClasses,\n      toastStyles,\n      computedAriaLive,\n      computedMessage,\n      onToastClick,\n      onToastClose,\n      startTimer,\n      clearTimer,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import \"variables\";\n\n.va-toast {\n  position: fixed;\n  box-sizing: border-box;\n  width: var(--va-toast-width);\n  padding: var(--va-toast-padding);\n  display: flex;\n  align-items: center;\n  border-radius: var(--va-toast-border-radius);\n  border: 1px solid var(--va-toast-border-color);\n  background-color: var(--va-toast-background-color);\n  box-shadow: var(--va-toast-box-shadow);\n  transition: var(--va-toast-transition);\n  overflow: hidden;\n  z-index: var(--va-toast-z-index);\n  font-family: var(--va-font-family);\n\n  &--multiline {\n    min-height: 70px;\n  }\n\n  &--right {\n    right: 16px;\n  }\n\n  &--left {\n    left: 16px;\n  }\n\n  &__group {\n    margin-left: var(--va-toast-group-margin-left);\n    margin-right: var(--va-toast-group-margin-right);\n  }\n\n  &__title {\n    font-weight: var(--va-toast-title-font-weight);\n    font-size: var(--va-toast-title-font-size);\n    color: var(--va-toast-title-color);\n    margin: var(--va-toast-title-margin);\n  }\n\n  &__content {\n    font-size: var(--va-toast-content-font-size);\n    line-height: var(--va-toast-content-line-height);\n    padding-right: var(--va-toast-content-padding-right);\n\n    p,\n    div {\n      margin: 0;\n    }\n  }\n\n  &__icon {\n    height: var(--va-toast-icon-height);\n    width: var(--va-toast-icon-width);\n    font-size: var(--va-toast-icon-font-size);\n  }\n\n  &__close-icon {\n    position: absolute;\n    top: 50%;\n    right: var(--va-toast-close-icon-right);\n    cursor: pointer;\n    transform: translateY(-50%);\n    font-size: var(--va-toast-close-icon-font-siz);\n    opacity: 0.7;\n\n    &:hover {\n      opacity: 1;\n    }\n  }\n}\n\n.va-toast-fade-enter {\n  &.right {\n    right: 0;\n    transform: translateX(100%);\n  }\n\n  &.left {\n    left: 0;\n    transform: translateX(-100%);\n  }\n}\n\n.va-toast-fade-leave-active {\n  opacity: 0;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}